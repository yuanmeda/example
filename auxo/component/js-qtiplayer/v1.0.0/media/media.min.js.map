{"version":3,"sources":["media.min.js"],"names":["window","document","__Q","typeUndefined","String","prototype","trim","this","replace","Array","forEach","callback","i","length","item","apply","addEventListener","target","type","handler","attachEvent","removeEventListener","flag","detachEvent","getStyle","domObj","attribute","style","currentStyle","defaultView","getComputedStyle","_q","selector","context","body","_selector","_dom","substring","indexOf","getElementById","querySelectorAll","each","fn","dom","get","show","display","hide","isShow","css","toggle","name","value","find","bind","event","on","addClass","clsName","classValue","getAttribute","cls","split","newCls","j","c","setAttribute","hasClass","hasCls","removeClass","toggleClass","attr","val","removeAttr","removeAttribute","text","txt","Error","innerText","width","arguments","offsetWidth","parseInt","height","offsetHeight","offset","docElem","win","box","top","left","elem","doc","ownerDocument","documentElement","getBoundingClientRect","nodeType","parentWindow","pageYOffset","scrollTop","clientTop","pageXOffset","scrollLeft","clientLeft","events","that","eventName","support","touch","qpTap","off","before","ele","$temp","createElement","html","parentNode","appendChild","children","len","remove","insertBefore","innerHTML","removeChild","closest","clsSelector","cur","nodeName","toLocaleLowerCase","contains","childNode","compareDocumentPosition","data","key","id","utils","getRandomId","cache","noop","isMobile","navigator","userAgent","match","isiOS","checkHover","getEvent","e","relatedTarget","fromElement","toElement","isWhitePad","sourceCapabilities","firesTouchEvents","stopPropagation","returnValue","preventDefault","Math","random","Date","getMilliseconds","toString","resize","oWidth","oHeight","maxW","maxH","minW","minH","w","h","scale","toFixed","getRequest","sSearch","location","search","oParam","substr","params","paramExpr","param","decodeURIComponent","sParamName","getBasePath","path","hashIndex","lastIndexOf","queryIndex","slashIndex","min","extend","src","copyIsArray","copy","options","clone","deep","jQuery","isFunction","isPlainObject","isArray","undefined","browser","uaBrowser","ua","toLowerCase","rwebkit","ropera","rmsie","rmozilla","exec","version","browserMatch","crosswalk","test","Native","Controller","View","Model","module","exports","logger","methods","_console","console","method","_logger","_level","setLevel","level","debug","log","info","msg","warn","error","vEventHandler","mouseDown","mouseUp","mouseCancel","getEventX","changedTouches","clientX","getEventY","clientY","_$that","$that","vMouseDown","vMouseUp","vMouseCancel","_start","_startX","_startY","func","downEvent","which","getTime","end","endX","endY","holdTime","dx","abs","dy","cancelHandler","Class","Object","create","o","F","Create","ClassUtils","include","obj","extension","hasOwnProperty","object","property","call","proxy","thisobj","proxyAll","fucs","Events","trigger","arg","slice","shift","_eventHandler","_keys","unBind","canBindKey","keys","InteractAppApi","isApp","AndroidInterface","bridgeCallNative","Bridge","callNative","isAppNative","isInteractApp","STUDENT","TEACHER","isStudent","isTeacher","isProjector","userInfo","getCurrentUserInfo","res","userType","setNativeModuleVisibility","items","moduleId","visible","instanceId","setViewerModuleVisibility","lang","jp","media_img_still_loading","media_img_tip","media_video_fullscreen","media_video_exit_fullscreen","media_video_not_support_fullscreen","zh","_lang","zh_CN","en","ja","ja_JP","getLangText","langType","result","MediaPlayer","$container","option","mediaType","self","timeFormat","mouseMoveCount","_mediaModel","MediaModel","funcs","getMediaModel","baseInit","$media","getQMedia","setPreLoad","mediaPreload","_iePreloadNone","_findElement","_eventModel","MediaEvent","_mediaEventHandler","_toolBarEvent","_$volumeIconContainer","_this","_$play","playPause","_updateVolumeEntryView","getVolume","_$mediaBox","_$progress","_progress","_progressMouseup","_$volumeControl","_volumeProgress","_volumeProgressMouseup","_volumeHide","_$volumeIcon","_volumeToggle","_volumeMutedToggle","_volumeShow","msie","iePreloadResetSrc","_resetSrc","$video","elements","_$loading","_$playInBody","_$endTime","_$currentTime","_$downedBar","_$playedBar","_$volumeBarContainer","_$volumeBarR","_$volumeBarS","_$toolbar","_$mediaDisable","sel","clear","load","mediaEventListener","ex","destroy","reset","pause","setLock","isLock","lock","changeVolume","vol","setVolume","hideVolumeControl","volumeChangeEvent","isPlaying","mediaObj","getMedia","paused","play","renderUI","outTrigger","mediaEvent","playing","ended","timeupdate","getReadyState","_updateEndTime","_updateVideoData","_updateCurrentTime","volumechange","progress","currentTime","getCurrentTime","duration","getDuration","buffered","getBuffered","minEnd","percent","waiting","code","loadedmetadata","durationchange","durationInit","durationInitDuration","_formatTime","progWrapper","media","_coordinate","_seekTo","pageX","volume","muted","getMuted","_volumeClick","setTimeout","srcElement","$volume","setMuted","volumeUp","_volumeSeekTo","pageY","current","scrubbing","scrubbingWidth","xPos","immediately","progressBar","progWidth","max","getScale","seekTo","setCurrentTime","round","yPos","progHeight","point","touches","secs","hours","floor","minutes","seconds","scaleX","mediaPlay","mediaPause","mediaSkip","seek","mediaVolumeChange","AudioPlayerPlugin","$this","AudioPlayer","DEFAULTS","onEnd","onPause","onPlay","onSeek","onVolumeChange","onTimeUpdate","onlyRender","audio","_init","start","_playTriggerHandler","_endedHandler","_resizeMap","qp-media-box-mini","qp-media-box-min-height","qp-media-box-min-height-audio-s","qp-media-box-max-hd","started","_controlEvent","$audio","audioHtml","_$qpVideoWrap","_$qpMediaIcon","autoAdaptSize","resizeMedia","message","reWidth","reHeight","mini","ImagePlayerPlugin","ImagePlayer","DEFAULT","img","renderImmediately","imgData","_minRenderWidth","_minRenderHeight","viewer","_defaultRenderHeight","_defaultRenderWidth","_loadImg","Image","complete","onload","_createHtml","render","$image","_createViewer","imageHtml","_$tipMessage","clearTimeout","_msgTimeoutId","_$picsBg","_$image","fullChange","onFullScreenChange","eventHandler","fullScreenChange","ImageViewer","VideoPlayerPlugin","VideoPlayer","video","supportFullscreen","showPlayBtnInVideo","showFullscreenBtn","_unBind","_pauseEventHandler","_volumeToggleEventHandler","_timeOutId","_supportFullScreen","_$qpIconsVideo","_autoHide","immediatily","_$goFullscreen","_exitFull","_fullScreenCallBack","qp-media-box-min-width","surportFull","qp-media-box-min-width-s","qp-media-box-min-height-s","qp-media-box-not-surpot-full-min","qp-media-box-not-surpot-full-min-s","qp-media-box-max-fullscreen","_fullScreen","_createVideo","_$exitFullscreen","_$fullScreenMessage","_$toolbarCover","videoHtml","_fullScreenEnabled","getWidth","getHeight","_pcControlToggle","_lastX","_lastY","_isFullScreen","autoHide","_touchControlToggle","className","_mediaBoxToggle","_toFullScreen","_playInVideoHanlder","_fullScreenClickHandler","exitFullscreen","webkitCancelFullScreen","msExitFullscreen","mozCancelFullScreen","_fullMsgTimeoutId","container","rfs","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","_fullTimeOutId","_fullScreenChangeEnable","_unSurportFullApi","webkit","_fullScreenChangeHandler","mozilla","activeElement","webkitIsFullScreen","webkitFullscreenEnabled","msFullscreenEnabled","mozFullScreenEnabled","_imgData","stopImgPropagation","$body","viewerHtml","$mask","$imgContainer","$close","$img","$center","_maxHeight","innerHeight","_maxWidth","innerWidth","rs","eventMethod","mediaModel","emptied","mediaTarget","mediaId","getId","index","getMediaType","_onPlay","_ended","resetPoster","_onEnd","seeked","getError","loadstart","loadeddata","stalled","suspend","mutuallyExclusive","mutuallyExclusivePlay","dataId","eventTrigger","lastVolumeDisplay","lastVolume","volumeChange","poster","tagName","preLoad","attrWidth","cssWidth","attrHeight","cssHeight","getPoster","isNaN","readyState","arr","push","join","_emptyFunc","NDMediaPlayer","_$medias","DefaultOption","containerId","returnInstances","mediaArry","extendOption","eventHanlder","imgOption","videoOption","audioOption","mediaMargin","_getMedia","_getKeyMedia","_getKey","$renderBody","_getKeyId","_getKeyType","renderToTarget","mediaEle","targetEle","containerEle","childNodes","renderMediaEle","$containerEle","_clear","rkey","mediaPlayer","setLoggerLevel","$view","$renderBodys","mediakey","querySelector","view","instances","l","$div","newOption","mediaOnStart","mediaOnPause","mediaOnEnded","mediaOnTimeupdate","mediaOnSeeked","mediaOnVolumeChange","diaplay","mediaPauseAll","mediaOnFullScreenChange","PPTMediaRender","videoZIndex","renderVideoImg","imgSrc","imgEle","previousElementSibling","mediaRenderComplete","$closest","$medias","parent","PPTMediaPlayer","renderMediaComplete","renderVideo","videoEle","renderAudio","audioEle","$pNode","currentKey","nextElementSibling","$m","mOper","$contentHolder","$audioView","located","locat","pNodeOffset","holderOffset","audioWidth","audioHeight","pNodeWidth","pNodeHeight","right","bottom"],"mappings":"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","file":"media.min.js","sourcesContent":["//version=1.0\r\n(function(window,document){\r\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\nvar __Q = (function () {\r\n    'use strict';\r\n\r\n    var typeUndefined = typeof  undefined;\r\n\r\n    //\r\n    if (typeof String.prototype.trim === typeUndefined) {\r\n        String.prototype.trim = function () {\r\n            return this.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n        };\r\n    }\r\n    //\r\n    if (typeof Array.prototype.forEach === typeUndefined) {\r\n        Array.prototype.forEach = function (callback) {\r\n            for (var i = 0; i < this.length; i++) {\r\n                var item = this[i];\r\n                callback.apply(this, [item, i, this]);\r\n            }\r\n        };\r\n    }\r\n\r\n\r\n    var addEventListener = function (target, type, handler) {\r\n        if (target.addEventListener) {\r\n            target.addEventListener(type, handler, false);\r\n        } else if (target.attachEvent) {\r\n            type = 'on' + type;\r\n            target.attachEvent(type, handler);\r\n        } else {\r\n            target['on' + type] = handler;\r\n        }\r\n    };\r\n    var removeEventListener = function (target, type, handler,flag) {\r\n        if (target.removeEventListener) {\r\n            target.removeEventListener(type, handler, flag);\r\n        } else if (target.detachEvent) {\r\n            type = 'on' + type;\r\n            target.detachEvent(type, handler);\r\n        } else {\r\n\r\n        }\r\n    };\r\n\r\n    var getStyle = function (domObj, attribute) {\r\n        var style = domObj.style[attribute];\r\n        if (style) {\r\n            return style;\r\n        }\r\n        return domObj.currentStyle ? domObj.currentStyle[attribute] : document.defaultView.getComputedStyle(domObj, '')[attribute];\r\n    }\r\n\r\n    var _q = function (selector, context) {\r\n        if (typeof  selector === typeUndefined || selector == null) {\r\n            return;\r\n        }\r\n\r\n        if (typeof  context === 'string') {\r\n            selector = context + ' ' + selector;\r\n        }\r\n\r\n        if (typeof context === typeUndefined || selector === null || context === document.body) {\r\n            context = document;\r\n        }\r\n\r\n        this._selector = typeof  selector === 'object' ? selector : selector.trim();\r\n        this._dom = [];\r\n        this.length = 0;\r\n\r\n        if (typeof  selector === 'object') {\r\n            this._dom[0] = selector;\r\n            this.length = 1;\r\n        }\r\n        //#id selector /.class selector\r\n        else if (this._selector.substring(0, 1) === '#' && this._selector.indexOf(' ') <= -1) {\r\n            this._dom[0] = document.getElementById(this._selector.substring(1, this._selector.length));\r\n            if (this._dom[0]) {\r\n                this.length = 1;\r\n            }\r\n        }\r\n        else {\r\n            this._dom = context.querySelectorAll(this._selector);\r\n            this.length = this._dom.length;\r\n        }\r\n        return this;\r\n    };\r\n    _q.prototype = {\r\n        each: function (fn) {\r\n            if (this.length > 0) {\r\n                for (var i = 0; i < this.length; i++) {\r\n                    var dom = this._dom[i];\r\n                    (function () {\r\n                        fn.apply(dom, [i]);\r\n                    })(i);\r\n                }\r\n            }\r\n        },\r\n        get: function (i) {\r\n            return this._dom[i];\r\n        },\r\n        show: function () {\r\n            this.each(function () {\r\n                this.style.display = 'block';\r\n            });\r\n        },\r\n        hide: function () {\r\n            this.each(function () {\r\n                this.style.display = 'none';\r\n            });\r\n        },\r\n        isShow: function () {\r\n            return this.css('display') === 'block';\r\n        },\r\n        toggle: function () {\r\n            this.each(function () {\r\n                if (getStyle(this, 'display') === 'block') {\r\n                    this.style.display = 'none';\r\n                } else {\r\n                    this.style.display = 'block';\r\n                }\r\n            });\r\n        },\r\n        css: function (name, value) {\r\n            if (typeof value === typeUndefined) {\r\n                return getStyle(this._dom[0], name);\r\n            } else {\r\n                this.each(function () {\r\n                    this.style[name] = value;\r\n                });\r\n            }\r\n        },\r\n        find: function (selector) {\r\n            return __Q(selector, this._dom[0]);\r\n        },\r\n        bind: function (event, fn) {\r\n            this.on(event, '', fn);\r\n        },\r\n        addClass: function (clsName) {\r\n            clsName = clsName.trim();\r\n\r\n            this.each(function () {\r\n                var classValue = this.getAttribute('class');\r\n                var cls = classValue != null ? classValue.split(' ') : '';\r\n                var newCls = clsName;\r\n                for (var j = 0; j < cls.length; j++) {\r\n                    var c = cls[j].trim();\r\n                    if (c === clsName || c === '') {\r\n                        continue;\r\n                    }\r\n                    newCls += ' ' + c;\r\n                }\r\n                this.setAttribute('class', newCls);\r\n            });\r\n            return this;\r\n        },\r\n        hasClass: function (clsName) {\r\n            clsName = clsName.trim();\r\n            var hasCls = false;\r\n            this.each(function () {\r\n                var classValue = this.getAttribute('class');\r\n                var cls = classValue != null ? classValue.split(' ') : '';\r\n                for (var j = 0; j < cls.length; j++) {\r\n                    if (cls[j].trim() === clsName) {\r\n                        hasCls = true;\r\n                        break;\r\n                    }\r\n                }\r\n            });\r\n            return hasCls;\r\n\r\n        },\r\n        removeClass: function (clsName) {\r\n            clsName = clsName.trim();\r\n            this.each(function () {\r\n                var classValue = this.getAttribute('class');\r\n                var cls = classValue != null ? classValue.split(' ') : '';\r\n                var newCls = '';\r\n                for (var j = 0; j < cls.length; j++) {\r\n                    var c = cls[j].trim();\r\n                    if (c === clsName || c === '') {\r\n                        continue;\r\n                    }\r\n                    newCls += ' ' + c;\r\n                }\r\n                this.setAttribute('class', newCls);\r\n            });\r\n        },\r\n        toggleClass: function (clsName) {\r\n            this.each(function () {\r\n                var cls = this.getAttribute('class').split(' ');\r\n                var newCls = '';\r\n                var hasCls = false;\r\n                for (var j = 0; j < cls.length; j++) {\r\n                    var c = cls[j].trim();\r\n                    if (c === '') {\r\n                        continue;\r\n                    }\r\n                    if (c === clsName) {\r\n                        hasCls = true;\r\n                        continue;\r\n                    }\r\n                    newCls += ' ' + c;\r\n                }\r\n\r\n                if (!hasCls) {\r\n                    newCls += ' ' + clsName;\r\n                }\r\n                this.setAttribute('class', newCls);\r\n            });\r\n        },\r\n        attr: function (attr, val) {\r\n            if (typeof val !== 'undefined') {\r\n                this.each(function () {\r\n                    if (typeof val !== 'undefined') {\r\n                        this.setAttribute(attr, val);\r\n                    }\r\n                });\r\n                return this;\r\n            } else {\r\n                return this._dom[0].getAttribute(attr);\r\n            }\r\n\r\n\r\n        },\r\n        removeAttr: function (attr) {\r\n            this.each(function () {\r\n                if (attr instanceof Array) {\r\n                    for (var i = 0; i < attr.length; i++) {\r\n                        this.removeAttribute(attr[i]);\r\n                    }\r\n                } else {\r\n                    this.removeAttribute(attr);\r\n                }\r\n            });\r\n        },\r\n        text: function (txt) {\r\n            if (typeof txt === typeof  undefined) {\r\n                throw new Error('only support set text');\r\n            }\r\n            this.each(function () {\r\n                this.innerText = txt;\r\n            });\r\n        },\r\n        width: function () {\r\n            if (arguments.length > 0) {\r\n                throw  new Error('only support get');\r\n            }\r\n            var width = this._dom[0].offsetWidth;\r\n            if (!width) {\r\n                width = parseInt(this.css('width'));\r\n            }\r\n            return width;\r\n        },\r\n        height: function () {\r\n            if (arguments.length > 0) {\r\n                throw  new Error('only support get');\r\n            }\r\n            var height = this._dom[0].offsetHeight;\r\n            if (!height) {\r\n                height = parseInt(this.css('height'));\r\n            }\r\n            return height;\r\n        },\r\n        offset: function () {\r\n            var docElem, win,\r\n                box = {top: 0, left: 0},\r\n                elem = this._dom[0],\r\n                doc = elem && elem.ownerDocument;\r\n\r\n            if (!doc) {\r\n                return;\r\n            }\r\n\r\n            docElem = doc.documentElement;\r\n            // If we don't have gBCR, just use 0,0 rather than error\r\n            // BlackBerry 5, iOS 3 (original iPhone)\r\n            if (typeof elem.getBoundingClientRect !== typeof undefined) {\r\n                box = elem.getBoundingClientRect();\r\n            }\r\n            win = doc == doc.window ? doc : ( doc.nodeType === 9 ? doc.defaultView || doc.parentWindow : false);\r\n            return {\r\n                top: box.top + ( win.pageYOffset || docElem.scrollTop ) - ( docElem.clientTop || 0 ),\r\n                left: box.left + ( win.pageXOffset || docElem.scrollLeft ) - ( docElem.clientLeft || 0 )\r\n            };\r\n        },\r\n        on: function (events, selector, fn) {\r\n            var that = this;\r\n            if (typeof selector === 'function') {\r\n                fn = selector;\r\n                selector = '';\r\n            }\r\n            events.split(' ').forEach(function (event) {\r\n\r\n                if (event.trim() === '') {\r\n                    return;\r\n                }\r\n\r\n                var eventName = event.split('.')[0];\r\n\r\n                //touchclick\r\n                if ((event.split('.')[0] === 'click' && __Q.support.touch) || eventName === 'qpTap') {\r\n                    __Q.event.qpTap(typeof selector !== typeUndefined && selector !== '' ? that.find(selector) : that, fn);\r\n                    return;\r\n                }\r\n\r\n                if (eventName === 'still-click') {\r\n                    eventName = 'click';\r\n                }\r\n\r\n                if (typeof selector !== typeUndefined && selector !== '') {\r\n                    that.find(selector).each(function () {\r\n                        addEventListener(this, eventName, fn);\r\n                    });\r\n                } else {\r\n                    that.each(function () {\r\n                        addEventListener(this, eventName, fn);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        off: function (events, selector, fn) {\r\n            var that = this;\r\n            if (typeof selector === 'function') {\r\n                fn = selector;\r\n                selector = '';\r\n            }\r\n            events.split(' ').forEach(function (event) {\r\n\r\n                if (event.trim() === '') {\r\n                    return;\r\n                }\r\n\r\n                if (typeof selector !== typeUndefined && selector !== '') {\r\n                    that.find(selector).each(function () {\r\n                        removeEventListener(this, event.split('.')[0], fn, false);\r\n                    });\r\n                } else {\r\n                    that.each(function () {\r\n                        removeEventListener(this, event.split('.')[0], fn, false);\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        before: function (ele) {\r\n            if (typeof ele === 'string') {\r\n                //domview\r\n                var $temp = __Q(document.createElement('div'));\r\n                $temp.html(ele);\r\n\r\n                this._dom[0].parentNode.appendChild($temp.get(0));\r\n                var children = $temp.get(0).children;\r\n                var len = children.length;\r\n                var i = 0;\r\n                while (children.length > 0) {\r\n                    if (typeof  children[0] === 'object') {\r\n                        this.before(children[0]);\r\n                    }\r\n                    i++;\r\n                    if (i >= len) {\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                $temp.remove();\r\n            } else {\r\n                this._dom[0].parentNode.insertBefore(ele, this._dom[0]);\r\n            }\r\n\r\n        },\r\n        appendChild: function (ele) {\r\n            this.each(function () {\r\n                this.appendChild(ele);\r\n            });\r\n\r\n        },\r\n        html: function (html) {\r\n            if (typeof html !== typeUndefined) {\r\n                this._dom[0].innerHTML = html;\r\n            } else {\r\n                return this._dom[0].innerHTML;\r\n            }\r\n\r\n        },\r\n        remove: function () {\r\n            if (this._dom[0].parentNode) {\r\n                this._dom[0].parentNode.removeChild(this._dom[0]);\r\n            }\r\n        },\r\n        closest: function (clsSelector) {\r\n            clsSelector = clsSelector.trim();\r\n            if (clsSelector.substring(0, 1) !== '.' || clsSelector.indexOf(' ') > -1) {\r\n                throw  new Error('only support simple class selector ');\r\n            }\r\n            var cur;\r\n            for (cur = this._dom[0]; cur && typeof cur !== 'undefined' && cur.nodeName.toLocaleLowerCase() !== \"body\"; cur = cur.parentNode) {\r\n                // Always skip document fragments\r\n                if (cur.nodeType < 11 &&\r\n                        // Don't pass non-elements to Sizzle\r\n                    cur.nodeType === 1 && new __Q(cur).hasClass(clsSelector.substring(1, clsSelector.length))) {\r\n                    return __Q(cur);\r\n                }\r\n            }\r\n            return;\r\n        },\r\n        contains: function (childNode) {\r\n            var parentNode = this._dom[0];\r\n            if (parentNode.contains) {\r\n                return parentNode !== childNode && parentNode.contains(childNode);\r\n            } else {\r\n                return !!(parentNode.compareDocumentPosition(childNode) & 16);\r\n            }\r\n        },\r\n        data: function (key, val) {\r\n            //id Key;\r\n            var id = this.attr('data-id');\r\n            if (typeof id === typeof undefined || id === null) {\r\n                id = __Q.utils.getRandomId('media');\r\n                this.attr('data-id', id);\r\n            }\r\n\r\n            if (typeof val !== 'undefined') {\r\n                if (val === null) {\r\n                    delete   __Q.cache[id + key];\r\n                } else {\r\n                    __Q.cache[id + key] = val;\r\n                }\r\n            } else {\r\n                return typeof __Q.cache[id + key] === 'undefined' ? '' : __Q.cache[id + key];\r\n            }\r\n        }\r\n    };\r\n\r\n    var __Q = function (selector, context) {\r\n        return new _q(selector, context);\r\n    };\r\n\r\n    __Q.noop = function () {\r\n    };\r\n\r\n    //\r\n    __Q.fn = function (name, fn) {\r\n        _q.prototype[name] = fn;\r\n    };\r\n\r\n    __Q.utils = {};\r\n    __Q.support = {};\r\n    __Q.event = {};\r\n\r\n    __Q.support.isMobile = (function () {\r\n        return navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i) ? true : false;\r\n    })();\r\n    __Q.support.isiOS = navigator.userAgent.match(/iPhone|iPad|iPod/i) ? true : false;\r\n\r\n    __Q.support.touch = (function () {\r\n        if (typeof  navigator === typeUndefined) {\r\n            return false;\r\n        }\r\n        if (('ontouchend' in document) && __Q.support.isMobile) {\r\n            return true;\r\n        }\r\n        return false;\r\n    })();\r\n\r\n\r\n\r\n    /**\r\n     * mouseovermouserout\r\n     */\r\n    __Q.event.checkHover = (function () {\r\n        var getEvent = function (e) {\r\n            return e || window.event;\r\n        };\r\n\r\n        var contains = function (parentNode, childNode) {\r\n            if (parentNode.contains) {\r\n                return parentNode !== childNode && parentNode.contains(childNode);\r\n            } else {\r\n                return !!(parentNode.compareDocumentPosition(childNode) & 16);\r\n            }\r\n        };\r\n        return function (e, target) {\r\n            if (getEvent(e).type === \"mouseover\" || getEvent(e).type === \"mousemove\") {\r\n                return !contains(target, getEvent(e).relatedTarget || getEvent(e).fromElement)\r\n                    && ((getEvent(e).relatedTarget || getEvent(e).fromElement) !== target);\r\n            } else {\r\n                return !contains(target, getEvent(e).relatedTarget || getEvent(e).toElement)\r\n                    && ((getEvent(e).relatedTarget || getEvent(e).toElement) !== target);\r\n            }\r\n        };\r\n    })();\r\n\r\n    __Q.event.isWhitePad = function (e) {\r\n        //\r\n        return !!(e.sourceCapabilities && e.sourceCapabilities.firesTouchEvents);\r\n    };\r\n\r\n    __Q.event.stopPropagation = function (e) {\r\n        if (e.stopPropagation) {\r\n            e.stopPropagation();\r\n        } else {\r\n            e.returnValue = false;\r\n        }\r\n    };\r\n    __Q.event.preventDefault = function (e) {\r\n        if (e.preventDefault) {\r\n            e.preventDefault();\r\n        } else {\r\n            e.returnValue = false;\r\n        }\r\n    };\r\n\r\n\r\n\r\n    __Q.utils.getRandomId = function (name) {\r\n        return name + (Math.random() * 10 + new Date().getMilliseconds()).toString().replace('.', '');\r\n    };\r\n\r\n    __Q.utils.resize = function (oWidth, oHeight, maxW, maxH, minW, minH) {\r\n        var w = oWidth, h = oHeight, scale = 1;\r\n\r\n        if (oWidth < minW) {\r\n            scale = (minW / oWidth).toFixed(3);\r\n            h = parseInt(scale * oHeight);\r\n            w = minW;\r\n        }\r\n        if (h < minH) {\r\n            scale = (minH / oHeight).toFixed(3);\r\n            w = parseInt(scale * oWidth);\r\n            h = minH;\r\n        }\r\n\r\n\r\n        if (maxW > 0 && w > maxW) {\r\n            scale = (maxW / oWidth).toFixed(3);\r\n            h = parseInt(scale * oHeight);\r\n            w = maxW;\r\n\r\n        }\r\n        if (maxH > 0 && h > maxH) {\r\n            scale = (maxH / oHeight).toFixed(3);\r\n            w = parseInt(scale * oWidth);\r\n            h = maxH;\r\n        }\r\n        return {w: w, h: h, scale: scale};\r\n    };\r\n\r\n    __Q.utils.getRequest = (function () {\r\n        var sSearch = location.search;\r\n        var oParam = {};\r\n        sSearch = sSearch.substr(1, sSearch.length);\r\n        var params = sSearch.split('&');\r\n        for (var i = 0; i < params.length; i++) {\r\n            var paramExpr = params[i];\r\n            var param = paramExpr.split('=');\r\n            var key = param[0];\r\n            if (key) {\r\n                var value = decodeURIComponent(param[1]);\r\n                oParam[key] = value;\r\n            }\r\n        }\r\n\r\n        var fn = (function (sParamName) {\r\n            return oParam[sParamName] || '';\r\n        });\r\n        fn.get = function () {\r\n            return oParam;\r\n        };\r\n        return fn;\r\n    })();\r\n\r\n    //\r\n    __Q.utils.getBasePath = function (path) {\r\n        var hashIndex = path.lastIndexOf(\"#\");\r\n        if (hashIndex == -1) {\r\n            hashIndex = path.length;\r\n        }\r\n        var queryIndex = path.indexOf(\"?\");\r\n        if (queryIndex == -1) {\r\n            queryIndex = path.length;\r\n        }\r\n        var slashIndex = path.lastIndexOf(\"/\", Math.min(queryIndex, hashIndex));\r\n        return slashIndex >= 0 ? path.substring(0, slashIndex + 1) : \"\";\r\n    };\r\n\r\n    //jqueryextend\r\n    __Q.extend = function () {\r\n        var src, copyIsArray, copy, name, options, clone,\r\n            target = arguments[0] || {},\r\n            i = 1,\r\n            length = arguments.length,\r\n            deep = false;\r\n\r\n        // Handle a deep copy situation\r\n        if (typeof target === \"boolean\") {\r\n            deep = target;\r\n            target = arguments[1] || {};\r\n            // skip the boolean and the target\r\n            i = 2;\r\n        }\r\n\r\n        // Handle case when target is a string or something (possible in deep copy)\r\n        if (typeof target !== \"object\" && !jQuery.isFunction(target)) {\r\n            target = {};\r\n        }\r\n\r\n        // extend jQuery itself if only one argument is passed\r\n        if (length === i) {\r\n            target = this;\r\n            --i;\r\n        }\r\n\r\n        for (; i < length; i++) {\r\n            // Only deal with non-null/undefined values\r\n            if ((options = arguments[i]) != null) {\r\n                // Extend the base object\r\n                for (name in options) {\r\n                    src = target[name];\r\n                    copy = options[name];\r\n\r\n                    // Prevent never-ending loop\r\n                    if (target === copy) {\r\n                        continue;\r\n                    }\r\n\r\n                    // Recurse if we're merging plain objects or arrays\r\n                    if (deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) )) {\r\n                        if (copyIsArray) {\r\n                            copyIsArray = false;\r\n                            clone = src && jQuery.isArray(src) ? src : [];\r\n\r\n                        } else {\r\n                            clone = src && jQuery.isPlainObject(src) ? src : {};\r\n                        }\r\n\r\n                        // Never move original objects, clone them\r\n                        target[name] = jQuery.extend(deep, clone, copy);\r\n\r\n                        // Don't bring in undefined values\r\n                    } else if (copy !== undefined) {\r\n                        target[name] = copy;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Return the modified object\r\n        return target;\r\n    };\r\n\r\n    __Q.cache = {};//TODO:\r\n\r\n    __Q.browser = {};\r\n\r\n    var uaBrowser = function (userAgent) {\r\n        var ua = userAgent.toLowerCase();\r\n        // Useragent RegExp\r\n        var rwebkit = /(webkit)[ \\/]([\\w.]+)/;\r\n        var ropera = /(opera)(?:.*version)?[ \\/]([\\w.]+)/;\r\n        var rmsie = /(msie) ([\\w.]+)/;\r\n        var rmozilla = /(mozilla)(?:.*? rv:([\\w.]+))?/;\r\n\r\n        var match = rwebkit.exec(ua) ||\r\n            ropera.exec(ua) ||\r\n            rmsie.exec(ua) ||\r\n            ua.indexOf(\"compatible\") < 0 && rmozilla.exec(ua) ||\r\n            [];\r\n        return {browser: match[1] || \"\", version: match[2] || \"0\"};\r\n    };\r\n\r\n    if (typeof  navigator !== typeUndefined) {\r\n        var browserMatch = uaBrowser(navigator.userAgent);\r\n        if (browserMatch.browser) {\r\n            __Q.browser[browserMatch.browser] = true;\r\n            __Q.browser.version = browserMatch.version;\r\n        }\r\n        __Q.browser.crosswalk = /(crosswalk)/.test(navigator.userAgent.toLowerCase());\r\n    }\r\n    __Q.Native = {};//pcnative\r\n    __Q.Controller = {};\r\n    __Q.View = {};\r\n    __Q.Model = {};\r\n\r\n    //if (typeof  exports !== typeUndefined) {\r\n    //    exports.__Q = __Q;\r\n    //}\r\n    if (typeof module === \"object\" && module && typeof module.exports === \"object\") {\r\n        // Expose __Q as module.exports in loaders that implement the Node\r\n        // module pattern (including browserify). Do not create the global, since\r\n        // the user will be storing it themselves locally, and globals are frowned\r\n        // upon in the Node module world.\r\n        module.exports = __Q;\r\n    }\r\n\r\n    return __Q;\r\n})();\r\n\r\n\r\n\n/**\r\n * Created by ylf on 2015/12/13.\r\n */\r\n\r\n__Q.logger = (function (__Q) {\r\n    'use strict';\r\n\r\n    var methods = [\r\n        'assert', 'clear', 'count', 'debug', 'dir', 'dirxml', 'error',\r\n        'exception', 'group', 'groupCollapsed', 'groupEnd', 'info', 'log',\r\n        'markTimeline', 'profile', 'profileEnd', 'table', 'time', 'timeEnd',\r\n        'timeline', 'timelineEnd', 'timeStamp', 'trace', 'warn'\r\n    ];\r\n    var length = methods.length;\r\n    var _console = (window.console = window.console || {});\r\n    var method = null;\r\n\r\n    while (length--) {\r\n        method = methods[length];\r\n        // Only stub undefined methods.\r\n        if (!_console[method]) {\r\n            _console[method] = __Q.noop;\r\n        }\r\n    }\r\n\r\n    //logger level(debug:3, info:2, warn:1, error: 0, close: -1)\r\n    var _logger = {\r\n        _level: 0,\r\n        _console: _console,\r\n        setLevel: function (level) {\r\n            switch (level) {\r\n                case 'debug':\r\n                    this._level = 3;\r\n                    break;\r\n                case 'info':\r\n                    this._level = 2;\r\n                    break;\r\n                case 'warn':\r\n                    this._level = 1;\r\n                    break;\r\n                case 'error':\r\n                    this._level = 0;\r\n                    break;\r\n                default:\r\n                    this._level = -1;\r\n            }\r\n        },\r\n        debug: function () {\r\n            if (this._level >= 3) {\r\n                this._console.log.apply(this._console, arguments);\r\n            }\r\n        },\r\n        info: function (msg) {\r\n            if (this._level >= 2) {\r\n                this._console.info.apply(this._console, arguments);\r\n            }\r\n        },\r\n        warn: function (msg) {\r\n            if (this._level >= 1) {\r\n                this._console.warn.apply(this._console, arguments);\r\n            }\r\n        },\r\n        error: function (msg) {\r\n            if (this._level >= 0) {\r\n                this._console.error.apply(this._console, arguments);\r\n            }\r\n        }\r\n    };\r\n\r\n    return _logger;\r\n})(__Q);\n/**\r\n * Created by ylf on 2015/12/13.\r\n */\r\n\r\n__Q.event.qpTap = (function () {\r\n    var vEventHandler = {};\r\n    if (__Q.support.touch) {\r\n        //\r\n        vEventHandler.mouseDown = 'touchstart';\r\n        vEventHandler.mouseUp = 'touchend';\r\n        vEventHandler.mouseCancel = 'touchcancel';\r\n        vEventHandler.getEventX = function (event) {\r\n            return event.changedTouches[0].clientX;\r\n        };\r\n        vEventHandler.getEventY = function (event) {\r\n            return event.changedTouches[0].clientY;\r\n            //return event.originalEvent.changedTouches[0].clientY;\r\n        };\r\n    } else {\r\n        //\r\n        vEventHandler.mouseDown = 'mousedown';\r\n        vEventHandler.mouseUp = 'mouseup';\r\n        vEventHandler.mouseCancel = 'mouseleave';\r\n        vEventHandler.getEventX = function (event) {\r\n            return event.clientX;\r\n        };\r\n        vEventHandler.getEventY = function (event) {\r\n            return event.clientY;\r\n        };\r\n    }\r\n\r\n    return function (_$that, fn) {\r\n        var $that = _$that;\r\n        var vMouseDown = vEventHandler.mouseDown;\r\n        var vMouseUp = vEventHandler.mouseUp;\r\n        var vMouseCancel = vEventHandler.mouseCancel;\r\n        var _start = 0;\r\n        var _startX = 0;\r\n        var _startY = 0;\r\n\r\n        var func = function (downEvent) {\r\n            if (downEvent.which !== 0 || downEvent.which !== 1) {\r\n                _start = new Date().getTime();\r\n                _startX = vEventHandler.getEventX(downEvent);\r\n                _startY = vEventHandler.getEventY(downEvent);\r\n            }\r\n            //downEvent.stopPropagation();\r\n\r\n            var handler = function (event) {\r\n                if (event.which !== 0 || event.which !== 1) {\r\n                    var end = new Date().getTime();\r\n                    var endX = vEventHandler.getEventX(event);\r\n                    var endY = vEventHandler.getEventY(event);\r\n                    var holdTime = end - _start;\r\n                    var dx = Math.abs(endX - _startX);\r\n                    var dy = Math.abs(endY - _startY);\r\n                    __Q.logger.debug('tap-holdtime',holdTime);\r\n                    if (holdTime <= 350 && dx < 5 && dy < 5) {\r\n                        //tap\r\n                        fn(event);\r\n                    }\r\n                }\r\n\r\n                $that.off(vMouseUp, '', handler);\r\n                $that.off(vMouseCancel, '', cancelHandler);\r\n                //event.stopPropagation();\r\n            };\r\n\r\n            $that.on(vMouseUp, '', handler);\r\n\r\n            var cancelHandler = function (event) {\r\n                $that.off(vMouseUp, '', handler);\r\n                $that.off(vMouseCancel, '', cancelHandler);\r\n                //event.stopPropagation();\r\n            };\r\n\r\n            $that.on(vMouseCancel, '', cancelHandler);\r\n        };\r\n\r\n        $that.on(vMouseDown, '', func);\r\n\r\n    };\r\n\r\n})();\n/**\r\n * Created by ylf on 2015/12/12.\r\n */\r\n\r\n(function (window, __Q) {\r\n    'user strict';\r\n\r\n    __Q.Class = {};\r\n\r\n    if (typeof Object.create !== \"function\"){\r\n        Object.create = function(o) {\r\n            function F() {}\r\n            F.prototype = o;\r\n            return new F();\r\n        };\r\n    }\r\n\r\n    __Q.Class.Create = function () {\r\n        return Object.create(__Q.Class.ClassUtils);\r\n    };\r\n\r\n    __Q.Class.ClassUtils = {\r\n        include: function (obj) {\r\n            for (var key in obj) {\r\n                this[key] = obj[key];\r\n            }\r\n        },\r\n        //\r\n        extend: function (extension) {\r\n            var hasOwnProperty = Object.hasOwnProperty;\r\n            var object = Object.create(this);\r\n\r\n            for (var property in extension) {\r\n                if (hasOwnProperty.call(extension, property) || typeof object[property] === \"undefined\") {\r\n                    object[property] = extension[property];\r\n                }\r\n            }\r\n            return object;\r\n        },\r\n        //this\r\n        proxy: function (fn) {\r\n            var thisobj = this;\r\n            return function () {\r\n                return fn.apply(thisobj, arguments);\r\n            };\r\n        },\r\n        proxyAll: function (fucs) {\r\n            for (var i = 0; i < fucs.length; i++) {\r\n                this[fucs[i]] = this.proxy(this[fucs[i]]);\r\n            }\r\n        }\r\n    };\r\n})(window, __Q);\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n//\r\nvar Events = {\r\n    trigger: function () {\r\n        //\r\n        var arg = Array.prototype.slice.apply(arguments, [0]);\r\n        //key\r\n        var type = arg.shift();\r\n        if (!this._eventHandler || !this._eventHandler[type]) {\r\n            return false;\r\n        }\r\n        this._eventHandler[type].apply(this, arg);\r\n        return true;\r\n    },\r\n    bind: function (type, callback) {\r\n        if (!this._keys || this._keys.indexOf(type) <= -1) {\r\n            throw  new Error('js/events :can not bind undeclared key ' + type);\r\n        }\r\n\r\n        if (!this._eventHandler) {\r\n            this._eventHandler = {};\r\n        }\r\n        this._eventHandler[type] = callback;\r\n        return true;\r\n    },\r\n    unBind: function (type) {\r\n        delete  this._eventHandler[type];\r\n    },\r\n    //keys\r\n    canBindKey: function (keys) {\r\n        this._keys = keys;\r\n    }\r\n};\n/**\r\n * Created by ylf on 2015/12/13.\r\n * API\r\n */\r\n\r\n__Q.Native.InteractAppApi = (function (__Q) {\r\n\r\n    var isApp = (typeof AndroidInterface !== \"undefined\");\r\n    var bridgeCallNative = (typeof Bridge !== 'undefined') && Bridge && Bridge.callNative;\r\n    var isAppNative = isApp && bridgeCallNative;\r\n    //\r\n    __Q.Native.isInteractApp = isAppNative;\r\n\r\n    var STUDENT = 'STUDENT';\r\n    var TEACHER = 'TEACHER';\r\n\r\n    var isStudent = false;\r\n    var isTeacher = false;\r\n    var isProjector = false;\r\n\r\n    var userInfo = null;\r\n\r\n    var callNative = function (method, params) {\r\n        return Bridge.callNative(\"com.nd.pad.icr.ui.IcrJsBridge\", method, params || {});\r\n    }\r\n\r\n    //app\r\n    var getCurrentUserInfo = function () {\r\n        if (isAppNative && !userInfo) {\r\n            var res = callNative(\"getCurrentUserInfo\", {});\r\n            if (res) {\r\n                userInfo = res;\r\n                isStudent = (res.userType === STUDENT);\r\n                isTeacher = (res.userType === TEACHER);\r\n                isProjector = res.isProjector;\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * native\r\n     * @param show true/false\r\n     */\r\n    var setNativeModuleVisibility = function (show) {\r\n        if (isAppNative) {\r\n            getCurrentUserInfo();\r\n            if (isTeacher && !isProjector) {\r\n                //native\r\n                var res = callNative(\"setNativeModuleVisibility\",\r\n                    {\r\n                        items: [\r\n                            {moduleId: 'toolBar', visible: show},//\r\n                            {moduleId: 'exit', visible: show},//\r\n                            {moduleId: 'exam', visible: show},//\r\n                            {moduleId: 'roster', visible: show}//\r\n                        ]\r\n                    }\r\n                );\r\n                __Q.logger.debug(res);\r\n            } else if (isStudent) {\r\n                //view\r\n                var res = callNative(\"setPresenterVisibility\", {instanceId: \"studentDraft\", visible: show});//\r\n\r\n                callNative(\"setStudentNativeModuleVisibility\",\r\n                    {\r\n                        items: [\r\n                            {moduleId: 'draftButton', visible: show},//\r\n                            {moduleId: 'handWriteToolbar', visible: show}//\r\n                            //{moduleId: 'compositionToolbar', visible: show}//\r\n                        ]\r\n                    }\r\n                );\r\n                __Q.logger.debug(res);\r\n            }\r\n        }\r\n    };\r\n\r\n    var setViewerModuleVisibility = function (show) {\r\n        if (isAppNative) {\r\n            getCurrentUserInfo();\r\n            if (isStudent) {\r\n                //view\r\n                var res = callNative(\"setPresenterVisibility\", {instanceId: \"studentDraft\", visible: show});//\r\n\r\n                callNative(\"setStudentNativeModuleVisibility\",\r\n                    {\r\n                        items: [\r\n                            {moduleId: 'draftButton', visible: show},//\r\n                            {moduleId: 'handWriteToolbar', visible: show}//\r\n                            //{moduleId: 'compositionToolbar', visible: show}//\r\n                        ]\r\n                    }\r\n                );\r\n                __Q.logger.debug(res);\r\n            }\r\n        }\r\n    };\r\n    return {\r\n        setNativeModuleVisibility: setNativeModuleVisibility,\r\n        setViewerModuleVisibility: setViewerModuleVisibility\r\n    };\r\n})(__Q);\n/**\r\n * Created by Administrator on 2016/1/19.\r\n */\r\n\r\n__Q.lang = (function () {\r\n\r\n    var jp = {\r\n        \"media_img_still_loading\": \"\",\r\n        \"media_img_tip\": \"\",\r\n        \"media_video_fullscreen\": \"\",\r\n        \"media_video_exit_fullscreen\": \"\",\r\n        \"media_video_not_support_fullscreen\": \"\"\r\n    };\r\n\r\n    var zh = {\r\n        \"media_img_still_loading\": \"\",\r\n        \"media_img_tip\": \"\",\r\n        \"media_video_fullscreen\": \"\",\r\n        \"media_video_exit_fullscreen\": \"\",\r\n        \"media_video_not_support_fullscreen\": \"\"\r\n    };\r\n\r\n    var _lang = {\r\n        'zh': zh,\r\n        'zh_CN': zh,\r\n        'en': {\r\n            \"media_img_still_loading\": \"Image loading...\",\r\n            \"media_img_tip\": \"Click to view images\",\r\n            \"media_video_fullscreen\": \"Full Screen\",\r\n            \"media_video_exit_fullscreen\": \"Exit\",\r\n            \"media_video_not_support_fullscreen\": \"Full-screen view is not supported\"\r\n        },\r\n        'ja': jp,\r\n        'ja_JP': jp\r\n    };\r\n\r\n    return {\r\n        getLangText: function (langType, key, val) {\r\n            var lang = _lang[langType] ? _lang[langType] : _lang['zh'];\r\n            var result = lang[key] || '';\r\n            return result;\r\n        }\r\n    }\r\n})();\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n\r\n__Q.Controller.MediaPlayer = (function (window, __Q) {\r\n    //\r\n    var MediaPlayer = __Q.Class.Create();\r\n    //\r\n    MediaPlayer.include(Events);\r\n\r\n    MediaPlayer.include({\r\n        //\r\n        create: function ($container, option, mediaType) {\r\n            var self = Object.create(this);\r\n            //\r\n            self.timeFormat = '0:00';\r\n            self.$container = $container;\r\n            self.mouseMoveCount = 0;\r\n            self.options = option;\r\n            //model\r\n            self._mediaModel = __Q.Model.MediaModel.create($container.find(mediaType));\r\n            //this\r\n            var funcs = ['playPause', '_progress', '_progressMouseup', '_volumeToggle', '_volumeProgress',\r\n                '_volumeProgressMouseup', '_volumeMutedToggle', '_volumeShow', '_volumeHide'];\r\n            self.proxyAll(funcs);\r\n            //playTriggerended\r\n            self.canBindKey(['playTrigger', 'ended', 'pause', 'unBind','volumeToggle']);\r\n            return self;\r\n        },\r\n        getMediaModel: function () {\r\n            return this._mediaModel;\r\n        },\r\n        __Q: function (selector) {\r\n            return this.$container.find(selector);\r\n        },\r\n        baseInit: function () {\r\n\r\n            var $media=this.getMediaModel().getQMedia();\r\n            //\r\n            this.getMediaModel().setPreLoad(this.options.mediaPreload ? 'auto' : 'none');\r\n            //\r\n            $media.removeAttr(\"controls\");\r\n\r\n            if(this._iePreloadNone()){\r\n                //iepreload=nonesrc\r\n\r\n                $media.attr('data-src', $media.attr('src'));\r\n                $media.removeAttr(\"src\");\r\n            }\r\n            this._findElement();\r\n            //media\r\n            this._eventModel = __Q.Model.MediaEvent.create(this._mediaModel, this.options);\r\n            //media+\r\n            this._mediaEventHandler();\r\n            this._toolBarEvent(true);\r\n            //iOS\r\n            if (__Q.support.isiOS) {\r\n                this._$volumeIconContainer.hide();\r\n                this.__Q('.qp-time-base').css('right', '12px');\r\n            }\r\n        },\r\n        _toolBarEvent: function (on) {\r\n            var _this = this;\r\n            on = on ? 'on' : 'off';\r\n            _this._$play[on]('click', _this.playPause);\r\n\r\n            //\r\n            _this._updateVolumeEntryView(_this.getMediaModel().getVolume(), false);\r\n\r\n            //\r\n            _this._$mediaBox[on]('click', function (e) {\r\n                __Q.event.stopPropagation(e);\r\n            });\r\n            _this._$progress[on]('touchstart mousedown', _this._progress);\r\n            _this._$progress[on]('touchend touchcancel mouseup', _this._progressMouseup);\r\n            _this._$volumeControl[on]('mousedown touchstart', _this._volumeProgress);\r\n            _this._$volumeControl[on]('mouseup touchend touchcancel', _this._volumeProgressMouseup);\r\n            _this._$volumeIconContainer[on]('mouseout mouseleave', _this._volumeHide);\r\n\r\n            if (__Q.support.touch) {\r\n                _this._$volumeIcon[on]('click', _this._volumeToggle);\r\n            } else {\r\n                //touchmouse\r\n                if ('ontouchend' in document) {\r\n                    _this._$volumeIcon[on]('click', _this._volumeToggle);\r\n                } else {\r\n                    _this._$volumeIcon[on]('click', _this._volumeMutedToggle);\r\n                }\r\n                _this._$volumeIconContainer[on]('mouseover', _this._volumeShow);\r\n            }\r\n        },\r\n        _iePreloadNone: function () {\r\n            //ie preload\r\n            if (!this.options.mediaPreload && __Q.browser.msie) {\r\n                return true;\r\n            }\r\n            return false;\r\n        },\r\n        iePreloadResetSrc:function(){\r\n            if (this._iePreloadNone() && !this._resetSrc) {\r\n                //\r\n                this._resetSrc = true;\r\n                var $video = this.getMediaModel().getQMedia();\r\n                $video.attr('src', $video.attr('data-src'));\r\n            }\r\n        },\r\n        _findElement: function () {\r\n            var that = this;\r\n            var elements = {\r\n                '_$loading': '[data-oper=\"loading\"]',//\r\n                '_$play': '.qp-media-toolbar [data-oper=\"play\"]',  //\r\n                '_$playInBody': '.qp-media-box>[data-oper=\"play\"]',  //\r\n                '_$endTime': '[data-oper=\"endTime\"]', //\r\n                '_$currentTime': '[data-oper=\"curentTime\"]',//\r\n                '_$downedBar': '[data-oper=\"downed-bar\"]',//\r\n                '_$playedBar': '[data-oper=\"played-bar\"]',  //\r\n                '_$progress': '[data-oper=\"progress\"]', //\r\n                '_$volumeIconContainer': '[data-oper=\"volume-icon-container\"]', //\r\n                '_$volumeIcon': '[data-oper=\"volume-icon\"]',//\r\n                '_$volumeControl': '[data-oper=\"volume-control\"]', //\r\n                '_$volumeBarContainer': '[data-oper=\"volume-bar-container\"]',//\r\n                '_$volumeBarR': '[data-oper=\"volume-bar-r\"]',//\r\n                '_$volumeBarS': '[data-oper=\"volume-bar-s\"]',//\r\n                '_$toolbar': '[data-oper=\"toolbar\"]',//\r\n                '_$mediaBox': '[data-oper=\"media-box\"]',//\r\n                '_$mediaDisable': '[data-oper=\"media-disable\"]'//\r\n            };\r\n\r\n            for (var sel in elements) {\r\n                that[sel] = that.__Q(elements[sel]);\r\n            }\r\n        },\r\n        clear: function () {\r\n            try {\r\n                this._mediaModel.load();\r\n                this._eventModel.mediaEventListener(false);\r\n                this.trigger('unBind');\r\n            } catch (ex) {\r\n                //console.log(ex);\r\n                __Q.logger.debug('clear',ex)\r\n            }\r\n        },\r\n        unBind: function () {\r\n            try {\r\n                this._eventModel.mediaEventListener(false);\r\n                this.trigger('unBind');\r\n            } catch (ex) {\r\n                //console.log(ex);\r\n                __Q.logger.debug('unbind',ex)\r\n            }\r\n        },\r\n        destroy: function () {\r\n            this.unBind();\r\n        },\r\n        reset: function () {\r\n            this.pause();\r\n        },\r\n        setLock: function (isLock) {\r\n            this.options.lock = isLock;\r\n            if (isLock) {\r\n                this._$mediaDisable.show();\r\n            } else {\r\n                this._$mediaDisable.hide();\r\n            }\r\n        },\r\n        isLock:function(){\r\n            return this.options.lock;\r\n        },\r\n        changeVolume: function (vol, display) {\r\n            this._mediaModel.setVolume(vol);\r\n            if (display) {\r\n                this._$volumeControl.show();\r\n                this.trigger('volumeToggle',true);\r\n            } else {\r\n                this._$volumeControl.hide();\r\n                this.trigger('volumeToggle',false);\r\n            }\r\n        },\r\n        hideVolumeControl: function () {\r\n            if (this._$volumeControl.isShow()) {\r\n                this._$volumeControl.hide();\r\n                this.trigger('volumeToggle',false);\r\n                this._eventModel.volumeChangeEvent(false);\r\n            }\r\n        },\r\n        isPlaying: function () {\r\n            return this._mediaModel.isPlaying();\r\n        },\r\n        playPause: function (e) {\r\n            this.trigger('playTrigger');\r\n            this.iePreloadResetSrc();\r\n            var mediaObj = this._mediaModel.getMedia();\r\n            if (mediaObj.paused) {\r\n                this._$play.addClass(\"qp-btn-stop\");\r\n                this._$playInBody.addClass(\"qp-btn-stop\");\r\n                mediaObj.play();\r\n            } else {\r\n                this._$play.removeClass(\"qp-btn-stop\");\r\n                this._$playInBody.removeClass(\"qp-btn-stop\");\r\n                mediaObj.pause();\r\n            }\r\n        },\r\n        pause: function () {\r\n            var mediaObj = this._mediaModel.getMedia();\r\n            if (this.options.renderUI) {\r\n                this._$play.removeClass(\"qp-btn-stop\");\r\n                this._$playInBody.removeClass(\"qp-btn-stop\");\r\n            }\r\n            if (mediaObj && !mediaObj.paused) {\r\n                mediaObj.pause();\r\n            }\r\n        },\r\n        play: function (outTrigger) {\r\n            this.trigger('playTrigger',outTrigger);\r\n            this.iePreloadResetSrc();\r\n            var mediaObj = this._mediaModel.getMedia();\r\n            if (this.options.renderUI) {\r\n                this._$play.addClass(\"qp-btn-stop\");\r\n                this._$playInBody.addClass(\"qp-btn-stop\");\r\n            }\r\n            if (mediaObj && mediaObj.paused) {\r\n                mediaObj.play();\r\n            }\r\n        },\r\n        _mediaEventHandler: function () {\r\n            var _this = this;\r\n            if (!_this.options.renderUI) {\r\n                return;\r\n            }\r\n            var mediaEvent = {\r\n                playing: function () {\r\n                    _this.trigger('playTrigger');\r\n                    _this.iePreloadResetSrc();\r\n                    _this._$play.addClass(\"qp-btn-stop\");\r\n                    _this._$playInBody.addClass(\"qp-btn-stop\");\r\n                },\r\n                pause: function () {\r\n                    _this.trigger('pause');\r\n                    _this._$play.removeClass('qp-btn-stop');\r\n                    _this._$playInBody.removeClass(\"qp-btn-stop\");\r\n\r\n                },\r\n                ended: function () {\r\n                    _this.trigger('ended');\r\n                    _this._$play.removeClass('qp-btn-stop');\r\n                    _this._$playInBody.removeClass(\"qp-btn-stop\");\r\n                    _this._$loading.hide();\r\n                    _this._$currentTime.text(_this.timeFormat);\r\n                    _this._$playedBar.css('width', '0%');\r\n                    _this._$downedBar.css('width', \"0%\");\r\n                },\r\n                timeupdate: function () {\r\n                    if (_this._mediaModel.getReadyState() < 3) {\r\n                        //_this._$loading.show();\r\n                        return false;\r\n                    }\r\n                    _this._$loading.hide();\r\n                    _this._updateEndTime();\r\n                    _this._updateVideoData();\r\n                    _this._updateCurrentTime();\r\n                },\r\n                volumechange: function () {\r\n                    _this._updateVolumeEntryView(_this._mediaModel.getVolume(), true);\r\n                },\r\n                progress: function () {\r\n                    var currentTime = _this._mediaModel.getCurrentTime();\r\n                    var duration = _this._mediaModel.getDuration();\r\n                    var buffered = _this._mediaModel.getBuffered();\r\n                    var minEnd = 0;\r\n                    for (var i = 0; i < buffered.length; i++) {\r\n                        var end = buffered.end(i);\r\n                        if (end > currentTime) {\r\n                            if (!minEnd) {\r\n                                minEnd = end;\r\n                            } else {\r\n                                if (minEnd > end) {\r\n                                    minEnd = end;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    if (!minEnd) {\r\n                        minEnd = currentTime;\r\n                    }\r\n                    var percent = (minEnd / duration) * 100;\r\n                    if (percent > 100) {\r\n                        percent = 0;\r\n                    }\r\n\r\n                    _this._$downedBar.css('width', percent + \"%\");\r\n                    _this._updateEndTime();\r\n                },\r\n                waiting: function () {\r\n                    _this._$loading.show();\r\n                },\r\n                error: function (code) {\r\n                    //console.log(\"media error code \" + code);\r\n                },\r\n                loadedmetadata: function () {\r\n                    _this._updateEndTime();\r\n                },\r\n                play: function () {\r\n                    if (_this._mediaModel.getCurrentTime() <= 0) {\r\n                        _this._$loading.show();\r\n                    }\r\n                },\r\n                durationchange: function () {\r\n                    var duration = _this._mediaModel.getDuration();\r\n                    if (duration < 1 && duration > 0) {\r\n                        _this.timeFormat = '0:00.00';\r\n                        _this._$currentTime.text(_this.timeFormat);\r\n                    }\r\n                    _this._updateEndTime();\r\n                }\r\n            };\r\n            for (var key in mediaEvent) {\r\n                this._eventModel.bind(key, mediaEvent[key]);\r\n            }\r\n        },\r\n        _updateEndTime: function () {\r\n            var duration = this._mediaModel.getDuration();\r\n            if (duration > 0 && (!this.durationInit || this.durationInitDuration !== duration)) {\r\n                if (duration >= 60 * 60 || duration < 1) {\r\n                    this._$toolbar.addClass('qp-progress-long');\r\n                } else {\r\n                    this._$toolbar.removeClass('qp-progress-long');\r\n                }\r\n                this._$endTime.text(this._formatTime(duration));\r\n                this.durationInit = true;\r\n                //pad100s\r\n                this.durationInitDuration = duration;\r\n            }\r\n        },\r\n        _progress: function (e) {\r\n            var progWrapper = this._$progress;\r\n            var media = this._mediaModel.getMedia();\r\n            if (progWrapper.length > 0) {\r\n                var _this = this;\r\n                if (e && _this._coordinate(e)) {\r\n                    _this._seekTo(_this._coordinate(e).pageX, progWrapper, media, true);\r\n                }\r\n                var handler = function (e) {\r\n                    if (e) {\r\n                        __Q.event.preventDefault(e);\r\n                    }\r\n                    //seekTo\r\n                    _this._seekTo(_this._coordinate(e).pageX, progWrapper, media);\r\n                };\r\n                progWrapper.on('mousemove  touchmove', '', handler);\r\n\r\n                var cancelHandler = function (e) {\r\n                    __Q.event.preventDefault(e);\r\n                    __Q.event.stopPropagation(e);\r\n                    progWrapper.off('mousemove touchmove', '', handler);\r\n                    progWrapper.off('mouseup mouseleave touchend touchcancel', '', cancelHandler);\r\n                };\r\n\r\n                progWrapper.on('mouseup mouseleave touchend touchcancel', '', cancelHandler);\r\n            }\r\n        },\r\n        _progressMouseup: function (e) {\r\n            var progWrapper = this._$progress;\r\n            var media = this._mediaModel.getMedia();\r\n            var _this = this;\r\n            _this._seekTo(_this._coordinate(e).pageX, progWrapper, media, true);\r\n        },\r\n        _updateVolumeEntryView: function (volume, on) {\r\n            var _this = this;\r\n            var muted = this._mediaModel.getMuted();\r\n            _this._$volumeBarR.css(\"bottom\", parseInt(muted ? 0 : (volume * 100)) + \"%\");\r\n            _this._$volumeBarS.css(\"height\", (parseInt(muted ? 0 : (volume * 100)) === 0 ? 0.5 : parseInt(muted ? 0 : (volume * 100))) + \"%\");\r\n\r\n            if (volume === 0 || muted) {\r\n                _this._$volumeIcon.addClass('qp-btn-volume-no');\r\n            } else {\r\n                _this._$volumeIcon.removeClass('qp-btn-volume-no');\r\n            }\r\n        },\r\n        _volumeToggle: function (e) {\r\n            var _this=this;\r\n            this._volumeClick = true;\r\n            //\r\n            setTimeout(function () {\r\n                _this._volumeClick = false;\r\n            }, 100);\r\n            if (e.srcElement) {\r\n                var $volume = __Q(e.srcElement).closest(\".qp_video-progress-box\");\r\n                if ($volume && $volume.get(0) === this._$volumeControl.get(0)) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            this._$volumeControl.toggle();\r\n            var isShow=this._$volumeControl.isShow();\r\n            this.trigger('volumeToggle',isShow);\r\n            this._eventModel.volumeChangeEvent(isShow);\r\n        },\r\n        _volumeMutedToggle: function (e) {\r\n            this._mediaModel.setMuted(!this._mediaModel.getMuted());\r\n            this._updateVolumeEntryView(this._mediaModel.getVolume());\r\n        },\r\n        _volumeShow: function (e) {\r\n            if (__Q.event.checkHover(e, this._$volumeIconContainer.get(0))) {\r\n                //\r\n                if (e && e.type === 'mouseover' && e.sourceCapabilities && e.sourceCapabilities.firesTouchEvents) {\r\n                    return;\r\n                }\r\n                this._$volumeControl.show();\r\n\r\n                this.trigger('volumeToggle',true);\r\n                this._eventModel.volumeChangeEvent(true);\r\n            }\r\n        },\r\n        _volumeHide: function (e) {\r\n            if (__Q.event.checkHover(e, this._$volumeIconContainer.get(0))) {\r\n                this._$volumeControl.hide();\r\n                this.trigger('volumeToggle',false);\r\n                this._eventModel.volumeChangeEvent(false);\r\n            }\r\n        },\r\n        _volumeProgress: function (e) {\r\n\r\n            if(this._volumeClick){\r\n                return;\r\n            }\r\n\r\n            var progWrapper = this._$volumeControl;\r\n            var media = this._mediaModel.getMedia();\r\n            if (progWrapper.length > 0) {\r\n                var _this = this;\r\n                _this.volumeUp = false;\r\n                this._mediaModel.setMuted(false);\r\n\r\n                if (_this._coordinate(e)) {\r\n                    _this._volumeSeekTo(_this._coordinate(e).pageY, media, true);\r\n                }\r\n\r\n                var handler = function (e) {\r\n                    __Q.event.preventDefault(e);\r\n                    if (_this._coordinate(e)) {\r\n                        _this._volumeSeekTo(_this._coordinate(e).pageY, media);\r\n                    }\r\n                };\r\n\r\n                progWrapper.on('mousemove  touchmove', '', handler);\r\n\r\n                var cancelHandler = function (e) {\r\n                    __Q.event.preventDefault(e);\r\n                    _this.volumeUp = true;\r\n                    progWrapper.off('mousemove touchmove', '', handler);\r\n                    progWrapper.off('mouseup mouseleave touchend touchcancel', '', cancelHandler);\r\n                };\r\n\r\n                progWrapper.on('mouseup mouseleave touchend touchcancel', '', cancelHandler);\r\n\r\n            }\r\n        },\r\n        _volumeProgressMouseup: function (e) {\r\n            if(this._volumeClick){\r\n                return;\r\n            }\r\n            var media = this._mediaModel.getMedia();\r\n            this.volumeUp = true;\r\n            this._eventModel.volumeChangeEvent(true, true);\r\n            var _this = this;\r\n            if (_this._coordinate(e)) {\r\n                _this._volumeSeekTo(_this._coordinate(e).pageY, media);\r\n            }\r\n        },\r\n        _updateCurrentTime: function () {\r\n            var currentTime = this._mediaModel.getCurrentTime();\r\n            this._$currentTime.html(this._formatTime(currentTime));\r\n        },\r\n        _updateVideoData: function () {\r\n            // \r\n            var current = this._mediaModel.getCurrentTime();\r\n            var duration = this._mediaModel.getDuration();\r\n            var scrubbing = this._$playedBar;\r\n\r\n            if (current === 0.01) {//bug\r\n                scrubbing.css('width', '0%');\r\n            } else {\r\n                var scrubbingWidth = current * 100 / duration;\r\n                scrubbing.css('width', scrubbingWidth + '%');\r\n            }\r\n        },\r\n        _seekTo: function (xPos, progWrapper, media, immediately) {\r\n            var duration = this._mediaModel.getDuration();\r\n            if (duration > 0) {\r\n                var progressBar = this._$playedBar;\r\n                var progWidth = Math.max(0, Math.min(1, (xPos - ( progWrapper.offset().left / this.getScale())) / progWrapper.width()));\r\n\r\n                var seekTo = progWidth * duration;\r\n                //media.currentTime = seekTo;mediatimeupdate\r\n                //move10movemedia.currentTime = seekTo\r\n                this.mouseMoveCount++;\r\n                if (this.mouseMoveCount % 10 === 0 || immediately) {\r\n                    if (seekTo >= 0) {\r\n                        this._mediaModel.setCurrentTime(seekTo);\r\n                    }\r\n                }\r\n\r\n                var width = Math.round(progWidth * (progWrapper.width()));\r\n                progressBar.css('width', width + 'px');\r\n                this._updateCurrentTime();\r\n            }\r\n        },\r\n        _volumeSeekTo: function (yPos) {\r\n            var progressBar = this._$volumeBarContainer;\r\n            var progHeight = Math.max(0, Math.min(1, (yPos - (progressBar.offset().top / this.getScale())) / progressBar.height()));\r\n            this._mediaModel.setVolume(1 - progHeight);\r\n        },\r\n        _coordinate: function (event) {\r\n            var point = {};\r\n            var scale = this.getScale();\r\n            switch (event.type) {\r\n                case 'touchstart':\r\n                case 'touchmove':\r\n                case 'touchend':\r\n                case 'touchcancel':\r\n                    point.pageX = (event.changedTouches[0].pageX || event.touches[0].pageX) / scale;\r\n                    point.pageY = (event.changedTouches[0].pageY || event.touches[0].pageY) / scale;\r\n                    return point;\r\n                default:\r\n                    point.pageX = event.pageX / scale;\r\n                    point.pageY = event.pageY / scale;\r\n                    return point;\r\n            }\r\n\r\n        },\r\n        _formatTime: function (secs) {\r\n            var hours = Math.floor(secs / (60 * 60));\r\n            var minutes = Math.floor(secs / 60) % 60;\r\n            var seconds = Math.floor(secs - (minutes * 60) - (hours * 60 * 60));\r\n\r\n            if (seconds === 60) {\r\n                seconds = 0;\r\n                minutes = minutes + 1;\r\n            }\r\n\r\n            if (seconds < 10) {\r\n                seconds = '0' + seconds;\r\n            }\r\n\r\n\r\n            var duration = this._mediaModel.getDuration();\r\n            if (duration > 0 && duration < 1) {\r\n                return minutes + ':' + seconds + '.' + secs.toFixed(2).split('.')[1];\r\n            } else {\r\n                if (hours > 0) {\r\n                    return hours + ':' + minutes + ':' + seconds;\r\n                } else {\r\n                    return minutes + ':' + seconds;\r\n                }\r\n            }\r\n        },\r\n        getScale: function () {\r\n            //This works because getBoundingClientRect returns the actual dimension while offsetWidth/Height is the unscaled size.\r\n            this.scaleX = (this.$container.get(0).getBoundingClientRect().width / this.$container.get(0).offsetWidth) || 1;\r\n            return this.scaleX;\r\n        },\r\n        mediaPlay: function (o) {\r\n            this.play();\r\n        },\r\n        mediaPause: function (o) {\r\n            this.pause();\r\n        },\r\n        mediaSkip: function (seek) {\r\n            this._mediaModel.setCurrentTime(seek === 0 ? 0.01 : seek);\r\n        },\r\n        mediaVolumeChange: function (volume, display) {\r\n            this.changeVolume(volume, display);\r\n        }\r\n    });\r\n\r\n    return MediaPlayer;\r\n})(window, __Q);\r\n\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n\r\n(function (window, __Q) {\r\n    var DEFAULTS = {\r\n        onEnd: false,\r\n        onPause: false,\r\n        lang: 'zh',\r\n        onPlay: false,\r\n        onSeek: false,\r\n        onVolumeChange: false,\r\n        onTimeUpdate: false,\r\n        onlyRender: false,\r\n        renderUI: true,\r\n        audio: {\r\n            width: 0,\r\n            height: 0\r\n        }\r\n    };\r\n\r\n    var AudioPlayer = __Q.Controller.MediaPlayer.extend({\r\n        create: function ($container, options) {\r\n            var that = __Q.Controller.MediaPlayer.create.apply(this, [$container, __Q.extend({}, DEFAULTS, options), 'audio']);\r\n            that.options = __Q.extend({}, DEFAULTS, options);\r\n\r\n            if (that.options.renderUI) {\r\n                var funcs = ['_playTriggerHandler', '_endedHandler'];\r\n                that.proxyAll(funcs);\r\n\r\n                that._init();\r\n                if (that.options.onlyRender === false) {\r\n                    that.start();\r\n                }\r\n                that.bind('playTrigger', that._playTriggerHandler);\r\n                that.bind('ended', that._endedHandler);\r\n            }\r\n            return that;\r\n        },\r\n        _resizeMap: {\r\n            'qp-media-box-mini': function (width, height) {\r\n                return width <= 200 || height <= 60;\r\n            },\r\n            'qp-media-box-min-height': function (width, height) {\r\n                return height <= 180 && height > 125;\r\n            },\r\n            'qp-media-box-min-height-audio-s': function (width, height) {\r\n                return height <= 125 && height > 60;\r\n            },\r\n            'qp-media-box-max-hd': function (width, height) {\r\n                return width > 360 && height > 270;\r\n            }\r\n        },\r\n        _playTriggerHandler: function () {\r\n        },\r\n        _endedHandler: function () {\r\n            //\r\n        },\r\n        start: function () {\r\n            var _this = this;\r\n            if (_this.started) {\r\n                return;\r\n            }\r\n            //\r\n            _this.started = true;\r\n            //\r\n            this.baseInit();\r\n            //video\r\n            this._controlEvent(true);\r\n        },\r\n        _init: function () {\r\n            var $audio = this.getMediaModel().getQMedia();\r\n\r\n            try {\r\n                $audio.before(__Q.View.audioHtml);\r\n                this.__Q('[data-oper=\"loading\"] ').before($audio.get(0));\r\n                this._$qpVideoWrap = this.__Q('.qp-video-videowrap');\r\n                this._$qpMediaIcon = this.__Q('.qp-media-icons-right');\r\n                if (this.options.autoAdaptSize) {\r\n                    var width = this.options.audio.width;\r\n                    var height = this.options.audio.height;\r\n                    if (width && height) {\r\n                        this.resizeMedia(width, height);\r\n                    }\r\n                }\r\n            } catch (e) {\r\n                throw new Error('createHtml unknow error:' + e.message);\r\n            }\r\n        },\r\n        resizeMedia: function (width, height) {\r\n            if (!this._$mediaBox) {\r\n                this._$mediaBox = this.__Q('.qp-media-box');\r\n            }\r\n\r\n            var reWidth = width, reHeight = height;\r\n            var mini = false;\r\n            for (var key in this._resizeMap) {\r\n                if (this._resizeMap[key](width, height)) {\r\n                    //mini\r\n                    if (mini) {\r\n                        this._$mediaBox.removeClass(key);\r\n                    } else {\r\n                        this._$mediaBox.addClass(key);\r\n                    }\r\n                    if (!mini) {\r\n                        if (key === 'qp-media-box-mini') {\r\n                            this._$mediaBox.addClass(key);\r\n                            mini = true;\r\n                            reWidth = 0;\r\n                            reHeight = 0;\r\n                        }\r\n                    }\r\n                    if (key === 'qp-media-box-min-height-audio-s') {\r\n                        reHeight = 40;\r\n                    }\r\n                } else {\r\n                    this._$mediaBox.removeClass(key);\r\n                }\r\n            }\r\n            this._$mediaBox.css('width', reWidth + 'px');\r\n            this._$mediaBox.css('height', reHeight + 'px');\r\n        },\r\n        _controlEvent: function (on) {\r\n            var _this = this;\r\n            on = on ? 'on' : 'off';\r\n            _this._$playInBody[on]('click', _this.playPause);\r\n        }\r\n    });\r\n\r\n\r\n    function AudioPlayerPlugin(option) {\r\n        option = option || {};\r\n        return this.each(function () {\r\n            var $this = __Q(this);\r\n\r\n            var data = $this.data('my.mediaplayer');\r\n            var options = __Q.extend({}, $this.data() || {}, typeof option === 'object' && option);\r\n            //\r\n            if (!data) {\r\n                data = AudioPlayer.create($this, options);\r\n                $this.data('my.mediaplayer', data);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    __Q.fn('audioplayer', AudioPlayerPlugin);\r\n\r\n})(window, __Q);\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n\r\n(function (window, __Q) {\r\n\r\n    var DEFAULT = {\r\n        renderUI: true,\r\n        lang: 'zh',\r\n        img: {\r\n            renderImmediately: false,//\r\n            src: '',\r\n            width: 0,\r\n            height: 0\r\n        },\r\n        onlyRender: false\r\n    };\r\n\r\n    var ImagePlayer = __Q.Class.Create();\r\n\r\n    ImagePlayer.include({\r\n        create: function ($container, options) {\r\n            var that = Object.create(this);\r\n            that.$container = $container;\r\n            var imgData = {\r\n                src: options.img.src ? options.img.src : $container.find('img').attr('src'),\r\n                width: 0,\r\n                height: 0\r\n            };\r\n            that.imgData = imgData;\r\n            that.options = __Q.extend({}, DEFAULT, options);\r\n            //\r\n            if (that.options.autoAdaptSize && that.options.img.width && that.options.img.height) {\r\n                if (that.options.img.width < that._minRenderWidth) {\r\n                    that.options.img.width = that._minRenderWidth;\r\n                }\r\n                if (that.options.img.height < that._minRenderHeight) {\r\n                    that.options.img.height = that._minRenderHeight;\r\n                }\r\n            }\r\n            that.viewer = null;//\r\n            var funcs = ['_createViewer'];\r\n            that.proxyAll(funcs);\r\n            that._init();\r\n            return that;\r\n        },\r\n        __Q: function (selector) {\r\n            return this.$container.find(selector);\r\n        },\r\n        _defaultRenderHeight: 180,\r\n        _defaultRenderWidth: 260,\r\n        _minRenderHeight: 100,\r\n        _minRenderWidth: 130,\r\n        _loadImg: function (callback) {\r\n            var _this = this;\r\n            var img = new Image();\r\n            img.src = _this.imgData.src;\r\n            if (img.complete) {\r\n                _this.imgData.width = img.width;\r\n                _this.imgData.height = img.height;\r\n                if (callback) {\r\n                    callback()\r\n                }\r\n            } else {\r\n                img.onload = function () {\r\n                    _this.imgData.width = img.width;\r\n                    _this.imgData.height = img.height;\r\n                    if (callback) {\r\n                        callback()\r\n                    }\r\n                    img.onload = null;\r\n                };\r\n            }\r\n\r\n        },\r\n        _init: function () {\r\n            var _this = this;\r\n            if (!_this.options.renderUI) {\r\n                _this._loadImg();\r\n                var $image = this.__Q('img');\r\n                //$image.before(__Q.View.viewerHtml);\r\n                $image.on('qpTap', function (e) {\r\n                    if (!_this.imgData.width) {\r\n                        return;\r\n                    }\r\n                    _this._createViewer();\r\n                });\r\n            } else if (_this.options.img.renderImmediately) {\r\n                _this._createHtml();\r\n                _this._loadImg();\r\n                _this._controlEvent();\r\n            } else {\r\n                _this._loadImg(function () {\r\n                    var render = false;\r\n                    //||UI\r\n                    if ((_this.options.autoAdaptSize && _this.options.img.width && _this.options.img.height\r\n                        && (_this.imgData.width > _this.options.img.width || _this.imgData.height > _this.options.img.height))) {\r\n                        render = true;\r\n                    } else if (_this.imgData.width > _this._defaultRenderWidth || _this.imgData.height > _this._defaultRenderHeight) {\r\n                        render = true;\r\n                    }\r\n                    if (render) {\r\n                        _this._createHtml();\r\n                        _this._controlEvent();\r\n                    }\r\n\r\n                });\r\n            }\r\n        },\r\n        start: function () {\r\n            this.options.onlyRender = false;\r\n        },\r\n        _createHtml: function () {\r\n            var _this = this;\r\n            var $image = this.__Q('img');\r\n            //\r\n            $image.removeAttr(['width', 'height', 'style']);\r\n            try {\r\n                $image.before(__Q.View.imageHtml);\r\n                //$image.before(__Q.View.viewerHtml);\r\n\r\n                this.__Q('.qp-media-pics-bg').get(0).appendChild($image.get(0));\r\n                this.__Q('.qp-media-toolbar').text(__Q.lang.getLangText(this.options.lang, 'media_img_tip'));\r\n                this.__Q('.qp-meida-tip-message').text(__Q.lang.getLangText(this.options.lang, 'media_img_still_loading'));\r\n                //\r\n                if (this.options.autoAdaptSize && this.options.img.width && this.options.img.height) {\r\n                    this.resizeMedia(this.options.img.width, this.options.img.height);\r\n                }\r\n            } catch (e) {\r\n                throw new Error('createHtml unknow error:' + e.message);\r\n            }\r\n        },\r\n        _controlEvent: function () {\r\n            var _this = this;\r\n            this._$tipMessage = this.__Q('.qp-meida-tip-message');\r\n            _this.__Q('.qp-media-box').on('click', function (e) {\r\n                if (e) {\r\n                    __Q.event.stopPropagation(e);\r\n                }\r\n                if (_this.options.onlyRender) {\r\n                    return;\r\n                }\r\n                if (_this.options.lock) {\r\n                    return;\r\n                }\r\n                if (!_this.imgData.width) {\r\n                    clearTimeout(_this._msgTimeoutId);\r\n                    _this._$tipMessage.show();\r\n                    _this._msgTimeoutId = setTimeout(function () {\r\n                        _this._$tipMessage.hide();\r\n                    }, 3000);\r\n                    return;\r\n                }\r\n                _this._createViewer()\r\n            });\r\n        },\r\n        resizeMedia: function (width, height) {\r\n\r\n            if (width < this._minRenderWidth) {\r\n                width = this._minRenderWidth;\r\n            }\r\n            if (height < this._minRenderHeight) {\r\n                height = this._minRenderHeight;\r\n            }\r\n\r\n            if (!this._$mediaBox) {\r\n                this._$mediaBox = this.__Q('.qp-media-box');\r\n            }\r\n            if (!this._$picsBg) {\r\n                this._$picsBg = this.__Q('.qp-media-pics-bg');\r\n            }\r\n            if (!this._$image) {\r\n                this._$image = this.__Q('.qp-media-pics-bg img');\r\n            }\r\n            this._$mediaBox.css('width', width + 'px');\r\n            this._$mediaBox.css('height', height + 'px');\r\n            this._$picsBg.css('width', width + 'px');\r\n            this._$picsBg.css('height', height + 'px');\r\n            this._$image.css('maxWidth', width + 'px');\r\n            this._$image.css('maxHeight', height + 'px');\r\n        },\r\n        _createViewer: function () {\r\n            var _this = this;\r\n            if (!_this.viewer) {\r\n                var fullChange = _this.options.onFullScreenChange || _this.options.eventHandler.fullScreenChange;\r\n                _this.viewer = __Q.Controller.ImageViewer.create(_this.$container, _this.imgData.width, _this.imgData.height, _this.imgData.src, fullChange);\r\n            }\r\n            _this.viewer.show();\r\n        },\r\n        destroy: function () {\r\n            if (this.viewer) {\r\n                this.viewer.hide();\r\n            }\r\n        },\r\n        reset: function () {\r\n            if (this.viewer) {\r\n                this.viewer.hide();\r\n            }\r\n        },\r\n        setLock: function (lock) {\r\n            this.options.lock = lock;\r\n            //if (lock) {\r\n            //    this.__Q('.qp-media-disable').show();\r\n            //} else {\r\n            //    this.__Q('.qp-media-disable').hide();\r\n            //}\r\n        }\r\n    });\r\n\r\n\r\n    function ImagePlayerPlugin(option) {\r\n        option = option || {};\r\n        return this.each(function () {\r\n            var $this = __Q(this);\r\n\r\n            var data = $this.data('my.mediaplayer');\r\n            var options = __Q.extend({}, $this.data() || {}, typeof option === 'object' && option);\r\n            //\r\n            if (!data) {\r\n                data = ImagePlayer.create($this, options);\r\n                $this.data('my.mediaplayer', data);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    __Q.fn('imgplayer', ImagePlayerPlugin);\r\n\r\n})(window, __Q);\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n(function (window, __Q) {\r\n\r\n    var DEFAULTS = {\r\n        onEnd: false,\r\n        onPause: false,\r\n        onPlay: false,\r\n        onSeek: false,\r\n        onVolumeChange: false,\r\n        onTimeUpdate: false,\r\n        onlyRender: false,\r\n        autoAdaptSize: false,//\r\n        renderUI: true,\r\n        lang: 'zh',\r\n        video: {\r\n            render: true,\r\n            width: 0,\r\n            height: 0,\r\n            supportFullscreen: true,//\r\n            showPlayBtnInVideo: false,//\r\n            showFullscreenBtn: false//\r\n        }\r\n    };\r\n\r\n    var VideoPlayer = __Q.Controller.MediaPlayer.extend({\r\n        create: function ($container, options) {\r\n            var that = __Q.Controller.MediaPlayer.create.apply(this, [$container, __Q.extend({}, DEFAULTS, options), 'video']);\r\n            that.options = __Q.extend({}, DEFAULTS, options);\r\n\r\n            if (that.options.renderUI) {\r\n                var funcs = ['_mediaBoxToggle', '_volumeToggleEventHandler', '_pauseEventHandler', '_unBind', '_toFullScreen', '_touchControlToggle', '_playTriggerHandler', '_endedHandler', '_fullScreenChangeHandler', '_playInVideoHanlder', '_fullScreenClickHandler', '_pcControlToggle'];\r\n                that.proxyAll(funcs);\r\n\r\n                that._init();\r\n                if (that.options.onlyRender === false) {\r\n                    that.start();\r\n                }\r\n                that.bind('playTrigger', that._playTriggerHandler);\r\n                that.bind('ended', that._endedHandler);\r\n                that.bind('unBind', that._unBind);\r\n                that.bind('pause', that._pauseEventHandler);\r\n                that.bind('volumeToggle', that._volumeToggleEventHandler);\r\n            }\r\n            return that;\r\n        },\r\n        _pauseEventHandler: function () {\r\n            clearTimeout(this._timeOutId);\r\n            this._$mediaBox.removeClass('qp-media-playing');\r\n            if (!this._supportFullScreen()) {\r\n                this._$playInBody.hide();\r\n                this._$qpIconsVideo.hide();\r\n            }\r\n            this.$container.removeClass('qp-media-auto-hide');//\r\n        },\r\n        _autoHide: function (immediatily) {\r\n            var that = this;\r\n            clearTimeout(that._timeOutId);\r\n            that._timeOutId = setTimeout(function () {\r\n                if (that.isPlaying() || immediatily) {\r\n                    that.$container.addClass('qp-media-auto-hide');\r\n                }\r\n            }, __Q.support.touch ? 5500 : 2000);\r\n        },\r\n        _volumeToggleEventHandler: function (show) {\r\n            if (show) {\r\n                this._$goFullscreen.addClass('qp-bar-cover-index');\r\n            } else {\r\n                this._$goFullscreen.removeClass('qp-bar-cover-index');\r\n            }\r\n        },\r\n        _unBind: function () {\r\n            this._exitFull();\r\n            this.pause();\r\n            this._fullScreenCallBack(false);\r\n        },\r\n        _resizeMap: {\r\n            'qp-media-box-min-width': function (width, height, surportFull) {\r\n                return surportFull ? width <= 160 && width > 120 : false;\r\n            },\r\n            'qp-media-box-min-width-s': function (width, height, surportFull) {\r\n                return surportFull ? width <= 120 : false;\r\n            },\r\n            'qp-media-box-min-height': function (width, height, surportFull) {\r\n                return surportFull ? height <= 180 && height > 125 : false;\r\n            },\r\n            'qp-media-box-min-height-s': function (width, height, surportFull) {\r\n                return surportFull ? height <= 125 : false;\r\n            },\r\n            'qp-media-box-max-hd': function (width, height, surportFull) {\r\n                return width > 360 && height > 270;\r\n            },\r\n            'qp-media-box-not-surpot-full-min': function (width, height, surportFull) {\r\n                if (!surportFull && width < 240 && width >= 200) {\r\n                    return true;\r\n                }\r\n            },\r\n            'qp-media-box-not-surpot-full-min-s': function (width, height, surportFull) {\r\n                if (!surportFull && width < 200) {\r\n                    return true;\r\n                }\r\n            },\r\n            'qp-media-box-max-fullscreen': function () {\r\n                return false;\r\n            }\r\n        },\r\n        _playTriggerHandler: function () {\r\n            //\r\n            this._autoHide();\r\n            this._$mediaBox.addClass('qp-media-playing');\r\n            if (!this._supportFullScreen()) {\r\n                this._$playInBody.hide();\r\n                this._$qpIconsVideo.hide();\r\n            } else {\r\n\r\n            }\r\n        },\r\n        _endedHandler: function () {\r\n            //\r\n            clearTimeout(this._timeOutId);\r\n            this._$mediaBox.removeClass('qp-media-playing');\r\n            this.$container.removeClass('qp-media-auto-hide');\r\n            if (!this._supportFullScreen()) {\r\n                this._$playInBody.hide();\r\n                this._$qpIconsVideo.hide();\r\n                if (this.options.video.showPlayBtnInVideo) {\r\n                    this._$playInBody.show();\r\n                }\r\n                if (!this.options.video.showFullscreenBtn) {\r\n                    this._$qpIconsVideo.show();\r\n                }\r\n            }\r\n        },\r\n        _init: function () {\r\n            this._fullScreen = false;\r\n            this._createVideo();\r\n            this._$goFullscreen = this.__Q('[data-oper=\"go-fullscreen\"]');\r\n            this._$exitFullscreen = this.__Q('[data-oper=\"exit-fullscreen\"]');\r\n            this._$fullScreenMessage = this.__Q('.qp-meida-tip-message');\r\n            this._$qpIconsVideo = this.__Q('.qp-icons-video');\r\n            this._$qpVideoWrap = this.__Q('.qp-video-videowrap');\r\n            this._$toolbarCover = this.__Q('.qp-media-toolbar-cover');\r\n            if (!this._supportFullScreen() && !this.options.video.showPlayBtnInVideo) {\r\n                this.__Q('.qp-media-box>[data-oper=\"play\"]').hide();\r\n            }\r\n            if (__Q.browser.crosswalk) {\r\n                //crosswalk \r\n                this._$qpVideoWrap.css('zIndex', '-1');\r\n            }\r\n        },\r\n        start: function () {\r\n            var _this = this;\r\n            if (_this.started) {\r\n                return;\r\n            }\r\n            //\r\n            _this.started = true;\r\n            //\r\n            this.baseInit();\r\n            //video\r\n            this._controlEvent(true);\r\n            //\r\n            this._fullScreenCallBack(true);\r\n        },\r\n        _createVideo: function () {\r\n            var $video = this.getMediaModel().getQMedia();\r\n\r\n            try {\r\n\r\n                $video.before(__Q.View.videoHtml);\r\n\r\n                this.__Q('.qp-btn-exit-fullscreen').text(__Q.lang.getLangText(this.options.lang, 'media_video_exit_fullscreen'));\r\n                this.__Q('.qp-btn-to-fullscreen').text(__Q.lang.getLangText(this.options.lang, 'media_video_fullscreen'));\r\n                this.__Q('.qp-meida-tip-message').text(__Q.lang.getLangText(this.options.lang, 'media_video_not_support_fullscreen'));\r\n\r\n                //videohtml\r\n                this.__Q('[data-oper=\"loading\"] ').before($video.get(0));\r\n                $video.css(\"width\", \"100%\");\r\n                $video.css(\"height\", \"100%\");\r\n\r\n                if (!this._supportFullScreen()) {\r\n                    this.__Q('.qp-media-box').addClass('qp-media-not-support-full');\r\n                }\r\n                if (this.options.video.showFullscreenBtn && this._fullScreenEnabled()) {\r\n                    this.__Q('.qp-media-box').addClass('qp-media-show-fullscreen-btn');\r\n                }\r\n\r\n                if (this.options.autoAdaptSize) {\r\n                    var width = this.options.video.width;\r\n                    var height = this.options.video.height;\r\n                    if (!width && !height) {\r\n                        width = this.getMediaModel().getWidth();\r\n                        height = this.getMediaModel().getHeight();\r\n                    }\r\n                    this.resizeMedia(width, height);\r\n                }\r\n            } catch (e) {\r\n                throw new Error('createVideo unknow error:' + e.message);\r\n            }\r\n        },\r\n        resizeMedia: function (width, height) {\r\n            if (!this._$mediaBox) {\r\n                this._$mediaBox = this.__Q('.qp-media-box');\r\n            }\r\n            this._$mediaBox.css('width', width + 'px');\r\n            this._$mediaBox.css('height', height + 'px');\r\n            for (var key in this._resizeMap) {\r\n                if (this._resizeMap[key](width, height, this._supportFullScreen())) {\r\n                    this._$mediaBox.addClass(key);\r\n                } else {\r\n                    this._$mediaBox.removeClass(key);\r\n                }\r\n            }\r\n        },\r\n        _pcControlToggle: function (event) {\r\n            var that = this;\r\n            //\r\n            if (that._lastX === event.pageX && that._lastY === event.pageY) {\r\n                return;\r\n            }\r\n            that._lastX = event.pageX;\r\n            that._lastY = event.pageY;\r\n            //\r\n            clearTimeout(that._timeOutId);\r\n            //\r\n            if (that._supportFullScreen() && !that._isFullScreen()) {\r\n                return false;\r\n            }\r\n            var toggle = 'show';//\r\n            switch (event.type) {\r\n                case 'mousemove':\r\n                    toggle = 'show';\r\n                    break;\r\n                case 'mouseout':\r\n                case 'mouseleave':\r\n                    if (__Q.event.checkHover(event, that._$mediaBox.get(0))) {\r\n                        toggle = that.isPlaying() ? 'hide' : 'show';\r\n                    }\r\n                    break;\r\n                default:\r\n            }\r\n\r\n            //pc \r\n            if (toggle === 'show') {\r\n                that.$container.removeClass('qp-media-auto-hide');\r\n            } else {\r\n                that.$container.addClass('qp-media-auto-hide');\r\n            }\r\n\r\n            var autoHide = true;\r\n            //\r\n            if (event.type === 'mousemove' || event.type === 'mouseover') {\r\n                if (that._$toolbar.contains(event.srcElement) || event.srcElement === that._$toolbar.get(0)) {\r\n                    autoHide = false;\r\n                }\r\n                //\r\n                if (event.srcElement === that._$goFullscreen.get(0)) {\r\n                    autoHide = false;\r\n                }\r\n            }\r\n            //2\r\n            if (autoHide) {\r\n                that._autoHide();\r\n            }\r\n        },\r\n        _touchControlToggle: function (e) {\r\n            if (e && e.srcElement && e.srcElement.className.indexOf('qp-media-toolbar-cover') <= -1) {\r\n                return;\r\n            }\r\n            clearTimeout(this._timeOutId);\r\n\r\n            var that = this;\r\n            //\r\n            if (that._supportFullScreen() && !that._isFullScreen()) {\r\n                return false;\r\n            }\r\n            var playing = that.isPlaying();\r\n            if (playing) {\r\n                that.$container.toggleClass('qp-media-auto-hide');\r\n            } else {\r\n                this.play();\r\n            }\r\n            this._autoHide();\r\n            //pc \r\n        },\r\n        _mediaBoxToggle: function (e) {\r\n            var that = this;\r\n            if (e) {\r\n                __Q.event.stopPropagation(e);\r\n                //e.preventDefault();\r\n            }\r\n            var autoHide = true;\r\n            if (that._$toolbar.contains(e.srcElement) || e.srcElement === that._$toolbar.get(0)) {\r\n                autoHide = false;\r\n            }\r\n            if (autoHide) {\r\n                that._autoHide();\r\n            } else {\r\n                clearTimeout(that._timeOutId);\r\n            }\r\n        },\r\n        _controlEvent: function (on) {\r\n            var _this = this;\r\n            on = on ? 'on' : 'off';\r\n            _this._$exitFullscreen[on]('click', _this._toFullScreen);\r\n            _this._$goFullscreen[on]('click', _this._toFullScreen);\r\n            _this._$playInBody[on]('click', _this._playInVideoHanlder);\r\n\r\n            if (__Q.support.touch) {\r\n                _this._$toolbarCover[on]('click', _this._touchControlToggle);\r\n                _this._$mediaBox[on]('click', _this._mediaBoxToggle);\r\n            } else {\r\n                _this._$mediaBox[on]('mousemove mouseover mouseout', _this._pcControlToggle);\r\n                //\r\n                _this._$toolbarCover[on]('click', _this._fullScreenClickHandler);\r\n            }\r\n        },\r\n        _fullScreenClickHandler: function (e) {\r\n            //touch\r\n            if (e && e.srcElement && e.srcElement.className.indexOf('qp-media-toolbar-cover') <= -1) {\r\n                return;\r\n            }\r\n            //\r\n            if ((this._supportFullScreen() && this._isFullScreen()) || !this._supportFullScreen()) {\r\n                this.playPause(e);\r\n            }\r\n        },\r\n        _playInVideoHanlder: function (e) {\r\n            if (this._supportFullScreen() && !this._isFullScreen()) {\r\n                this._toFullScreen();\r\n            } else {\r\n                this.playPause(e);\r\n            }\r\n        },\r\n        _exitFull: function () {\r\n            if (document.exitFullscreen) {\r\n                document.exitFullscreen();\r\n            } else if (document.webkitCancelFullScreen) {\r\n                document.webkitCancelFullScreen();\r\n            } else if (document.msExitFullscreen) {\r\n                document.msExitFullscreen();\r\n            } else if (document.mozCancelFullScreen) {\r\n                document.mozCancelFullScreen();\r\n            }\r\n        },\r\n        _toFullScreen: function (e) {\r\n            if (e) {\r\n                __Q.event.preventDefault(e);\r\n            }\r\n            var _this = this;\r\n            if (!_this._fullScreenEnabled()) {\r\n                //\r\n                clearTimeout(_this._fullMsgTimeoutId);\r\n                _this._$fullScreenMessage.show();\r\n                _this._fullMsgTimeoutId = setTimeout(function () {\r\n                    _this._$fullScreenMessage.hide();\r\n                }, 3000);\r\n                return;\r\n            }\r\n            var container = _this._$mediaBox.get(0);\r\n            if (this._isFullScreen()) {\r\n                this.pause();\r\n                //https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API\r\n                this._exitFull();\r\n            }\r\n            else {\r\n                var rfs = container.requestFullscreen || container.webkitRequestFullscreen || container.mozRequestFullScreen || container.msRequestFullscreen;\r\n                if (typeof rfs != \"undefined\" && rfs) {\r\n                    rfs.call(container);\r\n                } else {\r\n                    __Q.logger.error('Fullscreen API is not supported');\r\n                }\r\n                // Failed to execute 'play' on 'HTMLMediaElement': API can only be initiated by a user gesture.\r\n                this.play();\r\n                //\r\n                this.$container.addClass('qp-media-auto-hide');\r\n                this._$mediaBox.addClass('qp-media-playing');\r\n                clearTimeout(_this._fullTimeOutId);\r\n                _this._fullTimeOutId = setTimeout(function () {\r\n                    if (!_this._fullScreen && !_this._fullScreenChangeEnable) {\r\n                        //_this.options.video.supportFullscreen = false;\r\n                        _this._fullScreenChangeEnable = false;\r\n                        _this._unSurportFullApi();\r\n                    }\r\n                }, __Q.support.isMobile ? 1000 : 250);\r\n            }\r\n        },\r\n        _fullScreenCallBack: function (on) {\r\n            var container = this._$mediaBox.get(0);\r\n            on = on ? 'on' : 'off';\r\n            //__Q(document)[on]('webkitfullscreenerror',function(event){\r\n            //    console.log('change error');\r\n            //});\r\n            if (__Q.browser.webkit) {\r\n                __Q(document)[on]('webkitfullscreenchange', this._fullScreenChangeHandler);\r\n            } else if (__Q.browser.mozilla) {\r\n                __Q(document)[on]('mozfullscreenchange', this._fullScreenChangeHandler);\r\n            } else if (__Q.browser.msie) {\r\n                //https://msdn.microsoft.com/en-us/library/dn265028%28v=vs.85%29.aspx\r\n                if (container.requestFullscreen) {\r\n                    __Q(document)[on]('fullscreenchange', this._fullScreenChangeHandler);\r\n                } else if (container.msRequestFullscreen) {\r\n                    __Q(document)[on]('MSFullscreenChange', this._fullScreenChangeHandler);\r\n                }\r\n            }\r\n        },\r\n        _unSurportFullApi: function () {\r\n            this.__Q('.qp-media-box').addClass('qp-media-not-support-full');\r\n        },\r\n        _fullScreenChangeHandler: function (e) {\r\n            //\r\n            if (__Q.browser.msie) {\r\n                if (e.target.activeElement !== this._$mediaBox.get(0)) {\r\n                    return;\r\n                }\r\n            } else if (e.srcElement !== this._$mediaBox.get(0)) {\r\n                return;\r\n            }\r\n\r\n            //this._fullScreen = !this._fullScreen;\r\n            if (this._isFullScreen()) {\r\n                this._fullScreen = true;\r\n                this._fullScreenChangeEnable = true;\r\n                //\r\n                //this.play();\r\n                //\r\n                this._$mediaBox.attr('original-style', this._$mediaBox.attr('style'));\r\n                this._$mediaBox.attr('style', '');\r\n                this._$mediaBox.attr('original-class', this._$mediaBox.attr('class'));\r\n                this._$mediaBox.attr('class', '');\r\n                //\r\n                this._$mediaBox.addClass('qp-media-box');\r\n                this._$mediaBox.addClass('qp-media-box-max-fullscreen');\r\n                //\r\n                this.$container.addClass('qp-media-fullscreen');\r\n                this.$container.addClass('qp-media-fullscreen-bar-show');\r\n                //native\r\n                __Q.Native.InteractAppApi.setNativeModuleVisibility(false);\r\n\r\n                //\r\n                if (this.options.onFullScreenChange) {\r\n                    this.options.onFullScreenChange(true);\r\n                } else if (this.options.eventHandler.fullScreenChange) {\r\n                    this.options.eventHandler.fullScreenChange(true);\r\n                }\r\n            } else {\r\n                this._fullScreen = false;\r\n                //\r\n                this.pause();\r\n                //\r\n                this.$container.removeClass('qp-media-fullscreen');\r\n                if (this._$mediaBox.attr('original-style')) {\r\n                    this._$mediaBox.attr('style', this._$mediaBox.attr('original-style'));\r\n                }\r\n                if (this._$mediaBox.attr('original-class')) {\r\n                    this._$mediaBox.attr('class', this._$mediaBox.attr('original-class'));\r\n                }\r\n                //\r\n                this.$container.removeClass('qp-media-fullscreen-bar-show');\r\n                //\r\n                this.$container.removeClass('qp-media-auto-hide');\r\n\r\n                this._$mediaBox.removeClass('qp-media-playing');\r\n\r\n                //native\r\n                __Q.Native.InteractAppApi.setNativeModuleVisibility(true);\r\n                //\r\n                this.hideVolumeControl();\r\n                //loading\r\n                this._$loading.hide();\r\n\r\n                //\r\n                if (this.options.onFullScreenChange) {\r\n                    this.options.onFullScreenChange(false);\r\n                } else if (this.options.eventHandler.fullScreenChange) {\r\n                    this.options.eventHandler.fullScreenChange(false);\r\n                }\r\n            }\r\n        },\r\n        _isFullScreen: function () {\r\n            return document.webkitIsFullScreen;\r\n            //return this._fullScreen;\r\n        },\r\n        _fullScreenEnabled: function () {\r\n\r\n            //pptshell\r\n            if (location.search.toLowerCase().indexOf('sys=pptshell') >= 0 && !__Q.support.isMobile) {\r\n                return false;\r\n            }\r\n\r\n            if (this._fullScreenChangeEnable === false) {\r\n                return false;\r\n            }\r\n\r\n            return document.webkitFullscreenEnabled || document.msFullscreenEnabled || document.mozFullScreenEnabled;\r\n        },\r\n        _supportFullScreen: function () {\r\n            return this.options.video.supportFullscreen && this._fullScreenEnabled();\r\n        },\r\n        reset: function () {\r\n            this._exitFull();\r\n            this.pause();\r\n        }\r\n    });\r\n\r\n\r\n    function VideoPlayerPlugin(option) {\r\n        option = option || {};\r\n        return this.each(function () {\r\n            var $this = __Q(this);\r\n\r\n            var data = $this.data('my.mediaplayer');\r\n            var options = __Q.extend({}, $this.data() || {}, typeof option === 'object' && option);\r\n            //\r\n            if (!data) {\r\n                data = VideoPlayer.create($this, options);\r\n                $this.data('my.mediaplayer', data);\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    __Q.fn('videoplayer', VideoPlayerPlugin);\r\n\r\n})(window, __Q);\n/**\r\n * Created by ylf on 2015/12/23.\r\n */\r\n__Q.Controller.ImageViewer = (function () {\r\n\r\n    var ImageViewer = __Q.Class.Create();\r\n\r\n    ImageViewer.include({\r\n\r\n        create: function ($container, width, height, src, fullScreenChange) {\r\n            var that = Object.create(this);\r\n            that._imgData = {\r\n                width: width,\r\n                height: height,\r\n                src: src\r\n            };\r\n            that.$container = $container;\r\n            that.proxyAll(['hide', 'stopImgPropagation']);\r\n            that.fullScreenChange = fullScreenChange;\r\n            //that._init();\r\n            return that;\r\n        },\r\n        stopImgPropagation: function (e) {\r\n            __Q.event.preventDefault(e);\r\n            __Q.event.stopPropagation(e);\r\n        },\r\n        show: function () {\r\n            var _this = this;\r\n\r\n            //\r\n            var $temp = __Q('.qp-media-viewer-temp');\r\n            if ($temp.length > 0) {\r\n                $temp.remove();\r\n            }\r\n\r\n            __Q(document.body).addClass('qp-media-viewer-over-hidden');\r\n\r\n            var $body = __Q(document.body);\r\n            var ele = document.createElement('div');\r\n            __Q(ele).attr('class', 'qp-media-viewer-temp');\r\n            $body.appendChild(ele);\r\n            var $temp = __Q('.qp-media-viewer-temp');\r\n            $temp.html(__Q.View.viewerHtml);\r\n\r\n\r\n            var $mask = __Q('.qp_media_window_mask');\r\n            var $imgContainer = __Q('.qp-media-viewer-img');\r\n            var $close = __Q('.qp-media-viewer-close');\r\n            var $img = __Q('.qp-media-viewer-img img');\r\n            var $center = __Q('.qp-media-viewer-center');\r\n\r\n            _this._maxHeight = window.innerHeight * 0.8;\r\n            _this._maxWidth = window.innerWidth * 0.8;\r\n            //80%\r\n            var rs = __Q.utils.resize(_this._imgData.width, _this._imgData.height, _this._maxWidth, _this._maxHeight);\r\n            //\r\n            $imgContainer.css('marginLeft', '-' + rs.w / 2 + 'px');\r\n            $imgContainer.css('marginTop', '-' + rs.h / 2 + 'px');\r\n            $imgContainer.css('width', rs.w + 'px');\r\n            $imgContainer.css('height', rs.h + 'px');\r\n            $img.attr('src', _this._imgData.src);\r\n            $img.attr('width', rs.w);\r\n            $img.attr('height', rs.h);\r\n            $mask.show();\r\n            $center.show();\r\n\r\n            //dom\r\n            $close.on('click', _this.hide);\r\n            $mask.on('click', _this.hide);\r\n            $img.on('click', _this.hide);\r\n            //$mask.on('touchstart ', _this.stopImgPropagation);\r\n            //$mask.on(' mousedown', _this.stopImgPropagation);\r\n            //$center.on('touchstart ', _this.stopImgPropagation);\r\n            //$center.on(' mousedown', _this.stopImgPropagation);\r\n\r\n            //native\r\n            __Q.Native.InteractAppApi.setViewerModuleVisibility(false);\r\n            if (_this.fullScreenChange) {\r\n                _this.fullScreenChange(true);\r\n            }\r\n        },\r\n        hide: function (e) {\r\n            if (e) {\r\n                __Q.event.preventDefault(e);\r\n                __Q.event.stopPropagation(e);\r\n            }\r\n            //this.$mask.hide();\r\n            //this.$center.hide();\r\n            var $temp = __Q('.qp-media-viewer-temp');\r\n            if ($temp.length > 0) {\r\n                $temp.remove();\r\n            }\r\n            __Q(document.body).removeClass('qp-media-viewer-over-hidden');\r\n            //native\r\n            __Q.Native.InteractAppApi.setViewerModuleVisibility(true);\r\n            if (this.fullScreenChange) {\r\n                this.fullScreenChange(false);\r\n            }\r\n        }\r\n    });\r\n    return ImageViewer;\r\n})();\n/**\r\n * Created by ylf on 2015/12/13.\r\n */\r\n__Q.Model.MediaEvent = (function (window, __Q) {\r\n    var MediaEvent = __Q.Class.Create();\r\n\r\n    MediaEvent.include(Events);\r\n\r\n    MediaEvent.include({\r\n        eventMethod: ['playing', 'pause',  'ended', 'timeupdate', 'seeked', 'volumechange', 'progress', 'waiting',\r\n            'error', 'loadstart', 'loadeddata', 'loadedmetadata', 'stalled', 'suspend', 'play', 'durationchange'],\r\n        create: function (mediaModel, option) {\r\n            var self = Object.create(this);\r\n            self._mediaModel = mediaModel;\r\n            self.options = option;\r\n            self.proxyAll(self.eventMethod);\r\n            self.canBindKey(['playing', 'pause', 'ended', 'timeupdate', 'volumechange', 'progress', 'waiting', 'error', 'loadedmetadata', 'play', 'durationchange']);\r\n            self.mediaEventListener(true);\r\n            return self;\r\n        },\r\n        mediaEventListener: function (on) {\r\n            var _this = this;\r\n            var $media = _this._mediaModel.getQMedia();\r\n            var eventMethod = _this.eventMethod;\r\n            _this.emptied = true;//load\r\n            for (var i = 0; i < eventMethod.length; i++) {\r\n                $media[on ? 'on' : 'off'](eventMethod[i], '', _this[eventMethod[i]]);\r\n            }\r\n        },\r\n        playing: function () {\r\n            var _this = this;\r\n            _this.trigger('playing');\r\n            _this.emptied = false;\r\n            var mediaTarget = {\r\n                mediaId: _this._mediaModel.getId(),\r\n                index: _this.options.index,\r\n                mediaType: _this._mediaModel.getMediaType()\r\n            };\r\n            if (_this.options._onPlay) {\r\n                _this.options._onPlay(mediaTarget);\r\n            }\r\n            if (_this.options.onPlay) {\r\n                _this.options.onPlay(mediaTarget);\r\n            } else if (_this.options.eventHandler) {\r\n                _this.options.eventHandler.play(mediaTarget);\r\n            }\r\n        },\r\n        pause: function () {\r\n            var _this = this;\r\n            _this.trigger('pause');\r\n\r\n            var mediaTarget = {\r\n                mediaId: _this._mediaModel.getId(),\r\n                index: _this.options.index,\r\n                mediaType: _this._mediaModel.getMediaType(),\r\n                ended: !!_this._ended\r\n            };\r\n            if (_this.options.onPause) {\r\n                _this.options.onPause(mediaTarget);\r\n            } else if (_this.options.eventHandler) {\r\n                _this.options.eventHandler.pause(mediaTarget);\r\n            }\r\n            _this._ended = false;\r\n        },\r\n        emptied: function () {\r\n            this.emptied = true;\r\n        },\r\n        ended: function () {\r\n            var _this = this;\r\n            _this._mediaModel.load();\r\n            //posterbug\r\n            _this._mediaModel.resetPoster();\r\n            _this.trigger('ended');\r\n            //\r\n            //_this.media.currentTime = MediaEndSkipTime;\r\n            var o = {\r\n                mediaId: _this._mediaModel.getId(),\r\n                index: _this.options.index,\r\n                mediaType: _this._mediaModel.getMediaType()\r\n            };\r\n            if (_this.options._onEnd) {\r\n                _this.options._onEnd(o);\r\n            }\r\n            if (_this.options.onEnd) {\r\n                _this.options.onEnd(o);\r\n            } else if (_this.options.eventHandler) {\r\n                _this.options.eventHandler.ended(o);\r\n            }\r\n            _this.playing = false;\r\n        },\r\n        timeupdate: function () {\r\n            var _this = this;\r\n            _this.trigger('timeupdate');\r\n            var mediaTarget = {\r\n                mediaId: _this._mediaModel.getId(),\r\n                index: _this.options.index,\r\n                mediaType: _this._mediaModel.getMediaType()\r\n            };\r\n            if (_this.options.onTimeUpdate) {\r\n                _this.options.onTimeUpdate(mediaTarget);\r\n            } else if (_this.options.eventHandler) {\r\n                _this.options.eventHandler.timeupdate(mediaTarget);\r\n            }\r\n            //ended\r\n            var duration = _this._mediaModel.getDuration();\r\n            var currentTime = _this._mediaModel.getCurrentTime();\r\n            if (duration > 0 && duration <= currentTime && currentTime > 0) {\r\n                _this._ended = true;\r\n            }\r\n        },\r\n        seeked: function () {\r\n            var _this = this;\r\n            var mediaTarget = {\r\n                mediaId: _this._mediaModel.getId(),\r\n                index: _this.options.index,\r\n                mediaType: _this._mediaModel.getMediaType(),\r\n                seeked: _this._mediaModel.getCurrentTime(),\r\n                ended: false\r\n            };\r\n            if (_this.options.onSeek) {\r\n                _this.options.onSeek(mediaTarget);\r\n            } else if (_this.options.eventHandler) {\r\n                _this.options.eventHandler.seeked(mediaTarget);\r\n            }\r\n        },\r\n        volumechange: function () {\r\n            var _this = this;\r\n            _this.trigger('volumechange');\r\n            _this.volumeChangeEvent(true);\r\n        },\r\n        progress: function () {\r\n            this.trigger('progress');\r\n        },\r\n        waiting: function () {\r\n            this.trigger('waiting');\r\n        },\r\n        error: function () {\r\n            var code = (this._mediaModel.getError() ? this._mediaModel.getError().code : '');\r\n            __Q.logger.debug(\"media error code \" + code);\r\n            this.trigger('error', code);\r\n            // code == 4 src\r\n            //if (code === 3) {//\r\n                //ND2errorcode=3\r\n                //if (_this.controlEvent) {\r\n                //_this.controlEvent('off');\r\n                //}\r\n            //}\r\n        },\r\n        loadstart: function () {\r\n            __Q.logger.debug('loadstart');\r\n        },\r\n        loadeddata: function () {\r\n            __Q.logger.debug('loadeddata');\r\n        },\r\n        loadedmetadata: function () {\r\n            __Q.logger.debug('loadedmetadata');\r\n            this.trigger('loadedmetadata');\r\n        },\r\n        stalled: function () {\r\n            __Q.logger.debug('stalled');\r\n        },\r\n        suspend: function () {\r\n            __Q.logger.debug('suspend');\r\n        },\r\n        play: function () {\r\n            __Q.logger.debug('play');\r\n            var _this = this;\r\n            _this.trigger('play');\r\n            if (_this.options.mutuallyExclusive) {\r\n                _this.options.eventHandler.mutuallyExclusivePlay({\r\n                    mediaId: _this._mediaModel.getId(),\r\n                    dataId: _this.options.dataId,\r\n                    index: _this.options.index,\r\n                    mediaType: _this._mediaModel.getMediaType()\r\n                });\r\n            }\r\n        },\r\n        durationchange: function () {\r\n            this.trigger('durationchange');\r\n        },\r\n        volumeChangeEvent: function (display, eventTrigger) {\r\n            var muted = this._mediaModel.getMuted();\r\n            var volume = (muted ? 0 : this._mediaModel.getVolume());\r\n            if (typeof  this.lastVolumeDisplay !== 'undefined' && display === this.lastVolumeDisplay && typeof this.lastVolume !== 'undefined' && !eventTrigger) {\r\n\r\n                //0.01\r\n                if ((volume === this.lastVolume || (volume !== 0 && Math.abs(this.lastVolume - volume) < 0.01) )) {\r\n                    return;\r\n                }\r\n\r\n                //25%\r\n                if (typeof this.volumeUp !== 'undefined' && !this.volumeUp && Math.abs(this.lastVolume - volume) < 0.25) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            this.volumeUp = false;\r\n            this.lastVolumeDisplay = display;\r\n            this.lastVolume = (muted ? 0 : this._mediaModel.getVolume());\r\n\r\n            var mediaTarget = {\r\n                mediaId: this._mediaModel.getId(),\r\n                index: this.options.index,\r\n                mediaType: this._mediaModel.getMediaType(),\r\n                volume: muted ? 0 : this._mediaModel.getVolume(),\r\n                display: display\r\n            };\r\n            if (this.options.onVolumeChange) {\r\n                this.options.onVolumeChange(mediaTarget);\r\n            } else if (this.options.eventHandler) {\r\n                this.options.eventHandler.volumeChange(mediaTarget);\r\n            }\r\n        }\r\n    });\r\n\r\n    return MediaEvent;\r\n})(window, __Q);\n/**\r\n * Created by ylf on 2015/12/12.\r\n */\r\n__Q.Model.MediaModel = (function (window, __Q) {\r\n\r\n    var MediaModel = __Q.Class.Create();\r\n\r\n    MediaModel.include({\r\n        create: function ($media) {\r\n            var self = Object.create(this);\r\n            self.media = $media.get(0);\r\n            self.$media = $media;\r\n            self.poster = $media.attr('poster');\r\n            self.id = $media.attr('id');\r\n            self.mediaType = self.media.tagName.toLowerCase();\r\n            return self;\r\n        },\r\n        load: function () {\r\n            this.media.load();\r\n        },\r\n        setPreLoad: function (preLoad) {\r\n            this.$media.attr('preload', preLoad);\r\n        },\r\n        getWidth: function () {\r\n            var attrWidth = this.$media.attr('width');\r\n            var cssWidth = this.$media.css('width');\r\n            return parseInt(cssWidth.indexOf('%') > 0 ? attrWidth : (attrWidth || attrWidth )) || 0;\r\n        },\r\n        getHeight: function () {\r\n            var attrHeight = this.$media.attr('height');\r\n            var cssHeight = this.$media.css('height');\r\n            return parseInt(cssHeight.indexOf('%') > 0 ? attrHeight : (attrHeight || attrHeight )) || 0;\r\n        },\r\n        getMediaType: function () {\r\n            return this.mediaType;\r\n        },\r\n        getMedia: function () {\r\n            return this.media;\r\n        },\r\n        getQMedia: function () {\r\n            return this.$media;\r\n        },\r\n        getId: function () {\r\n            return this.id;\r\n        },\r\n        getPoster: function () {\r\n            return this.poster;\r\n        },\r\n        isPlaying: function () {\r\n            return !this.media.paused;\r\n        },\r\n        //posterposterbug\r\n        resetPoster: function () {\r\n            if (this.poster) {\r\n                this.$media.attr('poster', this.poster);\r\n            }\r\n        },\r\n        getDuration: function () {\r\n            //media.duration=NaN\r\n            if (isNaN(this.media.duration)) {\r\n                return 0;\r\n            }\r\n            if (this.media.duration < 0) {\r\n                return 0;\r\n            }\r\n            return this.media.duration;\r\n        },\r\n        getCurrentTime: function () {\r\n            return this.media.currentTime;\r\n        },\r\n        setCurrentTime: function (currentTime) {\r\n            this.media.currentTime = currentTime;\r\n        },\r\n        getVolume: function () {\r\n            return this.media.volume;\r\n        },\r\n        setVolume: function (volume) {\r\n            this.media.volume = volume;\r\n        },\r\n        getBuffered: function () {\r\n            return this.media.buffered;\r\n        },\r\n        getMuted: function () {\r\n            return this.media.muted;\r\n        },\r\n        setMuted: function (muted) {\r\n            this.media.muted = muted;\r\n        },\r\n        getReadyState: function () {\r\n            return this.media.readyState;\r\n        },\r\n        getError: function () {\r\n            return this.media.error;\r\n        }\r\n    });\r\n\r\n    return MediaModel;\r\n})(window, __Q);\n__Q.View.audioHtml = (function (window, __Q) {\r\nvar arr = [];\r\narr.push('<div data-oper=\"media-box\" class=\"qp-media-box qp-media-box-audio\">');\r\narr.push('    <!-- qp-btn-icon-playqp-btn-stop -->');\r\narr.push('    <span data-oper=\"play\" class=\"qp-btn-icon-play\"></span>');\r\narr.push('    <span class=\"qp-media-icons-right qp-icons-sound\"></span>');\r\narr.push('    <!--<div class=\"qp-media-audio-bg\"></div>-->');\r\narr.push('    <!--loading-->');\r\narr.push('    <div class=\"qp-video-videowrap qp-media-audio-bg\">');\r\narr.push('        <div data-oper=\"loading\" class=\"qp-video-loading\">loading..</div>');\r\narr.push('    </div>');\r\narr.push('    <!--/loading-->');\r\narr.push('');\r\narr.push('    <!--qp-media-toolbarqp-progress-long-->');\r\narr.push('    <div data-oper=\"toolbar\" class=\"qp-media-toolbar\">');\r\narr.push('        <!-- qp-btn-stop-->');\r\narr.push('        <span data-oper=\"play\" class=\"qp-btn-icon-play\"></span>');\r\narr.push('        <!---->');\r\narr.push('        <div data-oper=\"progress\" class=\"qp-media-progress-outer\">');\r\narr.push('            <div class=\"qp-media-progress\">');\r\narr.push('                <div data-oper=\"downed-bar\" class=\"qp-media-downed\" style=\"width: 0%;\"></div>');\r\narr.push('                <div data-oper=\"played-bar\" class=\"qp-media-played\" style=\"width: 0%;\"></div>');\r\narr.push('            </div>');\r\narr.push('        </div>');\r\narr.push('        <!--/-->');\r\narr.push('        <!---->                                                                                                           ');\r\narr.push('        <span class=\"qp-time-base\">');\r\narr.push('             <em data-oper=\"curentTime\" class=\"qp-curent-time\">0:00</em>/<em data-oper=\"endTime\" class=\"qp-end-time\">0:00</em>');\r\narr.push('        </span>');\r\narr.push('        <!--/-->');\r\narr.push('        <!---->');\r\narr.push('        <div data-oper=\"volume-icon-container\" class=\"qp-media-volume\">');\r\narr.push('            <!--qp-btn-volume-no-->');\r\narr.push('            <span data-oper=\"volume-icon\" class=\"qp-btn-volume\"></span>');\r\narr.push('');\r\narr.push('            <div data-oper=\"volume-control\" class=\"qp-media-progress-box\" style=\"display:none\">');\r\narr.push('                <div data-oper=\"volume-bar-container\" class=\"qp-media-progress\">');\r\narr.push('                    <div data-oper=\"volume-bar-s\" class=\"qp-media-progress-s\" style=\"height: 0%;\"></div>');\r\narr.push('                    <div data-oper=\"volume-bar-r\" class=\"qp-media-progress-r\" style=\"bottom: 0%;\"></div>');\r\narr.push('                </div>');\r\narr.push('            </div>');\r\narr.push('        </div>');\r\narr.push('');\r\narr.push('    </div>');\r\narr.push('    <div class=\"qp-media-disable\" data-oper=\"media-disable\">');\r\narr.push('');\r\narr.push('    </div>');\r\narr.push('</div>                                                                                                                            ');\r\narr.push('');\r\nreturn arr.join('');\r\n})(window, __Q);\n__Q.View.imageHtml = (function (window, __Q) {\r\nvar arr = [];\r\narr.push('<div class=\"qp-media-box qp-media-box-img \">');\r\narr.push('    <span class=\"qp-media-icons-right qp-icons-pic\"></span>');\r\narr.push('    <div class=\"qp-meida-tip-message\" style=\"display: none\">');\r\narr.push('        ');\r\narr.push('    </div>');\r\narr.push('    <div class=\"qp-media-pics-bg\"></div>');\r\narr.push('    <div class=\"qp-media-toolbar\">');\r\narr.push('        ');\r\narr.push('    </div>');\r\narr.push('');\r\narr.push('</div>');\r\nreturn arr.join('');\r\n})(window, __Q);\n__Q.View.videoHtml = (function (window, __Q) {\r\nvar arr = [];\r\narr.push('<div data-oper=\"media-box\" class=\"qp-media-box qp-media-box-video\">');\r\narr.push('    <!-- qp-btn-icon-playqp-btn-stop -->');\r\narr.push('    <span data-oper=\"play\" class=\"qp-btn-icon-play \"></span>');\r\narr.push('    <span data-oper=\"exit-fullscreen\" class=\"qp-btn-exit-fullscreen\"></span>');\r\narr.push('    <span data-oper=\"go-fullscreen\" class=\"qp-btn-to-fullscreen\"></span>');\r\narr.push('    <span class=\"qp-media-icons-right qp-icons-video\"></span>');\r\narr.push('');\r\narr.push('    <!---->');\r\narr.push('    <div class=\"qp-video-videowrap\">');\r\narr.push('        <div data-oper=\"loading\" class=\"qp-video-loading\">loading..</div>');\r\narr.push('    </div>');\r\narr.push('    <!--/-->');\r\narr.push('    <div class=\"qp-meida-tip-message\" style=\"display: none\">');\r\narr.push('        ');\r\narr.push('    </div>');\r\narr.push('');\r\narr.push('    <!--qp-media-toolbarqp-progress-long-->');\r\narr.push('    <div data-oper=\"toolbar-cover\" class=\"qp-media-toolbar-cover\">');\r\narr.push('        <div data-oper=\"toolbar\" class=\"qp-media-toolbar\">');\r\narr.push('            <!-- qp-btn-stop-->');\r\narr.push('            <span data-oper=\"play\" class=\"qp-btn-icon-play\"></span>');\r\narr.push('            <!---->');\r\narr.push('            <div data-oper=\"progress\" class=\"qp-media-progress-outer\">');\r\narr.push('                <div class=\"qp-media-progress\">');\r\narr.push('                    <div data-oper=\"downed-bar\" class=\"qp-media-downed\" style=\"width: 0%;\"></div>');\r\narr.push('                    <div data-oper=\"played-bar\" class=\"qp-media-played\" style=\"width: 0%;\"></div>');\r\narr.push('                </div>');\r\narr.push('            </div>');\r\narr.push('            <!--/-->');\r\narr.push('            <!---->');\r\narr.push('        <span class=\"qp-time-base\">');\r\narr.push('             <em data-oper=\"curentTime\" class=\"qp-curent-time\">0:00</em>/<em data-oper=\"endTime\" class=\"qp-end-time\">0:00</em>');\r\narr.push('        </span>');\r\narr.push('            <!--/-->');\r\narr.push('            <!---->');\r\narr.push('            <div data-oper=\"volume-icon-container\" class=\"qp-media-volume\">');\r\narr.push('                <!--qp-btn-volume-no-->');\r\narr.push('                <span data-oper=\"volume-icon\" class=\"qp-btn-volume \"></span>');\r\narr.push('');\r\narr.push('                <div data-oper=\"volume-control\" class=\"qp-media-progress-box\" style=\"display:none\">');\r\narr.push('                    <div data-oper=\"volume-bar-container\" class=\"qp-media-progress\">');\r\narr.push('                        <div data-oper=\"volume-bar-s\" class=\"qp-media-progress-s\" style=\"height: 0%;\"></div>');\r\narr.push('                        <div data-oper=\"volume-bar-r\" class=\"qp-media-progress-r\" style=\"bottom: 0%;\"></div>');\r\narr.push('                    </div>');\r\narr.push('                </div>');\r\narr.push('            </div>');\r\narr.push('');\r\narr.push('        </div>');\r\narr.push('    </div>');\r\narr.push('    <div class=\"qp-media-disable\" data-oper=\"media-disable\">');\r\narr.push('');\r\narr.push('    </div>');\r\narr.push('</div>');\r\narr.push('');\r\nreturn arr.join('');\r\n})(window, __Q);\n__Q.View.viewerHtml = (function (window, __Q) {\r\nvar arr = [];\r\narr.push('<div class=\"qp_media_window_mask\" style=\"display: none\"></div>');\r\narr.push('<div class=\"qp-media-viewer-center\" style=\"display: none\">');\r\narr.push('    <div class=\"qp-media-viewer-img\">');\r\narr.push('        <div class=\"qp-media-viewer-close\"></div>');\r\narr.push('        <img />');\r\narr.push('    </div>');\r\narr.push('</div>');\r\nreturn arr.join('');\r\n})(window, __Q);\n/**\r\n * Created by ylf on 2015/12/9.\r\n */\r\n\r\n(function (window, __Q) {\r\n\r\n    //\r\n    var _emptyFunc = function () {\r\n\r\n    };\r\n\r\n\r\n    //\r\n    var mutuallyExclusivePlay = function (mediaObj) {\r\n        var that = window.NDMediaPlayer;\r\n        var mediaId = mediaObj.mediaType + '-' + mediaObj.index + '|' + mediaObj.dataId;\r\n        for (var key in that._$medias) {\r\n            if (mediaId !== key && that._$medias[key]) {\r\n                if (that._$medias[key].data('my.mediaplayer').pause) {\r\n                    that._$medias[key].data('my.mediaplayer').pause();\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    var DefaultOption = {\r\n        onlyRender: false,//\r\n        lock: false,//\r\n        autoAdaptSize: false,\r\n        lang: 'zh',\r\n        mutuallyExclusive: true,\r\n        //mediaMargin: '10px 0px',//\r\n        containerId: '',//id\r\n        returnInstances: false,//\r\n        mediaPreload: true,//\r\n        index: null,//\r\n        style: '',//\r\n        _onEnd: null,//\r\n        _onPlay: null,\r\n        img: {\r\n            render: false,\r\n            renderUI: true,\r\n            renderImmediately: false,//\r\n            width: 0,\r\n            height: 0,\r\n            src: ''\r\n        },\r\n        video: {\r\n            render: true,\r\n            width: 0,\r\n            height: 0,\r\n            renderUI: true,\r\n            supportFullscreen: true,\r\n            showPlayBtnInVideo: false,\r\n            showFullscreenBtn: false\r\n        },\r\n        audio: {\r\n            render: true,\r\n            width: 0,\r\n            height: 0,\r\n            renderUI: true\r\n        },\r\n        onPlay: null,\r\n        onPause: null,\r\n        onEnd: null,\r\n        onSeek: null,\r\n        onVolumeChange: null,\r\n        onTimeUpdate: null,\r\n        onFullScreenChange: null\r\n    };\r\n    var mediaArry = ['audio', 'video', 'img'];\r\n\r\n    var extendOption = function (option, eventHanlder) {\r\n        //\r\n        option = option || {};\r\n        var imgOption = __Q.extend({}, DefaultOption.img, option.img || {});\r\n        var videoOption = __Q.extend({}, DefaultOption.video, option.video || {});\r\n        var audioOption = __Q.extend({}, DefaultOption.audio, option.audio || {});\r\n\r\n        var option = __Q.extend({}, DefaultOption, option || {}, eventHanlder);\r\n        option.img = imgOption;\r\n        option.video = videoOption;\r\n        option.audio = audioOption;\r\n        //\r\n        if (option.mediaMargin) {\r\n            option.style += ';margin:' + option.mediaMargin;\r\n        }\r\n        return option;\r\n    };\r\n\r\n    window.NDMediaPlayer = {\r\n        _$medias: {},//{data-media|data-id:{data}}\r\n        _eventHandler: {\r\n            play: _emptyFunc,\r\n            mutuallyExclusivePlay: mutuallyExclusivePlay,\r\n            pause: _emptyFunc,\r\n            ended: _emptyFunc,\r\n            timeupdate: _emptyFunc,\r\n            seeked: _emptyFunc,\r\n            volumeChange: _emptyFunc,\r\n            fullScreenChange: _emptyFunc\r\n        },\r\n        _getMedia: function (mediaType, index) {\r\n            var that = this;\r\n            var mediaId = mediaType + '-' + index;\r\n            for (var key in this._$medias) {\r\n                if (that._getKeyMedia(key) === mediaId) {\r\n                    var $media = this._$medias[key];\r\n                    return $media;\r\n                }\r\n            }\r\n            return null;\r\n\r\n        },\r\n        _getKey: function ($renderBody) {\r\n            return $renderBody.attr('data-media') + '|' + $renderBody.attr('data-id');\r\n        },\r\n        _getKeyId: function (key) {\r\n            return key.split('|')[1];\r\n        },\r\n        _getKeyMedia: function (key) {\r\n            return key.split('|')[0];\r\n        },\r\n        _getKeyType: function (key) {\r\n            return key.split('-')[0];\r\n        },\r\n        renderToTarget: function (mediaEle, targetEle, option) {\r\n            var containerEle = document.createElement('div');\r\n            containerEle.appendChild(mediaEle);\r\n\r\n            NDMediaPlayer.render(containerEle, option);\r\n            targetEle.appendChild(containerEle.childNodes[0]);\r\n        },\r\n        renderMediaEle: function (mediaEle, option) {\r\n            var containerEle = document.createElement('div');\r\n            var $containerEle = __Q(containerEle);\r\n            __Q(mediaEle).before(containerEle);\r\n            $containerEle.appendChild(mediaEle);\r\n            NDMediaPlayer.render(containerEle, option);\r\n            $containerEle.before(containerEle.childNodes[0]);\r\n            $containerEle.remove();\r\n        },\r\n        _clear: function (rkey) {\r\n            var that = this;\r\n            if (that._$medias[rkey]) {\r\n                var mediaPlayer = that._$medias[rkey].data('my.mediaplayer');\r\n                if (mediaPlayer) {\r\n                    mediaPlayer.destroy();\r\n                }\r\n                that._$medias[rkey].data('my.mediaplayer', null);\r\n                delete that._$medias[rkey];\r\n            }\r\n        },\r\n        setLoggerLevel: function (level) {\r\n            __Q.logger.setLevel(level);\r\n        },\r\n        /**\r\n         * ,\r\n         * @param obj idviewdom\r\n         */\r\n        destroy: function (obj) {\r\n            var that = this;\r\n\r\n            //\r\n            for (var key in that._eventHandler) {\r\n                if (key !== 'mutuallyExclusivePlay') {\r\n                    that._eventHandler[key] = _emptyFunc;\r\n                }\r\n            }\r\n\r\n            //\r\n            if (arguments.length > 0) {\r\n                var type = typeof obj;\r\n                var $view = null;\r\n                if (type === 'string') {\r\n                    $view = __Q('#' + obj);\r\n                } else if (type === 'object') {\r\n                    if ((typeof jQuery !== typeof  undefined ) && (obj instanceof jQuery)) {\r\n                        $view = __Q(obj[0]);\r\n                    } else {\r\n                        $view = __Q(obj);\r\n                    }\r\n                }\r\n                if ($view.length === 0) {\r\n                    return;\r\n                }\r\n                var $renderBodys = $view.find('.qp_media');\r\n                for (var i = 0; i < $renderBodys.length; i++) {\r\n                    var rkey = that._getKey(__Q($renderBodys.get(i)));\r\n                    that._clear(rkey);\r\n                }\r\n            } else {\r\n                //dom\r\n                for (var mediakey in that._$medias) {\r\n                    if (!document.querySelector('[data-id=\"' + that._getKeyId(mediakey) + '\"]')) {\r\n                        that._clear(mediakey);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        reset: function () {\r\n            for (var mediakey in this._$medias) {\r\n                if (this._$medias[mediakey]) {\r\n                    var mediaPlayer = this._$medias[mediakey].data('my.mediaplayer');\r\n                    if (mediaPlayer && mediaPlayer.reset) {\r\n                        mediaPlayer.reset();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        setLock:function(lock,view){\r\n            if (view) {\r\n                var type = typeof view;\r\n                var $view = null;\r\n                if (type === 'string') {\r\n                    $view = __Q('#' + view);\r\n                } else if (type === 'object') {\r\n                    if ((typeof jQuery !== typeof  undefined ) && (view instanceof jQuery)) {\r\n                        $view = __Q(view[0]);\r\n                    } else {\r\n                        $view = __Q(view);\r\n                    }\r\n                }\r\n                if ($view.length === 0) {\r\n                    return;\r\n                }\r\n                var $renderBodys = $view.find('.qp_media');\r\n                for (var i = 0; i < $renderBodys.length; i++) {\r\n                    var rkey = this._getKey(__Q($renderBodys.get(i)));\r\n                    if (this._$medias[rkey]) {\r\n                        var mediaPlayer = this._$medias[rkey].data('my.mediaplayer');\r\n                        if (mediaPlayer && mediaPlayer.setLock) {\r\n                            mediaPlayer.setLock(lock);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                for (var mediakey in this._$medias) {\r\n                    if (this._$medias[mediakey]) {\r\n                        var mediaPlayer = this._$medias[mediakey].data('my.mediaplayer');\r\n                        if (mediaPlayer && mediaPlayer.setLock) {\r\n                            mediaPlayer.setLock(lock);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        render: function ($view, option) {\r\n\r\n            var that = this;\r\n\r\n            //\r\n            for (var key in that._$medias) {\r\n                if (!document.querySelector('[data-id=\"' + that._getKeyId(key) + '\"]')) {\r\n                    that._clear(key);\r\n                }\r\n            }\r\n\r\n            var option = extendOption(option, {\r\n                eventHandler: that._eventHandler\r\n            });\r\n\r\n            //\r\n            var instances = {};\r\n\r\n            for (var i = 0, l = mediaArry.length; i < l; i++) {\r\n                (function (i) {\r\n                    __Q($view.length > 0 ? $view[0] : $view).find(mediaArry[i]).each(function (index) {\r\n                        if (!option[mediaArry[i]].render) {\r\n                            return;\r\n                        }\r\n                        var $media = __Q(this);\r\n\r\n                        //\r\n                        var $renderBody = $media.closest('.qp-media-box');\r\n                        if ($renderBody && $renderBody.length > 0 && $renderBody.get(0)) {\r\n                            return;\r\n                        }\r\n\r\n                        var $div = __Q(document.createElement(\"div\"));\r\n                        $div.attr('style', option.style);\r\n                        $div.addClass('qp_media');\r\n                        $div.attr('id', 'qp-media');\r\n\r\n\r\n                        $media.before($div.get(0));\r\n                        $div.appendChild($media.get(0));\r\n\r\n                        var newOption = {};\r\n                        //index\r\n                        if (typeof option.index == 'undefined' || option.index == null) {\r\n                            newOption = __Q.extend({}, option, {\r\n                                index: option.containerId + '-' + index\r\n                            });\r\n                        } else {\r\n                            newOption = __Q.extend({}, option);\r\n                            newOption.index = newOption.containerId + '-' + newOption.index;\r\n                        }\r\n\r\n                        newOption.renderUI = option[mediaArry[i]].renderUI;\r\n                        var dataId = __Q.utils.getRandomId('media');\r\n                        $div.attr('data-id', dataId);\r\n                        newOption.dataId = dataId;\r\n                        $div[mediaArry[i] + 'player'](newOption);\r\n\r\n                        var mediaId = mediaArry[i] + '-' + newOption.index;\r\n                        $div.attr('data-media', mediaId);\r\n                        var key = that._getKey($div);\r\n\r\n                        //\r\n                        if (option.returnInstances) {\r\n                            instances[key] = $div.data('my.mediaplayer');\r\n                        }\r\n\r\n                        //if (mediaArry[i] !== 'img') {\r\n                        //\r\n                        that._$medias[key] = $div;\r\n                        //}\r\n\r\n                        if ($div.data('my.mediaplayer')) {\r\n                            $div.data('my.mediaplayer').setLock(option.lock);\r\n                        }\r\n                    });\r\n                })(i);\r\n            }\r\n            if (option.returnInstances) {\r\n                return instances;\r\n            }\r\n        },\r\n        mediaOnStart: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.play = callback;\r\n            }\r\n        },\r\n        mediaOnPause: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.pause = callback;\r\n            }\r\n        },\r\n        mediaOnEnded: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.ended = callback;\r\n            }\r\n        },\r\n        mediaOnTimeupdate: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.timeupdate = callback;\r\n            }\r\n        },\r\n        mediaOnSeeked: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.seeked = callback;\r\n            }\r\n        },\r\n        mediaOnVolumeChange: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.volumeChange = callback;\r\n            }\r\n        },\r\n        getMedia: function (key) {\r\n            if (key) {\r\n                var $media = this._$medias[key];\r\n                return $media;\r\n            } else {\r\n                return this._$medias;\r\n            }\r\n        },\r\n        mediaPlay: function (mediaType, index) {\r\n            var $media = this._getMedia(mediaType, index);\r\n            if ($media && $media.get(0)) {\r\n                $media.data('my.mediaplayer').play();\r\n            }\r\n        },\r\n        mediaPause: function (mediaType, index) {\r\n            var $media = this._getMedia(mediaType, index);\r\n            if ($media && $media.get(0)) {\r\n                $media.data('my.mediaplayer').pause();\r\n            }\r\n        },\r\n        mediaSkip: function (mediaType, index, seeked) {\r\n            var $media = this._getMedia(mediaType, index).find(mediaType);\r\n            if ($media && $media.get(0)) {\r\n                $media.get(0).currentTime = seeked == 0 ? 0.01 : seeked;\r\n            }\r\n        },\r\n        mediaVolumeChange: function (mediaType, index, volume, diaplay) {\r\n            var $media = this._getMedia(mediaType, index);\r\n            if ($media && $media.get(0)) {\r\n                $media.data('my.mediaplayer').changeVolume(volume, diaplay);\r\n            }\r\n        },\r\n        mediaPauseAll: function (obj) {\r\n            var that = this;\r\n            if (typeof obj !== typeof undefined) {\r\n                var type = typeof obj;\r\n                var $view = null;\r\n                if (type === 'string') {\r\n                    $view = __Q('#' + obj);\r\n                } else if (type === 'object') {\r\n                    if ((typeof jQuery !== typeof  undefined ) && (obj instanceof jQuery)) {\r\n                        $view = __Q(obj[0]);\r\n                    } else {\r\n                        $view = __Q(obj);\r\n                    }\r\n                }\r\n                if ($view.length === 0) {\r\n                    return;\r\n                }\r\n                var $renderBodys = $view.find('.qp_media');\r\n                for (var i = 0; i < $renderBodys.length; i++) {\r\n                    var rkey = that._getKey(__Q($renderBodys.get(i)));\r\n                    if (that._$medias[rkey]) {\r\n                        var mediaPlayer = that._$medias[rkey].data('my.mediaplayer');\r\n                        if (mediaPlayer && mediaPlayer.pause) {\r\n                            mediaPlayer.pause();\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                for (var key in that._$medias) {\r\n                    var $media = that._$medias[key];\r\n                    if ($media && $media.get(0) && $media.data('my.mediaplayer') && $media.data('my.mediaplayer').pause) {\r\n                        $media.data('my.mediaplayer').pause();\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        mediaOnFullScreenChange: function (callback) {\r\n            if (typeof callback === 'function') {\r\n                this._eventHandler.fullScreenChange = callback;\r\n            }\r\n        }\r\n    };\r\n})(window, __Q);\n/**\r\n * Created by Administrator on 2015/12/17.\r\n */\r\n\r\n(function (window, __Q) {\r\n\r\n    //PPTAPI\r\n    window.NDMediaPlayer.PPTMediaRender = {\r\n        videoZIndex: 2,\r\n        mutuallyExclusive: false,\r\n        renderVideoImg: function (ele) {\r\n            var imgSrc = '';\r\n            var imgEle = ele.previousElementSibling;\r\n            if (imgEle) {\r\n                imgEle.style.display = \"none\";\r\n                imgSrc = imgEle.getAttribute('src');\r\n            }\r\n            if (ele.parentNode && ele.parentNode.parentNode) {\r\n                ele.parentNode.parentNode.setAttribute(\"onclick\", '');\r\n                ele.parentNode.parentNode.setAttribute(\"onmouseout\", '');\r\n                ele.parentNode.parentNode.setAttribute(\"onmouseover\", '');\r\n            }\r\n            return imgSrc;\r\n        },\r\n        mediaRenderComplete: function () {\r\n            __Q(document).bind(\"click\", function (e) {\r\n                var $closest = __Q(e.target).closest(\".qp-media-box\");\r\n                if (!$closest || $closest.length === 0) {\r\n                    //\r\n                    var $medias = window.NDMediaPlayer.getMedia();\r\n                    for (var key in $medias) {\r\n                        if ($medias[key].data('my.mediaplayer')) {\r\n                            $medias[key].data('my.mediaplayer').hideVolumeControl();\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            if (window.parent && window.parent.PPTMediaPlayer && window.parent.PPTMediaPlayer.renderMediaComplete) {\r\n                window.parent.PPTMediaPlayer.renderMediaComplete(window.NDMediaPlayer);\r\n            }\r\n        },\r\n        renderVideo: function (videoEle, containerEle, index, poster) {\r\n            videoEle.setAttribute('poster', poster);\r\n            window.NDMediaPlayer.renderToTarget(videoEle, containerEle, {\r\n                onlyRender: false,\r\n                autoAdaptSize: true,\r\n                mutuallyExclusive: NDMediaPlayer.PPTMediaRender.mutuallyExclusive,\r\n                mediaMargin: '0px',\r\n                audio:{\r\n                    render:false\r\n                },\r\n                video: {\r\n                    showPlayBtnInVideo: false,\r\n                    supportFullscreen:false\r\n                },\r\n                index: index,\r\n                _onPlay: function () {\r\n                    if (NDMediaPlayer.PPTMediaRender.mutuallyExclusive) {\r\n                        var $medias = window.NDMediaPlayer.getMedia();\r\n                        for (var key in $medias) {\r\n                            if (window.NDMediaPlayer._getKeyType(key) === 'audio') {\r\n                                $medias[key].hide();\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\n        },\r\n        renderAudio: function (audioEle, containerEle, index) {\r\n            var zIndexCls = 'qp_media_ppt_zindex';\r\n            window.NDMediaPlayer.renderToTarget(audioEle, containerEle, {\r\n                    onlyRender: false,\r\n                    autoAdaptSize: true,\r\n                    mutuallyExclusive: NDMediaPlayer.PPTMediaRender.mutuallyExclusive,\r\n                    index: index,\r\n                    style: 'display:none;z-index:' + NDMediaPlayer.PPTMediaRender.videoZIndex,\r\n                    mediaMargin: '0px',\r\n                    video: {\r\n                        render: false\r\n                    },\r\n                    audio: {\r\n                        width: 220,\r\n                        height: 80\r\n                    },\r\n                    _onEnd: function (o) {\r\n                        var $media = window.NDMediaPlayer._getMedia(o.mediaType, o.index);\r\n                        if ($media) {\r\n                            $media.hide();\r\n                            if ($media.get(0).parentNode) {\r\n                                __Q($media.get(0).parentNode).css('zIndex','');\r\n                            }\r\n                        }\r\n                    },\r\n                    _onPlay: function (o) {\r\n                        if (NDMediaPlayer.PPTMediaRender.mutuallyExclusive) {\r\n                            var $medias = NDMediaPlayer.getMedia();\r\n                            for (var key in $medias) {\r\n                                if (NDMediaPlayer._getKeyMedia(key) !== (o.mediaType + '-' + o.index) && NDMediaPlayer._getKeyType(key) === 'audio') {\r\n                                    $medias[key].hide();\r\n                                    if ($medias[key].parentNode) {\r\n                                        __Q($medias[key].parentNode).css('zIndex','');\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            );\r\n\r\n            var $img = __Q(containerEle).find('img');\r\n            if ($img && $img.length > 0 && $img.get(0).parentNode) {\r\n                (function ($img) {\r\n                    var $pNode = __Q($img.get(0).parentNode);\r\n\r\n                    $pNode.attr('onclick', '');\r\n                    $pNode.attr(\"onmouseout\", '');\r\n                    $pNode.attr(\"onmouseover\", '');\r\n                    $pNode.addClass($pNode.attr('id'));\r\n                    var on = 'on';\r\n                    var currentKey = '';\r\n                    if ($img.get(0).nextElementSibling) {\r\n                        currentKey = NDMediaPlayer._getKey(__Q($img.get(0).nextElementSibling));\r\n                    }\r\n                    if (!currentKey) {\r\n                        return;\r\n                    }\r\n                    var $m = window.NDMediaPlayer.getMedia(currentKey);\r\n                    var mOper = $m.data('my.mediaplayer');\r\n                    var $contentHolder = __Q('#contentHolder');\r\n                    var $audioView = $m.find('.qp-media-box');\r\n\r\n                    var located = false;\r\n                    var locat = function () {\r\n                        if (located) {\r\n                            return;\r\n                        }\r\n                        located = true;\r\n                        var pNodeOffset = $pNode.offset(), holderOffset = $contentHolder.offset(),\r\n                            scale = mOper.getScale(),\r\n                            audioWidth = $audioView.width(), audioHeight = $audioView.height(),\r\n                            pNodeWidth = $pNode.width(), pNodeHeight = $pNode.height();\r\n\r\n                        var left = pNodeOffset.left - (scale * audioWidth / 2 - scale * pNodeWidth / 2) - holderOffset.left;\r\n                        var right = pNodeOffset.left + scale * audioWidth / 2 + scale * pNodeWidth / 2 - (holderOffset.left + $contentHolder.width());\r\n                        var bottom = pNodeOffset.top + pNodeHeight * scale + mOper.getScale() * audioHeight - (holderOffset.top + $contentHolder.height());\r\n                        //scale\r\n\r\n                        if (left < 0) {\r\n                            $m.css('left', -parseInt(audioWidth / 2 - pNodeWidth / 2 + left / scale) + \"px\");\r\n                        } else if (right > 0) {\r\n                            $m.css('left', -parseInt(audioWidth / 2 - pNodeWidth / 2 + right / scale) + \"px\");\r\n                        } else {\r\n                            $m.css('left', -parseInt(audioWidth / 2 - pNodeWidth / 2) + \"px\");\r\n                        }\r\n                        if (bottom > 0) {\r\n                            $m.css('bottom', pNodeHeight / (__Q.support.touch ? 1 : 1.5) + \"px\");\r\n                        } else {\r\n                            $m.css('top', pNodeHeight / (__Q.support.touch ? 1 : 1.5) + \"px\");\r\n                        }\r\n                    };\r\n\r\n                    $img[on]('click', '', function () {\r\n                        if (mOper.isPlaying()) {\r\n                            mOper.pause();\r\n                            $m.hide();\r\n                            $pNode.css('zIndex','');\r\n                        } else {\r\n                            mOper.play();\r\n                            $m.show();\r\n                            //transformzIndex\r\n                            $pNode.css('zIndex', NDMediaPlayer.PPTMediaRender.videoZIndex++);\r\n                            locat();\r\n                            if (NDMediaPlayer.PPTMediaRender.mutuallyExclusive) {\r\n                                var $medias = window.NDMediaPlayer.getMedia();\r\n                                for (var key in $medias) {\r\n                                    if (key !== currentKey && NDMediaPlayer._getKeyType(key) === 'audio') {\r\n                                        $medias[key].hide();\r\n                                        $pNode.css('zIndex','');\r\n                                        $medias[key].data('my.mediaplayer').pause();\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                    if (!__Q.support.touch) {\r\n                        $img[on]('mouseover', '', function (e) {\r\n                            if (__Q.event.checkHover(e, this)) {\r\n                                $m.show();\r\n                                $pNode.css('zIndex', NDMediaPlayer.PPTMediaRender.videoZIndex++);\r\n                                $m.css('zIndex', NDMediaPlayer.PPTMediaRender.videoZIndex++);\r\n                                locat();\r\n                            }\r\n                        });\r\n                    }\r\n                    $pNode[on]('mouseout', '', function (e) {\r\n                        if (__Q.event.checkHover(e, this)) {\r\n                            if (!mOper.isPlaying()) {\r\n                                $m.hide();\r\n                                //$pNode.removeClass(zIndexCls);\r\n                                $pNode.css('zIndex','');\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    __Q(document).bind(\"click\", function (e) {\r\n                        var $closest = __Q(e.target).closest(\".\" + $pNode.attr('id'));\r\n                        if (!$closest || $closest.length === 0) {\r\n                            if (!mOper.isPlaying()) {\r\n                                $m.hide();\r\n                                //$pNode.removeClass(zIndexCls);\r\n                                $pNode.css('zIndex','');\r\n                            }\r\n                        }\r\n                    });\r\n                })\r\n                ($img);\r\n            }\r\n        }\r\n    };\r\n\r\n})(window, __Q);\r\n})(window,document)"],"sourceRoot":"/source/"}
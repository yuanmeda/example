var Video;!function(a){function b(a){return function(b){return Object.prototype.toString.call(b)==="[object "+a+"]"}}function c(a){return a.substr(0,1).toUpperCase()+a.substr(1)}function d(a){var b=a.split("_"),d="";return e(b,function(a){d+=c(a)}),d}function e(a,b){var c;if(g(a))for(var d=0,e=a.length;e>d&&(c=a[d],b(c,d,a)!==!1);d++);if(f(a))for(var h in a)if(j.call(a,h)&&(c=a[h],b(c,h,a)===!1))break}var f=b("Object"),g=b("Array"),h=b("String"),i=b("Number"),j=Object.prototype.hasOwnProperty;a.utils={isArray:g,isObject:f,isString:h,forInOwn:e,camelCase:d,isNumber:i}}(Video||(Video={}));var Common;!function(a){var b=function(){function a(a){this.type=a}return a}();a.Event=b;var c=function(){function a(){this._listeners=[]}return a.prototype.hasEventListener=function(a,b,c){for(var d=!1,e=0;e<this._listeners.length;e++)this._listeners[e].type===a&&this._listeners[e].listener===b&&this._listeners[e].scope==c&&(d=!0);return d},a.prototype.addEventListener=function(a,b){var c,d,e=a.indexOf(".");e>-1?(c=a.substr(0,e),d=a.substr(e)):(c=a,d=""),this.hasEventListener(c,b,d)||this._listeners.push({type:c,listener:b,scope:d})},a.prototype.removeEventListener=function(a,b){var c,d,e=a.indexOf(".");e>-1?(c=a.substr(0,e),d=a.substr(e)):(c=a,d="");for(var f=0;f<this._listeners.length;f++)b?this._listeners[f].type===c&&this._listeners[f].listener===b&&this._listeners[f].scope==d&&this._listeners.splice(f,1):this._listeners[f].type===c&&this._listeners[f].scope==d&&this._listeners.splice(f,1)},a.prototype.dispatchEvent=function(a){var b=a.type.indexOf(".");if(b>-1)for(var c=(a.type.substr(0,b),a.type.substr(b)),d=0;d<this._listeners.length;d++)this._listeners[d].type===a.type&&this._listeners[d].scope==c&&this._listeners[d].listener.call(this,a);else for(var d=0;d<this._listeners.length;d++)this._listeners[d].type===a.type&&this._listeners[d].listener.call(this,a)},a}();a.EventDispatcher=c}(Common||(Common={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(b){function c(a){b.call(this),this.innerClip=a}return __extends(c,b),c.prototype.addCuepoint=function(b){var c=this;this.innerClip.onCuepoint(b,function(b,d){c.dispatchEvent(new a.CuepointEvent("onCuepoint",d))})},c}(Common.EventDispatcher);a.Clip=b}(Video||(Video={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(a){function b(b,c){a.call(this,b),this.type=b,this.clip=c}return __extends(b,a),b}(Common.Event);a.ClipEvent=b}(Video||(Video={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(a){function b(b,c){a.call(this,b),this.type=b,this.obj=c}return __extends(b,a),b}(Common.Event);a.CuepointEvent=b}(Video||(Video={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(a){function b(b,c){a.call(this,b),this.type=b,this.callback=c}return __extends(b,a),b}(Common.Event);a.PlayerEvent=b}(Video||(Video={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(a){function b(b,c){a.call(this,b),this.type=b,this.player=c}return __extends(b,a),b}(Common.Event);a.PluginEvent=b}(Video||(Video={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(a){function b(){a.call(this),this.addEventListener("onLoad",$.proxy(this.onLoad,this))}return __extends(b,a),b.prototype.onLoad=function(a){this.player=a.player},b}(Common.EventDispatcher);a.PluginBase=b}(Video||(Video={}));var Learning;!function(a){var b='<div class="ln-judge" data-bind="css:{\'ln-judge-editable\':editable}" >    <ul data-bind="foreach:options">        <li  data-bind="css:{\'ln-judge-checked\':answered,\'ln-judge-hover\':hovered,\'ln-judget-standarded\':standarded}">            <i data-bind="css:{\'ln-judge-hover-i\':hovered}"></i><em></em>            <label data-bind="text: content"></label>        </li>    </ul></div>                ',c=function(){function a(){this.init()}return a.prototype.init=function(){$.widget("learning.judgeVideo",{options:{id:0,sub:0,options:["对","错"],answer:{Answer:"",Result:-1},standard:""},_init:function(){var a=this;this.element.html(b);var c=this.options,d=$.extend({},c,{options:Enumerable.from(c.options).select(function(a,b){var d=c.options[b];return{content:d,answered:c.answer.Answer.indexOf(d)>-1,standarded:c.standard.indexOf(d)>-1,hovered:!1}}).toArray()});a._vm=ko.mapping.fromJS(d),a._vm.pushAnswer=$.proxy(this._pushAnswer,this),this._inner=$(".ln-judge",this.element),this._trigger("inited",null,this._ui()),ko.applyBindings(this._vm,a._inner[0]),$("li",a._inner).hover($.proxy(this._onOptionHover,this)).click($.proxy(this._onOptionClick,this))},_pushAnswer:function(a){var b=Enumerable.from(this._vm.options()).firstOrDefault(null,"$.content()=='"+a+"'");null!=b&&(b.answered()||(Enumerable.from(this._vm.options()).forEach("$.answered(false)"),b.answered(!0),this._triggerChanged()))},_triggerChanged:function(){this._vm.answer.Answer(Enumerable.from(this._vm.options()).where("$.answered()").select("$.content()").toArray().join("")),this._trigger("changed",null,this._ui())},_onOptionHover:function(a){this._vm.editable()&&ko.dataFor(a.currentTarget).hovered("mouseenter"==a.type)},_onOptionClick:function(a){if(this._vm.editable()){var b=ko.contextFor(a.currentTarget);b.$parent.pushAnswer(b.$data.content())}},_ui:function(){return{viewModel:this._vm}},viewModel:function(){return this._vm}})},a}();a.judge=c}(Learning||(Learning={}));var Learning;!function(a){var b="<div class=\"ln-options\" data-bind=\"foreach:options, css:{'ln-options-mutil':multiSelect(),'ln-options-single':!multiSelect(), 'ln-options-editable':editable}\">    <dl data-bind=\"attr:{'data-item':$data},css:{'ln-option-hover': hovered,'ln-option-answered':answered,'ln-option-standarded':standarded }\">        <dt data-bind=\"css:{'ln-option-hover-dt':hovered}\"><i></i><em data-bind=\"attr:{title:standarded?'此选项为参考答案':''}\"></em>            <label data-bind=\"text: label() + '.&nbsp;'\"></label>        </dt>        <dd data-bind=\"html:content\"></dd>    </dl></div>                ",c=function(){function a(){this.init()}return a.prototype.init=function(){$.widget("learning.questionOptionVideo",{options:{id:0,sub:0,options:[],multiSelect:!0,editable:!0,answer:{Answer:"",Result:-1},standard:"",shortcut:!0,ispapermode:!1},_init:function(){var a=this;this.element.html(b);var c=this.options,d=$.extend({},c,{options:Enumerable.from(c.options).select(function(a,b){var d=String.fromCharCode(b+65);return{label:d,content:a,answered:c.answer.Answer.indexOf(d)>-1,standarded:c.standard.indexOf(d)>-1,hovered:!1}}).toArray()});a._vm=ko.mapping.fromJS(d),a._vm.pushAnswer=$.proxy(this._pushAnswer,this),this._inner=$(".ln-options",this.element),this._trigger("inited",null,this._ui()),ko.applyBindings(a._vm,a._inner[0]),$("dl",a._inner).hover($.proxy(this._onOptionHover,this)).click($.proxy(this._onOptionClick,this)),this._keyUpHandler=$.proxy(this._onKeyUp,this),this._vm.ispapermode()||$(document).keyup(a._keyUpHandler),this.element.bind("remove."+a.widgetName,function(){$(document).unbind("keyup",a._keyUpHandler)})},layout:function(){var a=this;a._inner.removeClass("ln-span1 ln-span2 ln-span4");var b=this.element.closest(".ln-main-body:hidden");if(b.show(),this.options.options.join("").indexOf("<img")<0){var c=a._inner.find("dd"),d=a._inner.width()-50,e=0;d=0>d?0:d;for(var f=0;f<c.length;f++){var g=$(c[f]),h=g.width()+65;if(h>d/2){e=d;break}e=Math.max(e,h)}d/4>e?a._inner.addClass("ln-span4"):d/2>e?a._inner.addClass("ln-span2"):a._inner.addClass("ln-span1")}else a._inner.addClass("ln-span1");b.hide()},_onKeyUp:function(a){this._vm.editable()&&this._vm.shortcut()&&a.keyCode>=65&&a.keyCode<=65+this._vm.options().length&&"none"==$(".ln-feedback").css("display")&&this._pushAnswer(String.fromCharCode(a.keyCode))},_pushAnswer:function(a){var b=Enumerable.from(this._vm.options()).firstOrDefault(null,"$.label()=='"+a+"'");null!=b&&(this._vm.multiSelect()?(b.answered(!b.answered()),this._triggerChanged()):b.answered()||(Enumerable.from(this._vm.options()).forEach("$.answered(false)"),b.answered(!0),this._triggerChanged()))},_triggerChanged:function(){this._vm.answer.Answer(Enumerable.from(this._vm.options()).where("$.answered()").select("$.label()").toArray().join("")),this._trigger("changed",null,this._ui())},_onOptionHover:function(a){this._vm.editable()&&ko.dataFor(a.currentTarget).hovered("mouseenter"==a.type)},_onOptionClick:function(a){if(this._vm.editable()){var b=ko.contextFor(a.currentTarget);b.$parent.pushAnswer(b.$data.label())}},_ui:function(){return{viewModel:this._vm}},viewModel:function(){return this._vm}})},a}();a.Option=c}(Learning||(Learning={}));var Learning;!function(a){var b='<div class="ln-work">    <div class="ln-question">        <div class="ln-body" data-bind="visible:question.QuestionType()==50">            <label data-bind="text: num() + \'.\'"></label>            <em data-bind="text:\'（\' + question.QuestionTypeName() + \'）\'"></em>            <div data-bind="html:question.ComplexBody" class="ln-body-content"></div>        </div>        <div data-bind="foreach:question.SubItems">            <div class="ln-body">                <label data-bind="text: $root.SubNum($index())"></label>                <em data-bind="text:\'（\' + QuestionTypeName() + \'）\'"></em>                <div data-bind="html:Body" class="ln-body-content"></div>            </div>            <div class="ln-input"></div>            <div class="ln-answer" data-bind="visible:$root.showAnswer,css:{\'ln-answercorrect\':$root.qResult(),\'ln-answererror\':!$root.qResult()}">                <dl><dt class="answer"></dt><dd class="answer" data-bind="html:$root.qResult()==true?\'恭喜你答对了！\':\'很遗憾你答错了，请继续作答\',css:{\'ln-xl\':$root.qResult()==true,\'ln-kl\':$root.qResult()==false}"></dd></dl>                <dl data-bind="visible:$root.ShowExplanation($index())"><dt>题目详解:</dt><dd data-bind="html:$root.StandardExplanation($index())"></dd></dl>            </div>        </div>        <div class="ln-answer" data-bind="visible:$root.showAnswer() && question.ComplexExplanation().length>0">            <dl>                <dt>套题详解:</dt><dd data-bind="html:question.ComplexExplanation"></dd>            </dl>        </div>    </div></div>',c='<div class="ln-status">    <span data-bind="text:$root.statusTitle">疑似错题</span>    <div class="ln-status-tip">        <i></i>        <div data-bind="text:$root.statusDesc" class="ln-status-title">本题为疑似错题，建议跳过作答：</div>        <div data-bind="text:$root.question.FeedbackRemark, visible: $root.showFeedbackRemark"></div>        <ul data-bind="foreach:$root.feedbacks,visible: $root.showFeedback">            <li><span class="ln-status-label" data-bind="text: Title"></span><span class="ln-status-count" data-bind="text: \'反馈: \' + Count()"><i class="ln-status-icon"></i></span></li>        </ul>    </div></div>',d=function(){function d(){new a.judge,new a.Option,new a.Scroll,this.init()}return d.prototype.init=function(){$.widget("learning.questionVideo",{options:{feedbacks:[],feedbackLoaded:!1,editable:!0,showAnswer:!0,ispapermode:!1},_init:function(){var a=this;this.element.html(b);var d=this.options,e=d.question,f=this,g=50==e.QuestionType?$(".ln-body:eq(0)",this.element):$(".ln-body:eq(1)",this.element);0!=e.Status&&4!=e.Status&&g.prepend(c);var f=this;f._inner=$(".ln-work",this.element);var h=ko.mapping.fromJS(d);h.statusTitle=ko.computed(function(){var a=this.question;return["","疑似错题","争议题","鉴定题","作废题"][a.Status()]},h),h.statusDesc=ko.computed(function(){var a=this.question;return["","本题为疑似错题，建议跳过作答","本题为争议题，建议跳过作答","","本题为作废题，建议跳过作答"][a.Status()]},h),h.showFeedback=ko.computed(function(){var a=this,b=this.question;return 1==b.Status()&&a.feedbacks().length>0},h),h.showFeedbackRemark=ko.computed(function(){var a=this.question,b=a.Status();return(2==b||3==b)&&null!=a.FeedbackRemark()&&a.FeedbackRemark().length>0},h),h.StandardCostime=ko.computed(function(){return 0!=this.result.CostSeconds()?this.result.CostSeconds()+"秒":""},h),h.catalogs=ko.computed(function(){var a=this.question;return"undefined"==typeof a.Catalogs?"<无>":Enumerable.from(a.Catalogs()).select("$.Title()").toJoinedString(" &gt; ")},h),h.qResult=ko.computed(function(){return Enumerable.from(this.result.Answers()).all("$.Result()==1")},h),this._vm=h,h.editable.subscribe(function(a){for(var b=0;b<e.SubItems.length;b++){var c=e.SubItems[b].viewModel;c&&c.shortcut&&c.shortcut(a&&50!=e.QuestionType)}},this),h.SubNum=function(a){var b=this.question,c=this;return 50!=b.QuestionType()?c.num()+".":a+1+")."},h.MineAnswer=function(a){var b=this.result.Answers()[a].Answer();return b.length>0?b:"<未作答>"},h.StandardAnswer=function(a){var b=this.question;return b.SubItems()[a].Answer()},h.StandardScore=function(a){var b=this.question,c="function"==typeof b.SubItems()[a].Score?b.SubItems()[a].Score():0;if(0==c)return"";var d="function"==typeof this.result.Answers()[a].Score?this.result.Answers()[a].Score():0;return d+"(总分: "+c+")"},h.ShowExplanation=function(a){var b=this.question.SubItems()[a].Explanation();return null!=b&&b.length>0&&!d.editable},h.StandardExplanation=function(a){var b=this.question,c=b.SubItems()[a].Explanation();return null!=c&&c.length>0?c:"<暂无>"},h.MineAnswerResult=function(a){return 1==this.result.Answers()[a].Result()},this._trigger("inited",null,this._ui()),ko.applyBindings(h,this._inner[0]);for(var i=50==e.QuestionType,j=$(".ln-input",this._inner),k=0;k<e.SubItems.length;k++){var l=e.SubItems[k];switch(l.QuestionType){case 10:case 15:case 18:var m={Answer:"",Result:-1,Score:0};null!=d.result&&k<d.result.Answers.length&&(m=d.result.Answers[k]),$(j[k]).questionOptionVideo({id:e.Id,sub:k,options:l.Options,multiSelect:10!=l.QuestionType,answer:m,changed:$.proxy(this._onAnswerChanged,this),inited:function(a,b){l.viewModel=b.viewModel},shortcut:h.editable()&&!i,editable:h.editable(),standard:h.editable()?"":l.Answer,ispapermode:h.ispapermode()});break;case 20:case 25:var m={Answer:"",Result:1,Score:0};null!=d.result&&k<d.result.Answers.length&&(m=d.result.Answers[k]),$(j[k]).subjective({id:e.Id,sub:k,answer:m,showAnswer:d.showAnswer,scoreable:"undefined"!=typeof d.isSetScoreView?!0:!1,ischapter:"undefined"!=typeof d.ischapter&&1==d.ischapter?!0:!1,subQuestionscore:l.Score?l.Score:1,changed:$.proxy(this._onAnswerChanged,this),inited:function(a,b){l.viewModel=b.viewModel}});break;case 30:var m={Answer:"",Result:-1,Score:0};null!=d.result&&k<d.result.Answers.length&&(m=d.result.Answers[k]),$(j[k]).judgeVideo({id:e.Id,sub:k,answer:m,editable:h.editable(),standard:h.editable()?"":l.Answer,changed:$.proxy(this._onAnswerChanged,this),inited:function(a,b){l.viewModel=b.viewModel}})}}$(".ln-body-content",this._inner).each(function(a,b){var c=b.childNodes;(0==c.length||"P"!=c[0].tagName)&&$(b).prev().css("margin-right","0em")}),h.result=ko.computed(function(){return f.getResult()}),h.done=ko.computed(function(){return"undefined"!=typeof d.isSetScoreView&&1==d.isSetScoreView?Enumerable.from(this.result().Answers).any("$.Score>0"):Enumerable.from(this.result().Answers).any("$.Answer.length>0")},h),$(".ln-question-wrapper",this._inner).scrollC({targetElement:$(".ln-question",this._inner)}),Enumerable.from(h.result().Answers).all("$.Result==1")?$(".ln-answer-only",this._inner).show():setTimeout(function(){$(".ln-answererror",a._inner).fadeOut(1e3)},1e3),$(".ln-question span",this._inner).each(function(a,b){var c=$(b),d=c.css("background-color");("rgb(255, 255, 255)"==d||"#ffffff"==d)&&c.css("background-color","")})},getResult:function(){for(var a={Answers:[],Result:-1},b=this.options.question,c=($(".ln-input",this._inner),0);c<b.SubItems.length;c++){var d=b.SubItems[c],e=ko.mapping.toJS(d.viewModel.answer);a.Answers.push(e)}return a},layout:function(){var a=this,b=Enumerable.from(a.options.question.SubItems).any("$.QuestionType<=18");b&&$(".ln-input",this.element).questionOptionVideo("layout")},_onAnswerChanged:function(a,b){this._trigger("changed",null,this._ui())},_ui:function(){var a=this;return{viewModel:a._vm}}})},d}();a.Question=d}(Learning||(Learning={}));var Learning;!function(a){var b=function(){function a(){this.init()}return a.prototype.init=function(){$.widget("learning.scrollC",{options:{step:10},_hover:!1,_create:function(){var a=this;this.element.addClass("ln-scroll"),$('<div class="ln-scroll-bar"><div class="ln-scroll-handler" /></div>').prependTo(this.element),this._scroll=this.element.find(".ln-scroll-bar"),this._scrollHander=this.element.find(".ln-scroll-handler"),this._targetElement=$(this.options.targetElement),a._scroll.height(this.element.height()),a._targetElement.addClass("ln-scroll-content"),$("body").mousewheel($.proxy(this._onMousewheel,this)).resize($.proxy(this._onResize,this)),a._scrollHander.draggable({containment:"parent",drag:$.proxy(this._onDrag,this)}),this._targetHeight=a._targetElement.height(),window.setInterval($.proxy(this._onDetectSize,this),100),this.reset()},value:function(a){var b=this;if("undefined"==typeof a||null==a)return b._scrollHander.position().top;0>a&&(a=0),a=Math.min(Math.max(0,a),b._scroll.height()-b._scrollHander.height());var c=-a*b._targetElement.height()/b._scroll.height();b._scrollHander.css("top",a),this._trigger("scrolling",null,{value:a}),b._targetElement.css("top",c)},normal:function(){var a=this,b=Math.min(Math.max(0,1),a._scroll.height()-a._scrollHander.height());return b*a._targetElement.height()/a._scroll.height()},reset:function(){var a=this;a._scroll.height(this.element.height()),a._targetElement.width(this.element.width());var b=a._targetElement.height(),c=a._scroll.height(),d=b>c,e=a._scroll.position().top+c-(a._targetElement.position().top+b);e>0&&a._targetElement.css("top",Math.min(0,a._targetElement.position().top+e)),a._scroll.toggle(d),a._scrollHander.height(c*c/b)},_onDetectSize:function(){var a=this,b=a._targetElement.height();b!=a._targetHeight&&this.reset(),a._scrollHander.css("left",0)},_showed:function(){var a=this;return a._targetElement.height()>a._scroll.height()},_onMousewheel:function(a,b,c,d){this._showed()&&this.value(this.value(null)-d*this.options.step)},_onDrag:function(a,b){this.value(b.position.top)},_onResize:function(a){var b=this;b._targetElement.height()},_onScrollHover:function(a){var b=this;this._hover="mouseenter"==a.type,this._showed()&&(this._hover?b._scroll.stop(!0,!0).fadeIn(500):b._scroll.stop(!0,!0).fadeOut(500))}})},a}();a.Scroll=b}(Learning||(Learning={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(a){function b(b,d){a.call(this),this.dotTriggerInfo=[],this.currentSeekTime=0,this.currentIndexForDot=-1,this.currentkey="",this.timeoutId=0,this.pausetimeoutId=0,this.disable=!1,this.maxPlayPosition=0,this._config={element:"",sid:"",cellsUrl:"",submit:null,results:null,apiHost:"",accessToken:""},this._config.apiHost=d.setting.apiHost,this._config.accessToken=d.setting.accessToken,this._config.element=$("#"+d.element),this._config=$.extend(this._config,b),this.questionPlayer=new c(this),new Learning.Question,window.circle=$.proxy(this.show,this)}return __extends(b,a),b.prototype.config=function(){return this._config},b.prototype.getConfig=function(){return this._config},b.prototype.onLoad=function(b){a.prototype.onLoad.call(this,b),this.player.removeEventListener("onClipLoad.QuestionPlugin"),this.player.removeEventListener("onSeek.QuestionPlugin"),this.player.removeEventListener("onResume.QuestionPlugin"),this.player.addEventListener("onClipLoad.QuestionPlugin",$.proxy(this.clipLoad,this)),this.player.addEventListener("onSeek.QuestionPlugin",$.proxy(this.seek,this)),this.player.addEventListener("onResume.QuestionPlugin",$.proxy(this.seek,this))},b.prototype.getcells=function(){var a=this;""!=this._config.cellsUrl&&this.player.setting.video&&"id"==this.player.setting.video.type&&(this._config.mooc?$.ajax({url:this._config.cellsUrl,dataType:"jsonp",type:"Get",jsonp:"jsoncallback",cache:!1,success:function(b){a._config.results=Enumerable.from(b.data).select(function(a){return{Id:a.questionId,Result:{CostSeconds:a.costSeconds,Answers:Enumerable.from(a.answers).select(function(a){return{Answer:a.answer,Result:a.answerResult}}).toArray(),Result:Enumerable.from(a.answers).all("$.answerResult==1")}}}).toArray()},error:function(){}}):$.ajax({url:this._config.cellsUrl,dataType:"jsonp",type:"Get",jsonp:"jsoncallback",data:{videoId:this.player.setting.video.id},cache:!1,success:function(b){a._config.results=b.Cells,a._config.sid=b.Sid},error:function(){}}))},b.prototype.checkIsActive=function(){return this.disable},b.prototype.clipLoad=function(a){if(this.currentkey==this.player.key||""!=this.currentkey)return void(this.disable=!1);if(this.currentkey=this.player.key,this.disable=!0,this.player.timeQuestions&&this.player.timeQuestions.length>0){this.getcells(),a.clip.addEventListener("onCuepoint",$.proxy(this.cuepoint,this));var b=[];Enumerable.from(this.player.timeQuestions).select(function(a){for(var c=0;c<a.QuestionIds.length;c++)b.push(a.QuestionIds[c])}).toArray(),this.questionPlayer.setIds(b)}},b.prototype.seek=function(){var a=this;this.checkIsActive()&&this.player.timeQuestions&&this.player.timeQuestions.length>0&&(this.player.isPaused()||window.setTimeout(function(){var b=a.player.getTime();a.checkunanswer(Math.round(b))},50))},b.prototype.checkunanswer=function(a){for(var b=0;b<this.player.timeQuestions.length;b++){var c=this.player.timeQuestions[b];if(this.currentSeekTime==a)return;if(a>=c.time&&0!=c.time&&!this.questionPlayer.getResults(c.QuestionIds)){this.currentSeekTime=c.time,this.player.seek(Math.round(c.time)),this.jump(c.time,c.QuestionIds);break}}},b.prototype.cuepoint=function(a){if(this.checkIsActive()&&("question"==a.obj.type||"any"==a.obj.type)){var b=a.obj.time/1e3,c=a.obj.QuestionIds;if(this.dotTriggerInfo[b])return;this.jump(b,c)}},b.prototype.show=function(a){var b=this;this.checkIsActive()&&Enumerable.from(this.player.timeQuestions).forEach(function(c,d){return a==c.time&&b.questionPlayer.getResults(c.QuestionIds)?void b.jump(c.time,c.QuestionIds):void 0})},b.prototype.jump=function(a,b){var c=this;this.checkIsActive()&&(clearTimeout(this.timeoutId),clearTimeout(this.pausetimeoutId),this.timeoutId=setTimeout(function(){c.dotTriggerInfo[a]=c.player.getTime(),c.currentIndexForDot=c.getDotIndex(a),c.player.isFullscreen()&&c.player.toggleFullscreen(),c.questionPlayer.jump(b),c.pausetimeoutId=setTimeout(function(){if(!c.player.isPaused()){if("undefined"!=typeof c.player.getPlugin("poster")){var a=c.player.getPlugin("poster");a.skipPoster()}c.player.pause()}},50)},100))},b.prototype.getDotIndex=function(a){for(var b=0;b<this.player.timeQuestions.length;b++)if(this.player.timeQuestions[b].time==a)return b},b}(a.PluginBase);a.QuestionPlugin=b;var c=function(){function a(a){this.plugin=a,this.element=null,this.isAnswering=!1,this.cells=null,this.viewModel={},this.numFromCurrentIds=1,this.tipTimeOut=0,this.questionTypeName={10:"单选题",15:"多选题",18:"不定项选择题",20:"填空题",25:"主观题",30:"判断题",40:"连线题",50:"套题"};var b="chaptervideo_"+(new Date).getTime();a.getConfig().element.prev(".chaptervideo").remove(),a.getConfig().element.before('<div class="chaptervideo" id="'+b+'" style = "display: none;" ><div class="ln-result-tip"><div style="display: none;"></div></div><div class="ln-close" style="display: none;"><a href="javascript:void(0);">×</a></div><div class="ln-container" style="display:none;"><div class="ln-main"><div class="ln-main-body"></div></div><div class="chapter-foot"><a href="javascript:void(0);" class="chapter-btn-commit ln-submit" style = "display: none;"></a><a href="javascript:void(0);" class="chapter-btn-next ln-next" style = "display: none;"></a><a href="javascript:void(0);" class="chapter-btn-resume ln-resume" style = "display: none;"></a></div></div><div class="ln-confirm" style="display:none;"><h3>检测题</h3><p>共 <em></em> 题，<span>已做答 </span></p><div><a href="javascript:void(0);" class="ln-confirm-btn j-reanswer"> 重新作答 </a><a href="javascript:void(0);" class="ln-confirm-btn j-resume1"> 继续播放 </a></div></div></div>'),this.element=$("#"+b),this.regiestEvents()}return a.prototype.regiestEvents=function(){var a=this;$(".j-resume1",a.element).on("click",function(){a.resume()}),$(".j-reanswer",a.element).on("click",function(){a.renswer(a.currentIds)}),$(".ln-resume",a.element).on("click",function(){$(this).hasClass("disable")||a.resume()}),$(".ln-next",a.element).on("click",function(){$(this).hasClass("disable")||a.next()}),$(".ln-submit",a.element).on("click",function(){$(this).hasClass("disable")||a._onSubmit()}),$(".ln-close",a.element).on("click",function(){a.getResults(a.currentIds)||(a.plugin.dotTriggerInfo[a.plugin.currentSeekTime]=0),a.element.hide()})},a.prototype.setIds=function(a){this.qids=a},a.prototype.jump=function(a){this.currentIds=a,this.element.show(),$(".j-resume1",this.element).focus().blur(),this.getResults(this.currentIds)?this.showConfirm(a.length):(this.transfer(a[0],this.getNum(a[0],this.plugin.currentIndexForDot)),this.showAnswer())},a.prototype.transfer=function(a,b,c){var d=this;null==this.cells?this.load({qids:this.qids,accessToken:this.plugin.getConfig().accessToken},function(e){if(0==e.Code){var e=d.toquestionModel(e.Data);d.cells=e,d.mergeCells(),c&&"function"==typeof c&&c(),d.render(a,b)}}):(c&&"function"==typeof c&&c(),this.render(a,b))},a.prototype.toquestionModel=function(a){var b=this;return Enumerable.from(a).select(function(a){return{Id:a.Id,Question:{Id:a.Id,IsSubjective:a.IsSubjective,QuestionType:a.QuestionType,ComplexBody:a.ComplexBody,CompletionSeconds:a.CompletionSeconds,Status:0,ComplexExplanation:a.ComplexExplanation,QuestionTypeName:b.questionTypeName[a.QuestionType],SubItems:Enumerable.from(a.SubItems).select(function(c){return{Body:c.Body,Options:c.Options,QuestionType:c.QuestionType,Answer:c.Answer,Explanation:c.Explanation,QuestionTypeName:b.questionTypeName[a.QuestionType]}}).toArray()}}}).toArray()},a.prototype.render=function(a,b){var c=this,d=this.get(a),e=1==d.submit?1:0,f=1==e||2==e,g=this.getResult(a);$(".ln-main-body",c.element).questionVideo({num:b,question:d.Question,result:d.Result,changed:$.proxy(c._onAnswerChanged,c),inited:function(a,b){c.viewModel.question=b.viewModel},showAnswer:f,editable:!g,ischapter:!0}),this.initui(f,g,a),window.setTimeout(function(){c.isAnswering||($(".ln-main-body",c.element).show(),c.isAnswering=!0)},200),$(".ln-main-body",c.element).show(),$(".ln-close",c.element).show()},a.prototype.initui=function(a,b,c){var d=this.viewModel.question,e=this.numFromCurrentIds=this.getNumFromCurrentIds(c);b&&this.currentIds.length>1&&e!=this.currentIds.length&&$(".ln-next",this.element).removeClass("disable").show(),!b&&this.currentIds.length>1&&$(".ln-next",this.element).addClass("disable").show(),(this.currentIds.length<=1||e==this.currentIds.length||15==d.question.QuestionType()&&!b)&&$(".ln-next",this.element).hide(),e==this.currentIds.length&&b&&$(".ln-resume",this.element).removeClass("disable").show(),b||10!=d.question.QuestionType()&&30!=d.question.QuestionType()||e!=this.currentIds.length||$(".ln-resume",this.element).addClass("disable").show(),(!b&&10!=d.question.QuestionType()&&30!=d.question.QuestionType()||this.currentIds.length>1&&e!=this.currentIds.length)&&$(".ln-resume",this.element).hide(),10==d.question.QuestionType()||30==d.question.QuestionType()||b?$(".ln-submit",this.element).hide():$(".ln-submit",this.element).show().addClass("disable")},a.prototype.getNumFromCurrentIds=function(a){for(var b=0,c=0;c<this.currentIds.length;c++)if(b++,this.currentIds[c]==a)return b},a.prototype.getNum=function(a,b){for(var c=this.plugin.player.timeQuestions,d=0,e=0,f="number"==typeof b&&b>=0?Math.min(c.length,b+1):c.length,g=0;f>g;g++)for(var h=0;h<c[g].QuestionIds.length;h++)d++,c[g].QuestionIds[h]==a&&(e=d);return e},a.prototype.get=function(a){return Enumerable.from(this.cells).where(function(b){return b.Id==a}).firstOrDefault([])},a.prototype.mergeCells=function(){var a=this;this.cells=Enumerable.from(this.cells).select(function(b){var c=b.Question,d=c.SubItems.length,e=Enumerable.from(a.plugin.getConfig().results).where(function(a){return a.Id==b.Id?(a.submit=!0,!0):void 0}).firstOrDefault(null);if(null==e){e={Result:{CostSeconds:0,Answers:[],Result:0}};for(var f=0;d>f;f++)e.Result.Answers.length<=f&&e.Result.Answers.push({Answer:"",Result:0})}return b=$.extend({},e,b)}).toArray()},a.prototype.getResult=function(a){var b=this.get(a);if("undefined"==typeof b.Result){var c=Enumerable.from(this.plugin.getConfig().results).where(function(b){return b.Id==a}).firstOrDefault(null);return c?1==c.Result.Result:!1}return 1==b.Result.Result},a.prototype.setResult=function(a){var b=Enumerable.from(this.cells).where(function(b){return b.Id==a}).firstOrDefault(null);b&&(b.Result&&(b.Result.Result=0,b.Result.Answers=[]),b.submit=!1)},a.prototype.getResults=function(a){var b=this;return Enumerable.from(a).all(function(a){return 1==b.getResult(a)})},a.prototype.setResults=function(a){for(var b=0,c=a.length;c>b;b++)this.setResult(a[b])},a.prototype._onAnswerChanged=function(){var a=this.viewModel.question;return 10==a.question.QuestionType()||30==a.question.QuestionType()?void this._onSubmit():void(Enumerable.from(a.result().Answers).any("$.Answer.length>0")?$(".ln-submit").removeClass("disable"):$(".ln-submit").addClass("disable"))},a.prototype._onSubmit=function(){this._updateAnswers(!0)},a.prototype._updateAnswers=function(a){var b=this.viewModel.question;if("undefined"!=typeof b&&null!=b){var c=this.get(b.question.Id()),d=c.Question,e=$.extend(!0,{CostSeconds:0},c.Result,b.result());if(e.CostSeconds+=1,c.Result=e,c.submit=a||c.submit,a){for(var f=!0,g=0;g<d.SubItems.length;g++){var h=d.SubItems[g],i=c.Result.Answers[g],j=1==i.Result;(10==h.QuestionType||15==h.QuestionType||18==h.QuestionType||30==h.QuestionType)&&(j=c.Result.Answers[g].Answer==h.Answer,i.Result=j?1:2),f&=j}c.Result.Result=f?1:2}this.update(c),this.render(b.question.Id(),b.num()),$(".ln-result-tip div").stop(!1,!0).show(),f?$(".ln-result-tip div").html("恭喜你答对了！"):$(".ln-result-tip div").html("很遗憾你答错了，请继续作答"),$(".ln-result-tip").show(),clearTimeout(this.tipTimeOut),this.tipTimeOut=setTimeout(function(){$(".ln-result-tip div").fadeOut(1e3,function(){$(".ln-result-tip").hide()})},1e3)}},a.prototype.update=function(a){var b=[];b.push({Id:a.Id,Result:{Answers:a.Result.Answers,CostSeconds:a.Result.CostSeconds}});var c=this.plugin.getConfig();c.submit&&c.submit.call(this,{sid:c.sid,results:b,userUnitId:0,version:2})},a.prototype.load=function(a,b){$.ajax({url:this.plugin.getConfig().apiHost+"/v1/cloud/question/list",dataType:"jsonp",jsonp:"jsoncallback",contentType:"application/x-www-form-urlencoded; charset=utf-8",traditional:!0,type:"Get",data:a,cache:!1,success:b,error:function(){}})},a.prototype.resume=function(){var a=this;this.plugin.player.resume(),window.setTimeout(function(){a.element.hide(),a.isAnswering=!1,a.plugin.player.isPaused()&&a.plugin.player.resume();
},150)},a.prototype.next=function(){var a=this.viewModel.question;this.render(this.currentIds[this.numFromCurrentIds],a.num()+1)},a.prototype.showConfirm=function(a){$(".ln-close",this.element).hide(),$(".ln-confirm p em",this.element).text(a),$(".ln-container",this.element).hide(),$(".ln-confirm",this.element).show()},a.prototype.showAnswer=function(){$(".ln-confirm",this.element).hide(),$(".ln-container",this.element).show()},a.prototype.renswer=function(a){var b=this;this.transfer(a[0],this.getNum(a[0],this.plugin.currentIndexForDot),function(){b.setResults(a)}),this.showAnswer()},a}()}(Video||(Video={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(a){function b(b,c){a.call(this),this._config={times:[{time:10}],callback:function(a){}},this._config=$.extend(!0,this._config,b)}return __extends(b,a),b.prototype.onLoad=function(b){a.prototype.onLoad.call(this,b),this.player.addEventListener("onClipLoad",$.proxy(this.clipLoad,this))},b.prototype.clipLoad=function(a){a.clip.addEventListener("onCuepoint",$.proxy(this.cuepoint,this)),a.clip.addCuepoint(this._config.times)},b.prototype.cuepoint=function(a){this._config.callback(a)},b}(a.PluginBase);a.CuepointPlugin=b}(Video||(Video={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(a){function b(b,c){a.call(this),this._config={element:"",apiHost:"",accessToken:""},this._documentPlayer=null,this._queue=[],this._currentPage=1,this._key=0,this.first=!0,this._config.apiHost=c.setting.apiHost,this._config.accessToken=c.setting.accessToken,this._config=$.extend(!0,this._config,b),$("#syncvideo").click($.proxy(this.syncVideo,this))}return __extends(b,a),b.prototype.config=function(){return this._config},b.prototype.onLoad=function(b){var c=this;a.prototype.onLoad.call(this,b),null!=this.player.videoInfo&&0!=this.player.videoInfo.LinkDocumentId&&(this._key=this.player.key,this.first=!0,this.first&&(this._documentPlayer=new Demon.Player(this._config.element,{host:this._config.apiHost,document:null,items:[]}),"id"==this.player.setting.video.type?this._documentPlayer.play({id:this.player.videoInfo.LinkDocumentId,accesstoken:this._config.accessToken}):"code"==this.player.setting.video.type&&this._documentPlayer.init(this.player.documentInfo),this._documentPlayer.onStart(function(){c._documentPlayer.go(1),c._currentPage=c._documentPlayer.getCurrentNum()}),this.first=!1,this.player.addEventListener("onClipLoad",$.proxy(this.clipLoad,this)),this.player.addEventListener("onStart",$.proxy(this.onStart,this)),this.player.addEventListener("onSeek",$.proxy(this.onSeek,this)),this.player.addEventListener("onFinish",$.proxy(this.onFinish,this))))},b.prototype.resize=function(){this._documentPlayer.resize()},b.prototype.clipLoad=function(a){a.clip.addEventListener("onCuepoint",$.proxy(this.cuepoint,this))},b.prototype.onSeek=function(){var a=this;window.setTimeout(function(){var b=1e3*parseInt(""+a.player.getTime(),10),c=a.player.timeDocuments,d=c?c.length:0;if(0!=d){for(var e=0;d>e&&!(b<c[e].time);e++);if(0!=e&&0!=d&&(a._queue=c[e-1].PageNumber,a._currentPage==a._documentPlayer.getCurrentNum())){var f=0==e?1:c[e-1].PageNumber;a._currentPage=f,a.go(f)}}},200)},b.prototype.onFinish=function(){this.first=!0},b.prototype.onStart=function(){this.first&&(this.first=!1,this._queue=1,this._currentPage=1,this._currentPage!=this._documentPlayer.getCurrentNum()&&this.go(this._queue))},b.prototype.cuepoint=function(a){if("document"==a.obj.type||"any"==a.obj.type){if(this._queue=a.obj.PageNumber,this._currentPage!=this._documentPlayer.getCurrentNum()||this._documentPlayer.getStatus()!=Demon.Status.playing)return;this._currentPage=a.obj.PageNumber,this.go(a.obj.PageNumber)}},b.prototype.syncVideo=function(){this._currentPage=this._queue,this.go(this._queue)},b.prototype.isSync=function(){return null==this._documentPlayer||null==this.player.timeDocuments||0==this.player.timeDocuments.length||this._documentPlayer.getStatus()!=Demon.Status.playing?!0:this._currentPage==this._documentPlayer.getCurrentNum()},b.prototype.go=function(a){this._documentPlayer.getStatus()==Demon.Status.playing&&this._documentPlayer.go(a)},b}(a.PluginBase);a.DocumentPlugin=b}(Video||(Video={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(a){function b(b,c){a.call(this),this._config={times:[{time:0}]},this.currentkey="",this._config=$.extend(!0,this._config,b)}return __extends(b,a),b.prototype.onLoad=function(b){a.prototype.onLoad.call(this,b),this.player.addEventListener("onClipLoad",$.proxy(this.clipLoad,this))},b.prototype.clipLoad=function(a){if(this.currentkey!=this.player.key&&""==this.currentkey){this.currentkey=this.player.key;var b=this.uniq();a.clip.addCuepoint(b)}},b.prototype.uniq=function(){for(var a=this.player.times.sort(function(a,b){return a.time-b.time}),b=a.length,c=[],d=0;b>d;){var e=d+1;if(b>e)if(a[d].time==a[e].time){var f=$.extend(!0,a[d],a[e]);f.isShow=!0,f.type="any",c.push(f),d+=2}else c.push(a[d]),d++;else c.push(a[d]),d++}return c},b}(a.PluginBase);a.InnerCuepointPlugin=b}(Video||(Video={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(b){function c(a,c){b.call(this),this._isfirstresume=!0,this._config={autoPosition:!0,intervalTime:2e4,beginTime:0,callback:null},this._config=$.extend(this._config,a)}return __extends(c,b),c.prototype.config=function(){return this._config},c.prototype.getConfig=function(){return this._config},c.prototype.onLoad=function(a){console&&console.log("position plugin is loaded"),b.prototype.onLoad.call(this,a),this.player.addEventListener("onResume",$.proxy(this.resume,this))},c.prototype.resume=function(){this._isfirstresume&&(this._isfirstresume=!1,console&&console.log("position plugin is started"),this.position(),this.interval())},c.prototype.position=function(){var a=0;this._config.autoPosition&&(a=parseInt($.cookie(""+this.player.key))),this._config.beginTime>0&&(a=this._config.beginTime),a>0&&this.player.seek(Math.round(a)),console&&console.log("position seek time:"+Math.round(a))},c.prototype.interval=function(){var b=this;window.setInterval(function(){var c=b.player.getState();if(c==a.STATE.playing){var d=Math.round(b.player.getTime());b._config.autoPosition&&$.cookie(""+b.player.key,d),b._config.callback&&b._config.callback.call&&b._config.callback.call(b,d)}},this._config.intervalTime)},c}(a.PluginBase);a.PositionPlugin=b}(Video||(Video={}));var Video;!function(a){var b=function(){function b(){this._plugins={}}return b.prototype.init=function(b,c){for(var d in c){switch(d){case"question":this._plugins[d]=new a.QuestionPlugin(c[d],b);break;case"position":this._plugins[d]=new a.PositionPlugin(c[d],b);break;case"document":this._plugins[d]=new a.DocumentPlugin(c[d],b);break;case"cuepoint":this._plugins[d]=new a.CuepointPlugin(c[d],b);break;case"innerCuepoint":this._plugins[d]=new a.InnerCuepointPlugin(c[d],b);break;default:this._plugins[d]=c[d]}"function"==typeof this._plugins[d].dispatchEvent&&this._plugins[d].dispatchEvent(new a.PluginEvent("onLoad",b))}},b.prototype.get=function(a){return this._plugins[a]||null},b}();a.PluginFactory=b}(Video||(Video={}));var Multiscreen;!function(a){var b=function(){function a(a){this.config={selector:".s2",minLeftWidth:260,minRightWidth:300,threshold:560},this.wrap=null,this.left=null,this.right=null,this.splite=null,this.resizeTick=0,this.leftDomId="",this.rightDomId="",this.s2DomId="",$.extend(this.config,a);var b=(new Date).getTime();this.leftDomId="player"+b,this.rightDomId="documentPlayer"+b,this.s2DomId="s2Player"+b,$(this.config.selector).empty().append('<div id="'+this.s2DomId+'" class="s2">   <div id="'+this.leftDomId+'" class="s2-left" style = "background-color: #000;" ></div>   <div class="s2-right">       <div class="s2-split"></div>       <div id="'+this.rightDomId+'" class="docplayer"></div>   </div></div>'),this.wrap=$("#"+this.s2DomId,this.config.selector).css({minWidth:this.config.minLeftWidth+this.config.minRightWidth}),this.left=$(".s2-left",this.config.selector),this.right=$(".s2-right",this.config.selector),this.splite=$(".s2-split",this.config.selector),this._init()}return a.prototype._init=function(){var a=this;this.splite.mousedown(function(b){a._startDrag(b.pageX)}).mouseup(function(){a._stopDrag()}),$(window).resize(function(){clearTimeout(a.resizeTick),a.resizeTick=setTimeout(function(){var b="step",c=a.left.width(),d=a.right.width();a.splite.data("isAvg")?b="avg":Math.abs(a.splite.data("prevWidht")-a.wrap.width())>200&&(Math.abs(c-d)<6?(b="avg",a.splite.data("isAvg",1)):b="keep"),a._onResize(b)},0)})},a.prototype._disableSelect=function(){window.getSelection?(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges(),$(this.wrap).css({"-moz-user-select":"none","-ms-user-select":"none","-webkit-user-select":"none"})):document.selection&&($(this.wrap).attr("unselectable","on"),document.selection.empty())},a.prototype._enableSelet=function(){window.getSelection?(window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges(),$(this.wrap).css({"-moz-user-select":"inherit","-ms-user-select":"inherit","-webkit-user-select":"inherit"})):document.selection&&($(this.wrap).removeAttr("unselectable"),document.selection.empty())},a.prototype._startDrag=function(a){var b=this;this._disableSelect();var c=Math.max(this.config.minRightWidth,this.config.minLeftWidth);this.splite.css({padding:"0 "+c+"px",marginLeft:"-"+c+"px","z-index":100}).data({isAvg:0,pageX:a}),this.wrap.mousemove(function(a){b._dragging(a.pageX)}).bind("mouseleave mouseup",function(){b._stopDrag()})},a.prototype._dragging=function(a){this._disableSelect();var b=this.splite.data("pageX"),c=b-a;if(Math.abs(c)>5){var d=this.left.width()-c,e=this.right.width()+c;d<this.config.minLeftWidth&&(d=this.config.minLeftWidth,e=this.wrap.width()-d),e<this.config.minRightWidth&&(e=this.config.minRightWidth,d=this.wrap.width()-e),this.splite.data("pageX",a),this.left.width(d),this.right.width(e)}},a.prototype._stopDrag=function(){this.wrap.unbind("mousemove mouseleave mouseup"),this.splite.css({padding:0,marginLeft:0}),this._enableSelet(),this.fixDrag()},a.prototype._onResize=function(a){var b=(this.splite.width(),this.wrap.width()),c=this.left.width(),d=this.right.width();switch(b<this.config.threshold&&(b=this.config.threshold),a){case"avg":var e=b/2;c=Math.max(e,this.config.minLeftWidth),d=Math.max(e,this.config.minRightWidth),this.left.width(c),this.right.width(d);break;case"keep":var f=parseInt(this.splite.data("prevWidht"),10);c=this.left.width()/f*b,d=this.right.width()/f*b,c<this.config.minLeftWidth?(c=this.config.minLeftWidth,d=b-this.config.minLeftWidth):d<this.config.minRightWidth&&(c=b-this.config.minRightWidth,d=this.config.minRightWidth),this.left.width(c),this.right.width(d);break;case"step":var f=parseInt(this.splite.data("prevWidht"),10);b>f?(f<this.config.minRightWidth+this.config.minLeftWidth&&this.wrap.data("fromMin",1),this.wrap.data("fromMin")&&d<this.config.threshold?b>this.config.minRightWidth+this.config.minLeftWidth&&(d=b-c):(this.wrap.data("fromMin",0),c>d?(c=Math.max(c,this.config.minLeftWidth),d=b-c,d=Math.max(d,this.config.minRightWidth)):(d=Math.max(d,this.config.minRightWidth),c=b-d,c=Math.max(c,this.config.minLeftWidth)))):b>2*this.config.threshold?c>d?(d=Math.max(d,this.config.minRightWidth),c=b-d,c=Math.max(c,this.config.minLeftWidth)):(c=Math.max(c,this.config.minLeftWidth),d=b-c,d=Math.max(d,this.config.minRightWidth)):c>this.config.minLeftWidth?(d=Math.max(d,this.config.minRightWidth),c=b-d,c=Math.max(c,this.config.minLeftWidth)):(c=Math.max(c,this.config.minLeftWidth),d=b-c,d=Math.max(d,this.config.minRightWidth)),this.left.width(c),this.right.width(d)}this.splite.data("prevWidht",b),this.fixDrag(c,d),this.resize()},a.prototype.getConfig=function(){return this.config||{}},a.prototype.fixDrag=function(a,b){void 0===a&&(a=this.left.width()),void 0===b&&(b=this.right.width())},a.prototype.resize=function(){},a}();a.Sreen2Base=b}(Multiscreen||(Multiscreen={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Multiscreen;!function(a){var b=function(a){function b(b){var c=this;a.call(this,b),this.setting=b,this.options=null,this.fixDragTick=0,this.videoPlayer=null,this.docPlayer=null,this.options=a.prototype.getConfig.call(this),this.wrap.append('<div class="s2-sync" style="display:none;" id="syncvideo">   <label>回到老师正在讲的页面</label><i></i></div>'),this.options.videoPlayer&&this.options.videoPlayer.onStart(function(){!c.options.docPlayer&&(c.options.docPlayer=c.options.videoPlayer.getCustomPlugin("document"))}),setInterval(function(){c.options.docPlayer&&c.toggleSync(c.options.docPlayer.isSync())},500),$(".s2 .s2-right .docplayer").height("100%")}return __extends(b,a),b.prototype._startDrag=function(b){this.left.find("object").width(this.left.width()),a.prototype._startDrag.call(this,b)},b.prototype._stopDrag=function(){a.prototype._stopDrag.call(this),this.left.find("object").width(this.left.width()),this.resize()},b.prototype.fixDrag=function(a,b){var c=this;void 0===a&&(a=this.left.width()),void 0===b&&(b=this.right.width()),clearTimeout(this.fixDragTick),this.fixDragTick=setTimeout(function(){c.left.width(a-1),setTimeout(function(){a+b!=c.wrap.width()&&(a=c.wrap.width()-b,a=Math.max(a,c.options.minLeftWidth)),c.left.width(a)},30)},20)},b.prototype.toggleSync=function(a){a?this.wrap.find(".s2-sync").hide():this.wrap.find(".s2-sync").show()},b.prototype.resize=function(){this.left.find("object").width(this.left.width()),this.options.docPlayer&&this.options.docPlayer.resize()},b}(a.Sreen2Base);a.S2videodoc=b}(Multiscreen||(Multiscreen={}));var Video;!function(a){var b=function(){function a(a,b){this.element=a,this.setting=b,this.stylePrefix="flashdetect-",this.hasFlash=!0,this.supportVideo=!!document.createElement("video").canPlayType,this.detect()}return a.prototype.detect=function(){var a=swfobject.getFlashPlayerVersion(),b=window.navigator.userAgent,c="",d=/iPad/i.test(b),e=/iPhone/i.test(b),f=b.match(/Android\s?(\d+.\d+(.\d+)?)/i);f&&f.length>2&&(c=f[1]),a.major>=10&&"4.0.3">c&&!d&&!e?this.hasFlash=!0:(this.hasFlash=!1,this.show())},a.prototype.show=function(a){this.appendStyle(),this.showError(a)},a.prototype.appendStyle=function(){var a=this.stylePrefix+this.element;if(!($("#"+a).length>0)){var b="#"+this.element,c='<style type="text/css" id="'+a+'">'+b+" { width: 100%; height: 100%; background-color: #000; overflow: hidden; }"+b+" .player-warn { width: 425px; height: 100px; background: url("+this.setting.staticHost+"nae/images/warn.png) no-repeat 188px 0; margin: 125px auto 0; padding-top: 75px; }"+b+' .player-warn p { height: 30px; font: 18px/30px "MicroSoft YaHei"; text-align: center; color: #B5B5B5; }'+b+" .player-warn p a { color: #EE750A; text-decoration: none; }</style>";$("head").append(c)}},a.prototype.showError=function(a){this.hasFlash||(a=a||'<p>如果您无法播放视频，请确认您是否安装Flash</p><p><a href="http://get.adobe.com/cn/flashplayer/" target="_blank">点击下载</a>安装最新Flash Player播放器</p>',a='<div class="player-warn">'+a+"</div>",$("#"+this.element).html(a))},a}();a.FlashHelper=b}(Video||(Video={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){!function(a){a[a.unknown=0]="unknown",a[a.html5=1]="html5",a[a.flash=2]="flash"}(a.PlayerType||(a.PlayerType={}));var b=a.PlayerType;!function(a){a[a.loaded=0]="loaded",a[a.unstarted=1]="unstarted",a[a.buffering=2]="buffering",a[a.playing=3]="playing",a[a.paused=4]="paused",a[a.ended=5]="ended"}(a.STATE||(a.STATE={}));var c=(a.STATE,a.utils),d=function(d){function e(c,e){void 0===c&&(c="player"),void 0===e&&(e=null),d.call(this),this.element=c,this.setting=e,this.playerException=new a.PlayerException(this),this.key="",this.playerType=b.unknown,this.innerPlayer=null,this.originalElement=null,this.videoInfo=null,this.timeDocuments=null,this.documentInfo=null,this.timeQuestions=null,this.times=[],this.seekTick=0,this.sthOption=null,this.tryServerRequestNum=0,e.accessToken=e.video.accessToken,this.settingHelper=new a.PlayerSetting,this.originalElement=c}return __extends(e,d),e.prototype.replay=function(){this.innerPlayer&&this.innerPlayer.play()},e.prototype.play=function(a,b){this.element=this.originalElement+"Wrap",$("#"+this.originalElement).html('<div id="'+this.element+'" style="height:100%;width:100%;">'),$("#"+this.element).prev(".chaptervideo").remove(),this.key=(new Date).getTime();var c={id:null,code:null,url:null,quality:b>=0&&4>=b?b:this.setting.video.quality>=0&&this.setting.video.quality<=4?this.setting.video.quality:2,autoPlay:"boolean"==typeof a.autoPlay?a.autoPlay:!!this.setting.video.autoPlay,autoBuffering:"boolean"==typeof a.autoBuffering?a.autoBuffering:!!this.setting.video.autoBuffering,type:null};this.setting.video="object"==typeof this.setting.video?this.setting.video:c,"object"==typeof a?"number"==typeof a.id&&a.id>0?a.type="id":"string"==typeof a.code&&""!=a.code?a.type="code":"string"==typeof a.url&&""!=a.url&&(a.type="url"):"number"==typeof a&&0!=a?a={id:a,type:"id"}:"string"==typeof a&&""!=a&&(a=a.indexOf("http:")>-1?{url:a,type:"url"}:{code:a,type:"code"}),null!=a.type&&(this.setting.video=$.extend({},c,a),this.times=[],this.timeDocuments=null,this.timeQuestions=null,this.initPlayer())},e.prototype.initPlayer=function(){},e.prototype.converters=function(a){var b=this,d=a;return c.isObject(a)&&(d={}),c.isArray(a)&&(d=[]),(c.isObject(a)||c.isArray(a))&&c.forInOwn(a,function(a,e,f){c.isNumber(e)||(e=c.camelCase(e)),d[e]=b.converters(a)}),d},e.prototype.dataFilter=function(a,b){return"json"==b&&(a=JSON.stringify(this.converters(JSON.parse(a)))),a},e.prototype.getVideo=function(){var a=this,b={};"id"==this.setting.video.type?b={videoId:this.setting.video.id,accessToken:this.setting.accessToken}:"code"==this.setting.video.type&&(b={videoCode:this.setting.video.code});var d=this.setting.store.getVideo;c.isString(d)&&(d={url:d});var e=$.extend(!0,{},d,{data:b,success:function(b){b=a.converters(b),a.playerException.detect(b)?(a.videoInfo=a.formatVideoBaseInfo(b),a.videoInfo.ApiHost=a.setting.apiHost):a.videoInfo=null},error:function(b){try{var c=$.parseJSON(b.responseType);a.playerException.loadError(c)}catch(d){}},dataFilter:this.dataFilter,cache:!1,complete:function(b,c){"timeout"==c&&a.playerException.queryFail()}});return $.ajax(e)},e.prototype.getUrlByQuality=function(a){var b=this,d=a.DefaultFile,e={quality:d.Quality,audioIndex:d.AudioIndex,types:d.Type};"id"==this.setting.video.type?(e.videoId=a.Id,e.accessToken=this.setting.accessToken):"code"==this.setting.video.type&&(e.videoCode=this.setting.video.code);var f=this.setting.store.getUrlByQuality;c.isString(f)&&(f={url:f});var g=$.extend(!0,{},f,{data:e,dataFilter:this.dataFilter,success:function(a){a=b.converters(a),d.FileName=a[0].Urls,b.videoInfo.DefaultFile=d,b.videoInfo.accessToken=b.setting.accessToken},cache:!1});return $.ajax(g)},e.prototype.getVideoQuestion=function(){var a=this,b={videoId:this.setting.video.id,accessToken:this.setting.accessToken};return $.ajax({url:this.setting.apiHost+"/v2/cloud/video/word",dataType:"jsonp",jsonp:"jsoncallback",type:"Get",data:b,cache:!1,success:function(b){0==b.Code?(a.timeQuestions=Enumerable.from(b.Data.Relations).where(function(a){return 0==a.IsSubjective&&a.Duration>0}).select(function(a){return{time:a.Duration,QuestionIds:a.QuestionIds,IsSubjective:a.IsSubjective,type:"question",isShow:!0}}).toArray().sort(function(a,b){return a.time-b.time}),a.times=a.times.concat(Enumerable.from(a.timeQuestions).select(function(a){return{time:1e3*a.time,QuestionIds:a.QuestionIds,IsSubjective:a.IsSubjective,type:"question",isShow:!0}}).toArray())):window.console&&console.log("getVideoQuestion："+b.Message)}})},e.prototype.getVideoDocument=function(){var a=this,b={},c="";return"id"==this.setting.video.type?(b={videoId:this.setting.video.id,accessToken:this.setting.accessToken},c="/v2/cloud/video/document"):"code"==this.setting.video.type&&(b={videoCode:this.setting.video.code},c="/v2/cloud/video/document/query"),$.ajax({url:this.setting.apiHost+c,dataType:"jsonp",jsonp:"jsoncallback",type:"get",data:b,cache:!1,success:function(b){0==b.Code&&null!=b.Data?(a.documentInfo=b.Data,a.timeDocuments=Enumerable.from(b.Data.Relations).select(function(a){return{time:1e3*a.Duration,PageNumber:a.PageNumber,type:"document",isShow:!1}}).toArray().sort(function(a,b){return a.time-b.time}),a.times=a.times.concat(a.timeDocuments)):window.console&&console.log("getVideoDocument："+b.Message)}})},e.prototype.formatVideoBaseInfo=function(a){var c=this.playerType==b.html5?"mp4":"f4v",d={Id:a.Id,Title:a.Title,VideoType:a.VideoType,DefaultAudioIndex:a.DefaultAudioIndex,ResourceStatus:a.ResourceStatus,Duration:a.Duration,LinkDocumentId:a.LinkDocumentId,LinkWordId:a.LinkWordId,ScreenshotInterval:a.ScreenshotInterval,ScreenshotPath:a.ScreenshotPath,ScreenshotWidth:a.ScreenshotWidth,ScreenshotHeight:a.ScreenshotHeight,FrontCoverUrl:a.FrontCoverUrl,SubTitle:a.Subtitles,M3U8S:a.M3U8S,Files:Enumerable.from(a.Files).where(function(b){return"undefined"==typeof a.VideoType?!0:0!=a.VideoType&&2!=a.VideoType?3==b.Type:"mp4"==c?1!=b.Type:"f4v"==c?2!=b.Type:void 0}).select(function(a){return{Quality:a.Quality,Type:a.Type,AudioIndex:a.AudioIndex,AudioTitle:a.AudioTitle,AudioLanguage:a.AudioLanguage}}).toArray().sort(function(a,b){var c=b.Quality-a.Quality,d=b.AudioIndex-a.AudioIndex;return 0==c?d:c})};d.DefaultSubtitle=Enumerable.from(a.Subtitles).where(function(a){return a.IsDefault}).toArray()[0],d.DefaultFiles=Enumerable.from(d.Files).where(function(b){return b.AudioIndex==a.DefaultAudioIndex}).toArray();var e=this.setting.video.quality;return d.DefaultFile=function(){for(var a=d.DefaultFiles,b=0;b<a.length;b++)if(a[b].Quality<=e)return a[b];for(var b=a.length-1;b>=0;b--)if(a[b].Quality>=e)return a[b]}(),d},e.prototype.toVideoInfo=function(a){var c=this.playerType==b.html5?"mp4":"f4v",d={Id:a.Id,Title:a.Title,VideoType:a.VideoType,DefaultAudioIndex:a.DefaultAudioIndex,ResourceStatus:a.ResourceStatus,Duration:a.Duration,LinkDocumentId:a.LinkDocumentId,LinkWordId:a.LinkWordId,ScreenshotInterval:a.ScreenshotInterval,ScreenshotPath:a.ScreenshotPath,ScreenshotWidth:a.ScreenshotWidth,ScreenshotHeight:a.ScreenshotHeight,Hosts:a.Hosts,FrontCoverUrl:a.FrontCoverUrl,SubTitle:a.Subtitle,M3U8S:a.M3U8S,Files:Enumerable.from(a.Files).where(function(b){return"undefined"==typeof a.VideoType?!0:0==a.VideoType||2==a.VideoType?b.Type.toLowerCase()==c:"mp3"==b.Type.toLowerCase()}).select(function(a){return{Quality:a.Quality,FileName:a.Path,AudioIndex:a.AudioIndex,AudioTitle:a.AudioTitle,AudioLanguage:a.AudioLanguage}}).toArray().sort(function(a,b){var c=b.Quality-a.Quality,d=b.AudioIndex-a.AudioIndex;return 0==c?d:c})};d.DefaultSubtitle=Enumerable.from(a.Subtitle).where(function(a){return a.IsDefault}).toArray()[0],d.DefaultFiles=Enumerable.from(d.Files).where(function(b){return b.AudioIndex==a.DefaultAudioIndex}).toArray();var e=this.setting.video.quality;return d.DefaultFile=function(){for(var a=d.DefaultFiles,b=0;b<a.length;b++)if(a[b].Quality<=e)return a[b];for(var b=a.length-1;b>=0;b--)if(a[b].Quality>=e)return a[b]}(),d},e.prototype.resize=function(){},e.prototype.close=function(){this.innerPlayer.close(),$("#"+this.originalElement).html("")},e.prototype.getControls=function(){return this.innerPlayer.getControls()},e.prototype.getCommonClip=function(){return this.innerPlayer.getCommonClip()},e.prototype.getIndex=function(){return this.innerPlayer.getIndex()},e.prototype.getParent=function(){return this.innerPlayer.getParent()},e.prototype.getPlay=function(){return this.innerPlayer.getPlay()},e.prototype.getPlaylist=function(){return this.innerPlayer.getPlaylist()},e.prototype.getPlugin=function(a){return this.innerPlayer.getPlugin(a)},e.prototype.getCustomPlugin=function(a){},e.prototype.getScreen=function(){return this.innerPlayer.getScreen()},e.prototype.getState=function(){return this.innerPlayer.getState()},e.prototype.getStatus=function(){return this.innerPlayer.getStatus()},e.prototype.getTime=function(){return null==this.innerPlayer?0:this.innerPlayer.getTime()},e.prototype.getVersion=function(){return this.innerPlayer.getVersion()},e.prototype.getVolume=function(){return this.innerPlayer.getVolume()},e.prototype.getCurrentQuality=function(){},e.prototype.hide=function(){return this.innerPlayer.hide()},e.prototype.id=function(){return this.innerPlayer.id()},e.prototype.isFullscreen=function(){},e.prototype.isHidden=function(){return this.innerPlayer.isHidden()},e.prototype.isLoaded=function(){return this.innerPlayer.isLoaded()},e.prototype.isPaused=function(){return this.innerPlayer.isPaused()},e.prototype.isPlaying=function(){return this.innerPlayer.isPlaying()},e.prototype.pause=function(){return this.innerPlayer.pause()},e.prototype.resume=function(){return this.innerPlayer.resume()},e.prototype.getClip=function(){},e.prototype.seek=function(a){clearTimeout(this.seekTick),this.seekTick=setTimeout(function(a){return function(){}}(a),200)},e.prototype.setVolume=function(a){return this.innerPlayer.setVolume(a)},e.prototype.show=function(){return this.innerPlayer.show()},e.prototype.stop=function(){return this.innerPlayer.stop()},e.prototype.toggle=function(){return this.innerPlayer.toggle()},e.prototype.toggleFullscreen=function(){return this.innerPlayer.toggleFullscreen()},e.prototype.onMouseOver=function(a){return this.addEventListener("onMouseOver",a),this},e.prototype.onMouseOut=function(a){return this.addEventListener("onMouseOut",a),this},e.prototype.onFullscreen=function(a){return this.addEventListener("onFullscreen",a),this},e.prototype.onFullscreenExit=function(a){return this.addEventListener("onFullscreenExit",a),this},e.prototype.onStart=function(a){return this.addEventListener("onStart",a),this},e.prototype.onBeforeSeek=function(a){return this.addEventListener("onBeforeSeek",a),this},e.prototype.onSeek=function(a){return this.addEventListener("onSeek",a),this},e.prototype.onBegin=function(a){return this.addEventListener("onBegin",a),this},e.prototype.onPause=function(a){return this.addEventListener("onPause",a),this},e.prototype.onResume=function(a){return this.addEventListener("onResume",a),this},e.prototype.onFinish=function(a){return this.addEventListener("onFinish",a),this},e.prototype.onCuepoint=function(a,b){},e}(Common.EventDispatcher);a.PlayerBase=d}(Video||(Video={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(b){function c(c,d){void 0===c&&(c="player"),void 0===d&&(d=null),b.call(this,c,d),this.pluginfactory=new a.PluginFactory,this.s2videodoc=null,this.results=null,this.isPlayerLoaded=!1,this.currentClip=null,this.isFirst=!0,this.playerType=a.PlayerType.flash,this.play(d.video)}return __extends(c,b),c.prototype.initPlayer=function(){var a=this;if(this.isFirst=!0,this.registerPlayerEvents(),"url"==this.setting.video.type)this.s2videodoc=null,this.playerException.detectUrl(this.setting.video.url)&&this.initPlayerConfig(this.setting.video.url,this.setting.video);else{var b=[];b.push(this.getVideo()),$.when.apply({},b).done(function(){null!=a.videoInfo&&(b.push(a.getUrlByQuality(a.videoInfo)),$.when.apply({},b).done(function(){var c=a.setting.plugins||{};null!=a.videoInfo&&(a.videoInfo.LinkDocumentId>0&&c.document&&b.push(a.getVideoDocument()),a.videoInfo.LinkWordId>0&&c.question&&"id"===a.setting.video.type&&b.push(a.getVideoQuestion()),b.length>=3?$.when.apply({},b).done(function(){a.s2(c),a.initPlayerConfig(a.videoInfo,a.setting),$("#fixObjectStyle").remove(),$("#"+a.element).after("<style id='fixObjectStyle'>#"+a.element+" Object,#"+a.element+" object{display:block;}</style>")}):(a.s2(c),a.initPlayerConfig(a.videoInfo,a.setting),$("#fixObjectStyle").remove(),$("#"+a.element).after("<style id='fixObjectStyle'>#"+a.element+" Object,#"+a.element+" object{display:block;}</style>")))}))})}},c.prototype.registerPlayerEvents=function(){var a=this.setting.events;for(var b in a)this.addEventListener(b,a[b])},c.prototype.registerPlayerPlugins=function(){var a=this.setting.plugins;this.times.length>0&&(a.innerCuepoint={times:this.times}),this.pluginfactory.init(this,a)},c.prototype.initPlayerConfig=function(a,b){var c=this.settingHelper.getPlayerConfigs(a,b);c.obj2.plugins.captionsContent&&(c.obj2.plugins.captionsContent.style.body.fontSize=$("#"+this.element).width()/40),this.initPlayerEvent(c.obj1,c.obj2)},c.prototype.initPlayerEvent=function(b,c){var d,e=this;$f(this.element,b,c).onLoad(function(){e.isPlayerLoaded=!0,e.registerPlayerPlugins(),e.dispatchEvent(new a.PlayerEvent("onLoad"));var b=e.pluginfactory.get("document");null!=b&&(b.first=!0)}).onFullscreen(function(){e.dispatchEvent(new a.PlayerEvent("onFullscreen"))}).onMouseOver(function(){e.dispatchEvent(new a.PlayerEvent("onMouseOver"))}).onMouseOut(function(){e.dispatchEvent(new a.PlayerEvent("onMouseOut"))}).onFullscreenExit(function(){e.dispatchEvent(new a.PlayerEvent("onFullscreenExit"))}).onStart(function(b){clearTimeout(d),d=setTimeout(function(){e.currentClip=new a.Clip(b),e.dispatchEvent(new a.ClipEvent("onClipLoad",e.currentClip)),e.dispatchEvent(new a.PlayerEvent("onStart")),e._onStart()},100)}).onBeforeSeek(function(){e.dispatchEvent(new a.PlayerEvent("onBeforeSeek"))}).onSeek(function(){e.dispatchEvent(new a.PlayerEvent("onSeek"))}).onPause(function(){e.dispatchEvent(new a.PlayerEvent("onPause"))}).onResume(function(){e.dispatchEvent(new a.PlayerEvent("onResume"))}).onFinish(function(){e.dispatchEvent(new a.PlayerEvent("onFinish"))}),this.innerPlayer=$f(this.element)},c.prototype._onStart=function(){function a(){d.show(),window.setTimeout(function(){try{d.hide()}catch(a){}},c.time)}var b=this,c=this.pluginfactory.get("lastPositionContent"),d=this.innerPlayer.getPlugin("lastPositionContent"),e=0;c&&(d.hide(),d.setHtml(c.html),e=setInterval(function(){if(b.isLoaded()){var c=b.getPlugin("poster");c?c.startPosterIsComplete()&&(a(),clearInterval(e)):(a(),clearInterval(e))}},100))},c.prototype.s2=function(a){a.document&&this.videoInfo.LinkDocumentId>0?(this.s2videodoc=new Multiscreen.S2videodoc({selector:"#"+this.element,videoPlayer:this}),a.document.element="#"+this.s2videodoc.rightDomId,this.element=this.s2videodoc.leftDomId):this.s2videodoc=null},c.prototype.resize=function(){null!=this.s2videodoc&&this.s2videodoc._onResize("keep")},c.prototype.close=function(){this.innerPlayer.close(),$("#"+this.originalElement).html("")},c.prototype.getControls=function(){return this.innerPlayer.getControls()},c.prototype.getCommonClip=function(){return this.innerPlayer.getCommonClip()},c.prototype.getIndex=function(){return this.innerPlayer.getIndex()},c.prototype.getParent=function(){return this.innerPlayer.getParent()},c.prototype.getPlay=function(){return this.innerPlayer.getPlay()},c.prototype.getPlaylist=function(){return this.innerPlayer.getPlaylist();
},c.prototype.getPlugin=function(a){return this.innerPlayer.getPlugin(a)},c.prototype.getCustomPlugin=function(a){return this.pluginfactory.get(a)},c.prototype.getScreen=function(){return this.innerPlayer.getScreen()},c.prototype.getState=function(){return this.innerPlayer.getState()},c.prototype.getStatus=function(){return this.innerPlayer.getStatus()},c.prototype.getTime=function(){return null==this.innerPlayer?0:this.innerPlayer.getTime()},c.prototype.getVersion=function(){return this.innerPlayer.getVersion()},c.prototype.getVolume=function(){return this.innerPlayer.getVolume()},c.prototype.getCurrentQuality=function(){var a=this.getClip();return null==a||null==a.innerClip?0:a.innerClip.quality||0},c.prototype.hide=function(){return this.innerPlayer.hide()},c.prototype.id=function(){return this.innerPlayer.id()},c.prototype.isFullscreen=function(){return this.innerPlayer.isFullscreen()},c.prototype.isHidden=function(){return this.innerPlayer.isHidden()},c.prototype.isLoaded=function(){return this.innerPlayer.isLoaded()},c.prototype.isPaused=function(){return this.innerPlayer.isPaused()},c.prototype.isPlaying=function(){return this.innerPlayer.isPlaying()},c.prototype.pause=function(){return this.innerPlayer.pause()},c.prototype.resume=function(){return this.innerPlayer.resume()},c.prototype.getClip=function(){return this.currentClip},c.prototype.seek=function(a){var b=this;clearTimeout(this.seekTick),this.seekTick=setTimeout(function(a){return function(){if(null!=b.currentClip){var c=b.currentClip.innerClip.duration;c-1>=a&&b.innerPlayer.seek(a)}}}(a),200)},c.prototype.setVolume=function(a){return this.innerPlayer.setVolume(a)},c.prototype.show=function(){return this.innerPlayer.show()},c.prototype.stop=function(){return this.innerPlayer.stop()},c.prototype.toggle=function(){return this.innerPlayer.toggle()},c.prototype.toggleFullscreen=function(){return this.innerPlayer.toggleFullscreen()},c.prototype.onMouseOver=function(a){return this.addEventListener("onMouseOver",a),this},c.prototype.onMouseOut=function(a){return this.addEventListener("onMouseOut",a),this},c.prototype.onFullscreen=function(a){return this.addEventListener("onFullscreen",a),this},c.prototype.onFullscreenExit=function(a){return this.addEventListener("onFullscreenExit",a),this},c.prototype.onStart=function(a){return this.addEventListener("onStart",a),this},c.prototype.onProgressBarClick=function(a){return this.addEventListener("onProgressBarClick",a),this},c.prototype.onBeforeSeek=function(a){return this.addEventListener("onBeforeSeek",a),this},c.prototype.onSeek=function(a){return this.addEventListener("onSeek",a),this},c.prototype.onBegin=function(a){return this.addEventListener("onBegin",a),this},c.prototype.onPause=function(a){return this.addEventListener("onPause",a),this},c.prototype.onResume=function(a){return this.addEventListener("onResume",a),this},c.prototype.onFinish=function(a){return this.addEventListener("onFinish",a),this},c.prototype.onCuepoint=function(a,b){},c}(a.PlayerBase);a.Flowplayer=b}(Video||(Video={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},Video;!function(a){var b=function(b){function c(c,d){void 0===c&&(c="player"),void 0===d&&(d=null),b.call(this,c,d),this.html5Help={isLoaded:!0,state:a.STATE.buffering},this.playerType=a.PlayerType.html5,this.play(d.video)}return __extends(c,b),c.prototype.initPlayer=function(){var a=this;if("url"==this.setting.video.type)this.innerPlayer=this.html5TryPlay([this.setting.video.url]);else{var b=[];b.push(this.getVideo()),$.when.apply({},b).done(function(){null!=a.videoInfo&&(b.push(a.getUrlByQuality(a.videoInfo)),$.when.apply({},b).done(function(){if(null!=a.videoInfo){var b=0==a.videoInfo.VideoType||2==a.videoInfo.VideoType?"video":"audio";a.innerPlayer=a.html5TryPlay(a.videoInfo.DefaultFile.FileName,a.videoInfo.FrontCoverUrl,b)}}))})}},c.prototype.html5TryPlay=function(b,c,d){var e=this;void 0===d&&(d="video");var f="audio"==d?"audio/mpeg":"video/mp4",g="",h=(b.length,2);$(".j-huayuHtml5Player",$("#"+this.element)).remove();var i={"class":"j-huayuHtml5Player",controls:"controls",style:"height:100%;width:100%;",autoplay:this.setting.video.autoPlay};c&&(i.poster=c),$("#"+this.element).append($("<"+d+">",i)),this.video=$(".j-huayuHtml5Player",$("#"+this.element)),this.video.on("play",function(b){e.video[0].isPlayToEnded&&(e.video[0].isPlayToEnded=!1,e.dispatchEvent(new a.PlayerEvent("onResume"))),e.html5Help.state=a.STATE.playing,e.dispatchEvent(new a.PlayerEvent("onStart"))}),this.video.on("seeking",function(b){e.dispatchEvent(new a.PlayerEvent("onBeforeSeek"))}),this.video.on("seeked",function(b){e.dispatchEvent(new a.PlayerEvent("onSeek"))}),this.video.on("pause",function(b){e.html5Help.state=a.STATE.paused,e.dispatchEvent(new a.PlayerEvent("onPause"))}),this.video.on("ended",function(b){e.video[0].isPlayToEnded=!0,e.html5Help.state=a.STATE.ended,e.dispatchEvent(new a.PlayerEvent("onFinish"))}),this.html5Help.isLoaded=!0,this.dispatchEvent(new a.PlayerEvent("onLoad"));for(var j="",k=0,l=b.length;l>k;k++)for(var g='<source src="'+b[k]+'" type="'+f+'"/>',m=h;m>0;m--)j+=g;return this.video.append(j),this.video[0]},c.prototype.resize=function(){},c.prototype.addClip=function(a,b){},c.prototype.close=function(){},c.prototype.getClip=function(){return null},c.prototype.getControls=function(){return null},c.prototype.getCommonClip=function(){return null},c.prototype.getIndex=function(){return null},c.prototype.getParent=function(){return $("#"+this.originalElement)[0]},c.prototype.getPlay=function(){return null},c.prototype.getPlaylist=function(){return null},c.prototype.getPlugin=function(a){return null},c.prototype.getCustomPlugin=function(a){return null},c.prototype.getScreen=function(){return null},c.prototype.getState=function(){return this.html5Help.state},c.prototype.getStateName=function(){return a.STATE[this.html5Help.state]},c.prototype.getStatus=function(){return{bufferEnd:0,bufferStart:0,muted:this.innerPlayer.muted,state:this.html5Help.state,time:this.innerPlayer.currentTime,volume:Math.floor(100*this.innerPlayer.volume)}},c.prototype.getTime=function(){return null==this.innerPlayer?0:this.innerPlayer.currentTime},c.prototype.getVersion=function(){return null},c.prototype.getVolume=function(){return null==this.innerPlayer?0:Math.floor(100*this.innerPlayer.volume)},c.prototype.getCurrentQuality=function(){return 0},c.prototype.hide=function(){return this.video.hide()},c.prototype.id=function(){return this.video.attr("id")},c.prototype.isHidden=function(){return this.video.is(":visible")},c.prototype.isLoaded=function(){return this.html5Help.isLoaded},c.prototype.isPaused=function(){return this.innerPlayer.paused},c.prototype.isPlaying=function(){return 3==this.html5Help.state},c.prototype.pause=function(){return this.innerPlayer.pause()},c.prototype.resume=function(){this.innerPlayer.currentTime=0,this.innerPlayer.play()},c.prototype.seek=function(a){var b=this;clearTimeout(this.seekTick),this.seekTick=setTimeout(function(a){return function(){if(null!=b.innerPlayer){var c=b.innerPlayer.duration;c-1>=a&&(b.innerPlayer.currentTime=a)}}}(a),200)},c.prototype.setVolume=function(a){return 0>a&&(a=0),a>100&&(a=100),this.innerPlayer.volume=a/100,this.innerPlayer},c.prototype.show=function(){return this.video.show()},c.prototype.stop=function(){this.innerPlayer.currentTime=0,this.innerPlayer.pause()},c.prototype.toggle=function(){return this.video.toggle()},c.prototype.toggleFullscreen=function(){return null},c.prototype.isFullscreen=function(){var a=document;return $(a.fullscreenElement||a.webkitCurrentFullScreenElement||a.mozFullScreenElement||null).attr("id")==this.element},c}(a.PlayerBase);a.Html5player=b}(Video||(Video={}));var Video;!function(a){var b=function(){function a(a){this.player=a,this.stylePrefix="playerWarnStyle-"}return a.prototype.detect=function(a){var b="";if(null==a)a={},a.VideoType=0,a.ResourceStatus=c.Noting;else if(a.Files.length>0&&(a.ResourceStatus==c.Ready||a.ResourceStatus==c.Release||"undefined"==typeof a.ResourceStatus))return!0;return b='<div class="player-warn"><p>'+this.getStatusDescription(a)+"</p></div>",this.showError(b),!1},a.prototype.loadError=function(a){var b='<div class="player-warn"><p>抱歉，视频加载失败，错误码：'+a.code+"</p></div>";return this.showError(b),!1},a.prototype.detectUrl=function(a){if(a=a.toLowerCase(),a.indexOf(".mp3")>-1||a.indexOf(".f4v")>-1||a.indexOf(".mp4")>-1||a.indexOf(".flv")>-1)return!0;var b='<div class="player-warn"><p>抱歉，视频加载失败，错误码：9</p></div>';return this.showError(b),!1},a.prototype.queryFail=function(){var a='<div class="player-warn"><p>抱歉，视频加载失败，错误码：404</p></div>';return this.showError(a),!1},a.prototype.appendStyle=function(){var a=this.stylePrefix+this.player.originalElement;if(!($("#"+a).length>0)){var b=$("#"+this.player.originalElement).css("position");b="static"==b||""==b?"position:relative; ":" ";var c="";c=c+'<style type="text/css" id="'+a+'">',c=c+" #"+this.player.originalElement+" {"+b+" background-color: #000; overflow: hidden; }",c=c+" #"+this.player.originalElement+" .player-warn { width: 380px; height: 100px; background: url("+this.player.setting.staticHost+"nae/images/warn.png) no-repeat center top; margin:-80px 0 0 -190px; padding-top: 60px;position: absolute; top: 50%;left: 50%;}",c=c+" #"+this.player.originalElement+' .player-warn p { height: 30px; font: 18px/30px "MicroSoft YaHei"; text-align: center; color: #B5B5B5; }',c+="</style>",$("head").append(c)}},a.prototype.showError=function(a){this.appendStyle(),$("#"+this.player.originalElement).html(a)},a.prototype.getStatusDescription=function(a){var b=1==a.VideoType?"音频":"视频";switch(a.ResourceStatus){case c.Encoding:case c.Sync:case c.Create:b="抱歉，当前"+b+"未转码完成，请稍候再观看。";break;case c.Ready:b+="已就绪";break;case c.Disabled:case c.Expired:b="抱歉，当前"+b+"已下线，无法观看。";break;case c.Delete:b="抱歉，当前"+b+"已删除，无法观看。";break;default:b="抱歉，"+b+"加载失败，错误码："+a.ResourceStatus}return b},a}();a.PlayerException=b;var c;!function(a){a[a.Create=0]="Create",a[a.Ready=1]="Ready",a[a.Disabled=2]="Disabled",a[a.Expired=3]="Expired",a[a.Encoding=4]="Encoding",a[a.Sync=5]="Sync",a[a.Delete=7]="Delete",a[a.Release=8]="Release",a[a.Noting=9]="Noting"}(c||(c={}))}(Video||(Video={}));var Video;!function(a){var b="?v=20161020",c=function(){function c(){this.config=null,this.setting=null}return c.prototype.getPlayerConfigs=function(a,b){if(this.setting=b,this.setting.swfHost=this.setting.swfHost||this.setting.staticHost+"flowplayer/core/build1/",this.setting.video=this.setting.video||{autoBuffering:!!this.setting.autoBuffering,autoPlay:!!this.setting.autoPlay,accessToken:"",type:"url"},"undefined"!=typeof this.setting.staticHost&&this.setting.staticHost.indexOf("//s2")>=0){var c=["s21","s22","s23","s24","s25"];this.setting.staticHost=this.setting.staticHost.replace(/\/\/s2\d?./gi,"//"+c[Math.floor(Math.random()*c.length)]+".")}return this.initConfig(a),this.updateConfig(a,this.setting.configs),this.setting.video&&(this.config.obj2.clip.autoPlay="boolean"==typeof this.setting.video.autoPlay?this.setting.video.autoPlay:!0,this.config.obj2.clip.autoBuffering="boolean"==typeof this.setting.video.autoBuffering?this.setting.video.autoBuffering:!0),this.config},c.prototype.updateConfig=function(a,c){var d=this.config.obj1,e=this.config.obj2;if("undefined"!=typeof c&&"undefined"!=typeof c.plugins&&null!=c.plugins){for(var f in c.plugins)!c.plugins[f].url||c.plugins[f].url.indexOf("?")>0||(c.plugins[f].url.indexOf("http://")>-1?c.plugins[f].url=c.plugins[f].url+b:c.plugins[f].url=this.setting.swfHost+c.plugins[f].url+b);e=$.extend(!0,e,c)}this.verify(a,d,e,c)},c.prototype.initConfig=function(c){this.config={obj1:{src:""},obj2:{clip:{id:c&&c.Id?c.Id:0,url:c&&c.DefaultFile?c.DefaultFile.FileName[0]:c,autoPlay:!1,autoBuffering:!0,loading:!1,captionUrl:c&&c.DefaultSubtitle&&c.DefaultSubtitle.Url,quality:c&&c.DefaultFile&&c.DefaultFile.Quality,frontCoverUrl:c&&c.FrontCoverUrl,screenshotInterval:c&&c.ScreenshotInterval,screenshotPath:c.ScreenshotPath,screenshotWidth:c&&c.ScreenshotWidth,screenshotHeight:c&&c.ScreenshotHeight},log:{},i18n:{noFlashPluginMessage:'<p>如果您无法播放视频，请确认您是否安装Flash</p><p><a href="http://get.adobe.com/cn/flashplayer/" target="_blank">点击下载</a>安装最新Flash Player播放器</p>',videoText:"视频",audioText:"音频",resourceStatusEncodingMessage:"抱歉，当前{{videoType}}未转码完成，请稍候再观看。",resourceStatusReadyMessage:"{{videoType}}：已就绪",resourceStatusExpiredMessage:"抱歉，当前{{videoType}}已下线，无法观看。",resourceStatusDeleteMessage:"抱歉，当前{{videoType}}已删除，无法观看。",resourceStatusDefaultMessage:"抱歉，{{videoType}}加载失败，错误码：",resourceLoadFailMessage:"抱歉，视频加载失败，错误码：",play:"播放",pause:"暂停",replay:"重播",volume:"音量",preference:"设置",fullscreen:"全屏",exitFullscreen:"退出全屏幕",coveredTheEntireScreen:"满屏",ad:"广告",second:"秒",sure:"确定",cancel:"取消",language:"语言",subtitles:"字幕",quality:"画质",auto:"自动",notAvailable:"不可选",noUseed:"不使用",ultimateHD:"超清",hd:"高清",sd:"标清",smooth:"流畅",rapidly:"极速",rightAnswerTitle:"恭喜你答对了",examinationQuestions:"检测题",continuePlay:"继续播放",reAnswer:"重新作答",question:"题",total:"共",hasAnswered:"已作答",failAnswerTitle:"很遗憾你答错了，请继续作答",fastreverse:"后退15秒",scale:"画面比例",chinese:"中文",english:"英文",japanese:"日文"},plugins:{flashls:{url:this.setting.swfHost+"flowplayer.flashls-3.2.10.swf",hls_maxbufferlength:30,hls_startfromlevel:0,hls_fragmentloadmaxretry:1,hls_fragmentloadmaxretrytimeout:5e3,hls_manifestloadmaxretry:1,hls_manifestloadmaxretrytimeout:5e3},lighttpd:{url:this.setting.swfHost+"flowplayer.pseudostreaming-3.2.13.swf"+b,id:c&&c.Id?c.Id:0,code:this.setting.video.code?this.setting.video.code:"",playType:this.setting.video.type.toString(),apiHost:c&&c.ApiHost?c.ApiHost:"",accessToken:c&&c.accessToken?c.accessToken:"",hosts:c&&c.Hosts?c.Hosts:[],files:c&&c.Files?c.Files:[],defaultFile:c.DefaultFile},controls:{url:this.setting.swfHost+"flowplayer.controls-3.2.15.swf"+b,margins:[9,10,9,20],height:40,opacity:1,sliderBorder:0,ratio:!0,quality:!0,fastreverse:!1,logo:!0,logourl:"http://s21.tianyuimg.com/typescript/cloud/video/dest/images/101_logo.jpg",backgroundGradient:[0],backgroundColor:"#1E1E1E",bufferColor:"#797979",progressColor:"#EE750A",volumeColor:"#EE750A",timeColor:"#b5b5b5",timeFontSize:14,durationColor:"#737373",dragDirection:"both",autoHide:{fullscreenOnly:!0,hideDelay:2e3,hideProgressBar:!0,hideStyle:"fade"},onClick:function(a){}},toppanel:{url:this.setting.swfHost+"flowplayer.toppanel-3.2.8.swf"+b,top:0,height:30,borderRadius:0,border:0,backgroundColor:"#1E1E1E",opacity:.95,backgroundGradient:[0],left:0,autoHide:{fullscreenOnly:!0,hideDelay:2e3,hideStyle:"fade"},scaleTextColor:"#ffffff",fontColor:"#ee750a"},setpanel:{url:this.setting.swfHost+"flowplayer.setpanel-3.2.8.swf"+b,top:"50%",left:"50%",width:400,height:250,borderRadius:0,border:0,backgroundColor:"#1E1E1E",opacity:.9,backgroundGradient:[0],files:c&&c.Files?c.Files:[],currentFile:c&&c.DefaultFile?c.DefaultFile:{},subTitle:c&&c.SubTitle?c.SubTitle:[],currentSubtitle:c&&c.DefaultSubtitle?c.DefaultSubtitle:{},closeButton:!0,itemTextColor:"#ffffff",selectItemBackgroundColor:"#ee750a",sureButtonBackgroundColor:"#ee750a",sureButtonFontColor:"#ffffff",cancelButtonBackgroundColor:"#ffffff",cancelButtonFontColor:"#000000"},captionsContent:{url:this.setting.swfHost+"flowplayer.content-3.2.9.swf"+b,bottom:52,height:75,zIndex:1,backgroundColor:"transparent",backgroundGradient:"none",border:0,textDecoration:"glow",opacity:1,style:{body:{fontSize:16,fontFamily:"simhei,黑体",textAlign:"center",color:"#ffffff"},p:{leading:2}}},lastPositionContent:{url:this.setting.swfHost+"flowplayer.content-3.2.9.swf"+b,bottom:50,left:0,zIndex:2,border:0,borderRadius:0,textDecoration:"outline",backgroundGradient:"none",height:40,backgroundColor:"transparent",style:{body:{fontSize:16,fontFamily:"simhei,黑体",textAlign:"left",color:"#ffffff",textShadow:"1px 1px 1px #a00,-1px -1px 1px #a00"}}},captions:{url:this.setting.swfHost+"flowplayer.captions-3.2.9.swf"+b,captionTarget:"captionsContent"},poster:{url:this.setting.swfHost+"flowplayer.poster-1.0.0.swf"+b,start:{hideTimer:!1,closeButton:!0,enable:!0,items:[]},pause:{hideTimer:!0,closeButton:!0,enable:!0,items:[]},end:{hideTimer:!0,closeButton:!0,enable:!0,items:[]}}},logo:{url:"http://flash.flowplayer.org/media/img/player/acme.png",fullscreenOnly:!1,opacity:0},contextMenu:[{"华渔未来教育视频播放器 v1.0.6(core-3.2.17)":function(){}},{"下载诊断工具":function(){window.open("http://f11.e.99.com/tools/video/HuayuVideoCheck.exe")}},{"网络诊断分析":function(){var b=a.player.currentClip.innerClip.completeUrl;window.open("hyvideo://url="+encodeURIComponent(b))}}],canvas:{background:"#000000",backgroundGradient:[0]}}}},c.prototype.verify=function(a,c,d,e){"undefined"==typeof this.setting.staticHost||-1==this.setting.staticHost.indexOf("huayu.nd")?(d=$.extend(d,{key:"#$8369a13897007a895dd"}),c=$.extend(c,{src:this.setting.swfHost+"flowplayer.commercial-3.2.16.swf"+b,wmode:"opaque"})):c=$.extend(c,{src:this.setting.swfHost+"flowplayer-3.2.16.swf"+b,wmode:"opaque"});var f="url"==this.setting.video.type?!0:!1;d.plugins.controls.ratio=!f,d.plugins.controls.quality=!f,f&&(d.plugins.setpanel=null),(a&&"undefined"==typeof a.SubTitle||0==a.SubTitle.length)&&(d.plugins.captionsContent=null,d.plugins.captions=null),this.audioCheck(a,d),this.posterCheck(d,e)},c.prototype.audioCheck=function(a,c){var d="";"string"==typeof a&&a.indexOf(".mp3")<0?c=$.extend(!0,c,{clip:{url:a,provider:"lighttpd",autoPlay:!1,autoBuffering:!0},plugins:{tybitrateselect:null}}):"string"==typeof a&&a.indexOf(".mp3")>=0?(d=this.setting.swfHost+"audio.jpg",c=$.extend(!0,c,{clip:{coverImage:{url:d,scaling:"orig",provider:"audio"}},plugins:{audio:{url:this.setting.swfHost+"flowplayer.audio-3.2.10.swf"+b},tybitrateselect:null,scale:null,lighttpd:null,toppanel:null}})):0!=a.VideoType&&2!=a.VideoType||null==a.M3U8S||!this.setting.video.enableM3U8?0==a.VideoType||2==a.VideoType||"undefined"==typeof a.VideoType?c=$.extend(!0,c,{clip:{provider:"lighttpd",urlResolvers:null}}):1==a.VideoType&&(d="undefined"!=typeof a.FrontCoverUrl&&a.FrontCoverUrl.length>0&&(a.FrontCoverUrl.toLowerCase().indexOf(".jpg")>=0||a.FrontCoverUrl.toLowerCase().indexOf(".png")>=0)?a.FrontCoverUrl:this.setting.swfHost+"audio.jpg",c=$.extend(!0,c,{clip:{coverImage:{url:d,scaling:"orig",provider:"audio"}},plugins:{audio:{url:this.setting.swfHost+"flowplayer.audio-3.2.10.swf"+b},tybitrateselect:null,scale:null,lighttpd:null,toppanel:null}})):(c=$.extend(!0,c,{clip:{url:this.setting.apiHost+a.M3U8S[0],provider:"flashls",urlResolvers:"flashls",m3u8Files:a.M3U8S}}),"number"==typeof this.setting.video.quality&&(c=$.extend(!0,c,{plugins:{flashls:{hls_playlevel:this.setting.video.quality}}})))},c.prototype.posterCheck=function(a,b){if("undefined"==typeof b||"undefined"==typeof b.plugins||null==b.plugins||!b.plugins.poster)return void(a.plugins.poster=null);if(a.plugins.poster.start&&a.plugins.poster.start.items){var c=a.plugins.poster.start.items,d=[],e=0;for(c.length;e<c.length;e++)"video"==c[e].type&&"number"==typeof c[e].duration&&c[e].duration>0&&d.push(c[e]);a.plugins.poster.start.items=d,a.plugins.poster.start.hideTimer=!1}a.plugins.poster.pause&&a.plugins.poster.pause.items.length>1&&(a.plugins.poster.pause.items=a.plugins.poster.pause.items.slice(0,1),a.plugins.poster.pause.closeButton=!0),a.plugins.poster.end&&a.plugins.poster.end.items.length>1&&(a.plugins.poster.end.items=a.plugins.poster.end.items.slice(0,1),a.plugins.poster.end.closeButton=!0)},c}();a.PlayerSetting=c}(Video||(Video={}));var Video;!function(a){var b=function(){function b(c,d){if(void 0===d&&(d=null),this.setting=d,this.flashHelp=null,this.player=null,"string"==typeof c)this.element=c;else{var e=c.id;e||(c.id=e="fp_"+b.uuid()),this.element=e}return this.flashHelp=new a.FlashHelper(this.element,this.setting),this.flashHelp.hasFlash||this.setting.enableHtml5?(!this.flashHelp.hasFlash&&this.setting.enableHtml5&&this.flashHelp.supportVideo?this.player=new a.Html5player(this.element,d):this.flashHelp.hasFlash?(this.setting.enableHtml5=!1,this.player=new a.Flowplayer(this.element,d)):this.flashHelp.show(),this.player):void 0}return b.uuid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}}(),b}();a.Player=b}(Video||(Video={}));
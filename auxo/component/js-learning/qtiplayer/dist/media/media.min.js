!function(e,t){var i=function(){"use strict";var i="undefined";typeof String.prototype.trim===i&&(String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")}),typeof Array.prototype.forEach===i&&(Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++){var i=this[t];e.apply(this,[i,t,this])}});var n=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?(t="on"+t,e.attachEvent(t,i)):e["on"+t]=i},o=function(e,t,i,n){e.removeEventListener?e.removeEventListener(t,i,n):e.detachEvent&&(t="on"+t,e.detachEvent(t,i))},a=function(e,i){var n=e.style[i];return n?n:e.currentStyle?e.currentStyle[i]:t.defaultView.getComputedStyle(e,"")[i]},r=function(e,n){return typeof e!==i&&null!=e?("string"==typeof n&&(e=n+" "+e),typeof n!==i&&null!==e&&n!==t.body||(n=t),this._selector="object"==typeof e?e:e.trim(),this._dom=[],this.length=0,"object"==typeof e?(this._dom[0]=e,this.length=1):"#"===this._selector.substring(0,1)&&this._selector.indexOf(" ")<=-1?(this._dom[0]=t.getElementById(this._selector.substring(1,this._selector.length)),this._dom[0]&&(this.length=1)):(this._dom=n.querySelectorAll(this._selector),this.length=this._dom.length),this):void 0};r.prototype={each:function(e){if(this.length>0)for(var t=0;t<this.length;t++){var i=this._dom[t];!function(){e.apply(i,[t])}(t)}},get:function(e){return this._dom[e]},show:function(){this.each(function(){this.style.display="block"})},hide:function(){this.each(function(){this.style.display="none"})},isShow:function(){return"block"===this.css("display")},toggle:function(){this.each(function(){"block"===a(this,"display")?this.style.display="none":this.style.display="block"})},css:function(e,t){return typeof t===i?a(this._dom[0],e):void this.each(function(){this.style[e]=t})},find:function(e){return s(e,this._dom[0])},bind:function(e,t){this.on(e,"",t)},addClass:function(e){return e=e.trim(),this.each(function(){for(var t=this.getAttribute("class"),i=null!=t?t.split(" "):"",n=e,o=0;o<i.length;o++){var a=i[o].trim();a!==e&&""!==a&&(n+=" "+a)}this.setAttribute("class",n)}),this},hasClass:function(e){e=e.trim();var t=!1;return this.each(function(){for(var i=this.getAttribute("class"),n=null!=i?i.split(" "):"",o=0;o<n.length;o++)if(n[o].trim()===e){t=!0;break}}),t},removeClass:function(e){e=e.trim(),this.each(function(){for(var t=this.getAttribute("class"),i=null!=t?t.split(" "):"",n="",o=0;o<i.length;o++){var a=i[o].trim();a!==e&&""!==a&&(n+=" "+a)}this.setAttribute("class",n)})},toggleClass:function(e){this.each(function(){for(var t=this.getAttribute("class").split(" "),i="",n=!1,o=0;o<t.length;o++){var a=t[o].trim();""!==a&&(a!==e?i+=" "+a:n=!0)}n||(i+=" "+e),this.setAttribute("class",i)})},attr:function(e,t){return"undefined"!=typeof t?(this.each(function(){"undefined"!=typeof t&&this.setAttribute(e,t)}),this):this._dom[0].getAttribute(e)},removeAttr:function(e){this.each(function(){if(e instanceof Array)for(var t=0;t<e.length;t++)this.removeAttribute(e[t]);else this.removeAttribute(e)})},text:function(e){if("undefined"==typeof e)throw new Error("only support set text");this.each(function(){this.innerText=e})},width:function(){if(arguments.length>0)throw new Error("only support get");var e=this._dom[0].offsetWidth;return e||(e=parseInt(this.css("width"))),e},height:function(){if(arguments.length>0)throw new Error("only support get");var e=this._dom[0].offsetHeight;return e||(e=parseInt(this.css("height"))),e},offset:function(){var e,t,i={top:0,left:0},n=this._dom[0],o=n&&n.ownerDocument;if(o)return e=o.documentElement,"undefined"!=typeof n.getBoundingClientRect&&(i=n.getBoundingClientRect()),t=o==o.window?o:9===o.nodeType?o.defaultView||o.parentWindow:!1,{top:i.top+(t.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(t.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}},on:function(e,t,o){var a=this;"function"==typeof t&&(o=t,t=""),e.split(" ").forEach(function(e){if(""!==e.trim()){var r=e.split(".")[0];if("click"===e.split(".")[0]&&s.support.touch||"qpTap"===r)return void s.event.qpTap(typeof t!==i&&""!==t?a.find(t):a,o);"still-click"===r&&(r="click"),typeof t!==i&&""!==t?a.find(t).each(function(){n(this,r,o)}):a.each(function(){n(this,r,o)})}})},off:function(e,t,n){var a=this;"function"==typeof t&&(n=t,t=""),e.split(" ").forEach(function(e){""!==e.trim()&&(typeof t!==i&&""!==t?a.find(t).each(function(){o(this,e.split(".")[0],n,!1)}):a.each(function(){o(this,e.split(".")[0],n,!1)}))})},before:function(e){if("string"==typeof e){var i=s(t.createElement("div"));i.html(e),this._dom[0].parentNode.appendChild(i.get(0));for(var n=i.get(0).children,o=n.length,a=0;n.length>0&&("object"==typeof n[0]&&this.before(n[0]),a++,!(a>=o)););i.remove()}else this._dom[0].parentNode.insertBefore(e,this._dom[0])},appendChild:function(e){this.each(function(){this.appendChild(e)})},html:function(e){return typeof e===i?this._dom[0].innerHTML:void(this._dom[0].innerHTML=e)},remove:function(){this._dom[0].parentNode&&this._dom[0].parentNode.removeChild(this._dom[0])},closest:function(e){if(e=e.trim(),"."!==e.substring(0,1)||e.indexOf(" ")>-1)throw new Error("only support simple class selector ");var t;for(t=this._dom[0];t&&"undefined"!=typeof t&&"body"!==t.nodeName.toLocaleLowerCase();t=t.parentNode)if(t.nodeType<11&&1===t.nodeType&&new s(t).hasClass(e.substring(1,e.length)))return s(t)},contains:function(e){var t=this._dom[0];return t.contains?t!==e&&t.contains(e):!!(16&t.compareDocumentPosition(e))},data:function(e,t){var i=this.attr("data-id");return"undefined"!=typeof i&&null!==i||(i=s.utils.getRandomId("media"),this.attr("data-id",i)),"undefined"==typeof t?"undefined"==typeof s.cache[i+e]?"":s.cache[i+e]:void(null===t?delete s.cache[i+e]:s.cache[i+e]=t)}};var s=function(e,t){return new r(e,t)};s.noop=function(){},s.fn=function(e,t){r.prototype[e]=t},s.utils={},s.support={},s.event={},s.support.isMobile=function(){return!!navigator.userAgent.match(/Android|iPhone|iPad|iPod|BlackBerry|IEMobile/i)}(),s.support.isiOS=!!navigator.userAgent.match(/iPhone|iPad|iPod/i),s.support.touch=function(){return typeof navigator===i?!1:!!("ontouchend"in t&&s.support.isMobile)}(),s.event.checkHover=function(){var t=function(t){return t||e.event},i=function(e,t){return e.contains?e!==t&&e.contains(t):!!(16&e.compareDocumentPosition(t))};return function(e,n){return"mouseover"===t(e).type||"mousemove"===t(e).type?!i(n,t(e).relatedTarget||t(e).fromElement)&&(t(e).relatedTarget||t(e).fromElement)!==n:!i(n,t(e).relatedTarget||t(e).toElement)&&(t(e).relatedTarget||t(e).toElement)!==n}}(),s.event.isWhitePad=function(e){return!(!e.sourceCapabilities||!e.sourceCapabilities.firesTouchEvents)},s.event.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.returnValue=!1},s.event.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},s.utils.getRandomId=function(e){return e+(10*Math.random()+(new Date).getMilliseconds()).toString().replace(".","")},s.utils.resize=function(e,t,i,n,o,a){var r=e,s=t,d=1;return o>e&&(d=(o/e).toFixed(3),s=parseInt(d*t),r=o),a>s&&(d=(a/t).toFixed(3),r=parseInt(d*e),s=a),i>0&&r>i&&(d=(i/e).toFixed(3),s=parseInt(d*t),r=i),n>0&&s>n&&(d=(n/t).toFixed(3),r=parseInt(d*e),s=n),{w:r,h:s,scale:d}},s.utils.getRequest=function(){var e=location.search,t={};e=e.substr(1,e.length);for(var i=e.split("&"),n=0;n<i.length;n++){var o=i[n],a=o.split("="),r=a[0];if(r){var s=decodeURIComponent(a[1]);t[r]=s}}var d=function(e){return t[e]||""};return d.get=function(){return t},d}(),s.utils.getBasePath=function(e){var t=e.lastIndexOf("#");-1==t&&(t=e.length);var i=e.indexOf("?");-1==i&&(i=e.length);var n=e.lastIndexOf("/",Math.min(i,t));return n>=0?e.substring(0,n+1):""},s.extend=function(){var e,t,i,n,o,a,r=arguments[0]||{},s=1,d=arguments.length,l=!1;for("boolean"==typeof r&&(l=r,r=arguments[1]||{},s=2),"object"==typeof r||jQuery.isFunction(r)||(r={}),d===s&&(r=this,--s);d>s;s++)if(null!=(o=arguments[s]))for(n in o)e=r[n],i=o[n],r!==i&&(l&&i&&(jQuery.isPlainObject(i)||(t=jQuery.isArray(i)))?(t?(t=!1,a=e&&jQuery.isArray(e)?e:[]):a=e&&jQuery.isPlainObject(e)?e:{},r[n]=jQuery.extend(l,a,i)):void 0!==i&&(r[n]=i));return r},s.cache={},s.browser={};var d=function(e){var t=e.toLowerCase(),i=/(webkit)[ \/]([\w.]+)/,n=/(opera)(?:.*version)?[ \/]([\w.]+)/,o=/(msie) ([\w.]+)/,a=/(mozilla)(?:.*? rv:([\w.]+))?/,r=i.exec(t)||n.exec(t)||o.exec(t)||t.indexOf("compatible")<0&&a.exec(t)||[];return{browser:r[1]||"",version:r[2]||"0"}};if(typeof navigator!==i){var l=d(navigator.userAgent);l.browser&&(s.browser[l.browser]=!0,s.browser.version=l.version),s.browser.crosswalk=/(crosswalk)/.test(navigator.userAgent.toLowerCase())}return s.Native={},s.Controller={},s.View={},s.Model={},"object"==typeof module&&module&&"object"==typeof module.exports&&(module.exports=s),s}();i.logger=function(t){"use strict";for(var i=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],n=i.length,o=e.console=e.console||{},a=null;n--;)a=i[n],o[a]||(o[a]=t.noop);var r={_level:0,_console:o,setLevel:function(e){switch(e){case"debug":this._level=3;break;case"info":this._level=2;break;case"warn":this._level=1;break;case"error":this._level=0;break;default:this._level=-1}},debug:function(){this._level>=3&&this._console.log.apply(this._console,arguments)},info:function(e){this._level>=2&&this._console.info.apply(this._console,arguments)},warn:function(e){this._level>=1&&this._console.warn.apply(this._console,arguments)},error:function(e){this._level>=0&&this._console.error.apply(this._console,arguments)}};return r}(i),i.event.qpTap=function(){var e={};return i.support.touch?(e.mouseDown="touchstart",e.mouseUp="touchend",e.mouseCancel="touchcancel",e.getEventX=function(e){return e.changedTouches[0].clientX},e.getEventY=function(e){return e.changedTouches[0].clientY}):(e.mouseDown="mousedown",e.mouseUp="mouseup",e.mouseCancel="mouseleave",e.getEventX=function(e){return e.clientX},e.getEventY=function(e){return e.clientY}),function(t,n){var o=t,a=e.mouseDown,r=e.mouseUp,s=e.mouseCancel,d=0,l=0,u=0,p=function(t){0===t.which&&1===t.which||(d=(new Date).getTime(),l=e.getEventX(t),u=e.getEventY(t));var a=function(t){if(0!==t.which||1!==t.which){var h=(new Date).getTime(),c=e.getEventX(t),m=e.getEventY(t),g=h-d,v=Math.abs(c-l),f=Math.abs(m-u);i.logger.debug("tap-holdtime",g),350>=g&&5>v&&5>f&&n(t)}o.off(r,"",a),o.off(s,"",p)};o.on(r,"",a);var p=function(e){o.off(r,"",a),o.off(s,"",p)};o.on(s,"",p)};o.on(a,"",p)}}(),function(e,t){"user strict";t.Class={},"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),t.Class.Create=function(){return Object.create(t.Class.ClassUtils)},t.Class.ClassUtils={include:function(e){for(var t in e)this[t]=e[t]},extend:function(e){var t=Object.hasOwnProperty,i=Object.create(this);for(var n in e)(t.call(e,n)||"undefined"==typeof i[n])&&(i[n]=e[n]);return i},proxy:function(e){var t=this;return function(){return e.apply(t,arguments)}},proxyAll:function(e){for(var t=0;t<e.length;t++)this[e[t]]=this.proxy(this[e[t]])}}}(e,i);var n={trigger:function(){var e=Array.prototype.slice.apply(arguments,[0]),t=e.shift();return this._eventHandler&&this._eventHandler[t]?(this._eventHandler[t].apply(this,e),!0):!1},bind:function(e,t){if(!this._keys||this._keys.indexOf(e)<=-1)throw new Error("js/events :can not bind undeclared key ："+e);return this._eventHandler||(this._eventHandler={}),this._eventHandler[e]=t,!0},unBind:function(e){delete this._eventHandler[e]},canBindKey:function(e){this._keys=e}};i.Native.InteractAppApi=function(e){var t="undefined"!=typeof AndroidInterface,i="undefined"!=typeof Bridge&&Bridge&&Bridge.callNative,n=t&&i;e.Native.isInteractApp=n;var o="STUDENT",a="TEACHER",r=!1,s=!1,d=!1,l=null,u=function(e,t){return Bridge.callNative("com.nd.pad.icr.ui.IcrJsBridge",e,t||{})},p=function(){if(n&&!l){var e=u("getCurrentUserInfo",{});e&&(l=e,r=e.userType===o,s=e.userType===a,d=e.isProjector)}},h=function(t){if(n)if(p(),s&&!d){var i=u("setNativeModuleVisibility",{items:[{moduleId:"toolBar",visible:t},{moduleId:"exit",visible:t},{moduleId:"exam",visible:t},{moduleId:"roster",visible:t}]});e.logger.debug(i)}else if(r){var i=u("setPresenterVisibility",{instanceId:"studentDraft",visible:t});u("setStudentNativeModuleVisibility",{items:[{moduleId:"draftButton",visible:t},{moduleId:"handWriteToolbar",visible:t}]}),e.logger.debug(i)}},c=function(t){if(n&&(p(),r)){var i=u("setPresenterVisibility",{instanceId:"studentDraft",visible:t});u("setStudentNativeModuleVisibility",{items:[{moduleId:"draftButton",visible:t},{moduleId:"handWriteToolbar",visible:t}]}),e.logger.debug(i)}};return{setNativeModuleVisibility:h,setViewerModuleVisibility:c}}(i),i.lang=function(){var e={media_img_still_loading:"画像読み込み中",media_img_tip:"クリックして画像を見る",media_video_fullscreen:"全画面",media_video_exit_fullscreen:"全画面解除",media_video_not_support_fullscreen:"全画面再生できない"},t={media_img_still_loading:"图片还在加载中",media_img_tip:"点击查看图片",media_video_fullscreen:"全屏",media_video_exit_fullscreen:"退出全屏",media_video_not_support_fullscreen:"不支持全屏播放"},i={zh:t,zh_CN:t,en:{media_img_still_loading:"Image loading...",media_img_tip:"Click to view images",media_video_fullscreen:"Full Screen",media_video_exit_fullscreen:"Exit",media_video_not_support_fullscreen:"Full-screen view is not supported"},ja:e,ja_JP:e};return{getLangText:function(e,t,n){var o=i[e]?i[e]:i.zh,a=o[t]||"";return a}}}(),i.Controller.MediaPlayer=function(e,i){var o=i.Class.Create();return o.include(n),o.include({create:function(e,t,n){var o=Object.create(this);o.timeFormat="0:00",o.$container=e,o.mouseMoveCount=0,o.options=t,o._mediaModel=i.Model.MediaModel.create(e.find(n));var a=["playPause","_progress","_progressMouseup","_volumeToggle","_volumeProgress","_volumeProgressMouseup","_volumeMutedToggle","_volumeShow","_volumeHide"];return o.proxyAll(a),o.canBindKey(["playTrigger","ended","pause","unBind","volumeToggle"]),o},getMediaModel:function(){return this._mediaModel},__Q:function(e){return this.$container.find(e)},baseInit:function(){var e=this.getMediaModel().getQMedia();this.getMediaModel().setPreLoad(this.options.mediaPreload?"auto":"none"),e.removeAttr("controls"),this._iePreloadNone()&&(e.attr("data-src",e.attr("src")),e.removeAttr("src")),this._findElement(),this._eventModel=i.Model.MediaEvent.create(this._mediaModel,this.options),this._mediaEventHandler(),this._toolBarEvent(!0),i.support.isiOS&&(this._$volumeIconContainer.hide(),this.__Q(".qp-time-base").css("right","12px"))},_toolBarEvent:function(e){var n=this;e=e?"on":"off",n._$play[e]("click",n.playPause),n._updateVolumeEntryView(n.getMediaModel().getVolume(),!1),n._$mediaBox[e]("click",function(e){i.event.stopPropagation(e)}),n._$progress[e]("touchstart mousedown",n._progress),n._$progress[e]("touchend touchcancel mouseup",n._progressMouseup),n._$volumeControl[e]("mousedown touchstart",n._volumeProgress),n._$volumeControl[e]("mouseup touchend touchcancel",n._volumeProgressMouseup),n._$volumeIconContainer[e]("mouseout mouseleave",n._volumeHide),i.support.touch?n._$volumeIcon[e]("click",n._volumeToggle):("ontouchend"in t?n._$volumeIcon[e]("click",n._volumeToggle):n._$volumeIcon[e]("click",n._volumeMutedToggle),n._$volumeIconContainer[e]("mouseover",n._volumeShow))},_iePreloadNone:function(){return!(this.options.mediaPreload||!i.browser.msie)},iePreloadResetSrc:function(){if(this._iePreloadNone()&&!this._resetSrc){this._resetSrc=!0;var e=this.getMediaModel().getQMedia();e.attr("src",e.attr("data-src"))}},_findElement:function(){var e=this,t={_$loading:'[data-oper="loading"]',_$play:'.qp-media-toolbar [data-oper="play"]',_$playInBody:'.qp-media-box>[data-oper="play"]',_$endTime:'[data-oper="endTime"]',_$currentTime:'[data-oper="curentTime"]',_$downedBar:'[data-oper="downed-bar"]',_$playedBar:'[data-oper="played-bar"]',_$progress:'[data-oper="progress"]',_$volumeIconContainer:'[data-oper="volume-icon-container"]',_$volumeIcon:'[data-oper="volume-icon"]',_$volumeControl:'[data-oper="volume-control"]',_$volumeBarContainer:'[data-oper="volume-bar-container"]',_$volumeBarR:'[data-oper="volume-bar-r"]',_$volumeBarS:'[data-oper="volume-bar-s"]',_$toolbar:'[data-oper="toolbar"]',_$mediaBox:'[data-oper="media-box"]',_$mediaDisable:'[data-oper="media-disable"]'};for(var i in t)e[i]=e.__Q(t[i])},clear:function(){try{this._mediaModel.load(),this._eventModel.mediaEventListener(!1),this.trigger("unBind")}catch(e){i.logger.debug("clear",e)}},unBind:function(){try{this._eventModel.mediaEventListener(!1),this.trigger("unBind")}catch(e){i.logger.debug("unbind",e)}},destroy:function(){this.unBind()},reset:function(){this.pause()},setLock:function(e){this.options.lock=e,e?this._$mediaDisable.show():this._$mediaDisable.hide()},isLock:function(){return this.options.lock},changeVolume:function(e,t){this._mediaModel.setVolume(e),t?(this._$volumeControl.show(),this.trigger("volumeToggle",!0)):(this._$volumeControl.hide(),this.trigger("volumeToggle",!1))},hideVolumeControl:function(){this._$volumeControl.isShow()&&(this._$volumeControl.hide(),this.trigger("volumeToggle",!1),this._eventModel.volumeChangeEvent(!1))},isPlaying:function(){return this._mediaModel.isPlaying()},playPause:function(e){this.trigger("playTrigger"),this.iePreloadResetSrc();var t=this._mediaModel.getMedia();t.paused?(this._$play.addClass("qp-btn-stop"),this._$playInBody.addClass("qp-btn-stop"),t.play()):(this._$play.removeClass("qp-btn-stop"),this._$playInBody.removeClass("qp-btn-stop"),t.pause())},pause:function(){var e=this._mediaModel.getMedia();this.options.renderUI&&(this._$play.removeClass("qp-btn-stop"),this._$playInBody.removeClass("qp-btn-stop")),e&&!e.paused&&e.pause()},play:function(e){this.trigger("playTrigger",e),this.iePreloadResetSrc();var t=this._mediaModel.getMedia();this.options.renderUI&&(this._$play.addClass("qp-btn-stop"),this._$playInBody.addClass("qp-btn-stop")),t&&t.paused&&t.play()},_mediaEventHandler:function(){var e=this;if(e.options.renderUI){var t={playing:function(){e.trigger("playTrigger"),e.iePreloadResetSrc(),e._$play.addClass("qp-btn-stop"),e._$playInBody.addClass("qp-btn-stop")},pause:function(){e.trigger("pause"),e._$play.removeClass("qp-btn-stop"),e._$playInBody.removeClass("qp-btn-stop")},ended:function(){e.trigger("ended"),e._$play.removeClass("qp-btn-stop"),e._$playInBody.removeClass("qp-btn-stop"),e._$loading.hide(),e._$currentTime.text(e.timeFormat),e._$playedBar.css("width","0%"),e._$downedBar.css("width","0%")},timeupdate:function(){return e._mediaModel.getReadyState()<3?!1:(e._$loading.hide(),e._updateEndTime(),e._updateVideoData(),void e._updateCurrentTime())},volumechange:function(){e._updateVolumeEntryView(e._mediaModel.getVolume(),!0)},progress:function(){for(var t=e._mediaModel.getCurrentTime(),i=e._mediaModel.getDuration(),n=e._mediaModel.getBuffered(),o=0,a=0;a<n.length;a++){var r=n.end(a);r>t&&(o?o>r&&(o=r):o=r)}o||(o=t);var s=o/i*100;s>100&&(s=0),e._$downedBar.css("width",s+"%"),e._updateEndTime()},waiting:function(){e._$loading.show()},error:function(e){},loadedmetadata:function(){e._updateEndTime()},play:function(){e._mediaModel.getCurrentTime()<=0&&e._$loading.show()},durationchange:function(){var t=e._mediaModel.getDuration();1>t&&t>0&&(e.timeFormat="0:00.00",e._$currentTime.text(e.timeFormat)),e._updateEndTime()}};for(var i in t)this._eventModel.bind(i,t[i])}},_updateEndTime:function(){var e=this._mediaModel.getDuration();e>0&&(!this.durationInit||this.durationInitDuration!==e)&&(e>=3600||1>e?this._$toolbar.addClass("qp-progress-long"):this._$toolbar.removeClass("qp-progress-long"),this._$endTime.text(this._formatTime(e)),this.durationInit=!0,this.durationInitDuration=e)},_progress:function(e){var t=this._$progress,n=this._mediaModel.getMedia();if(t.length>0){var o=this;e&&o._coordinate(e)&&o._seekTo(o._coordinate(e).pageX,t,n,!0);var a=function(e){e&&i.event.preventDefault(e),o._seekTo(o._coordinate(e).pageX,t,n)};t.on("mousemove  touchmove","",a);var r=function(e){i.event.preventDefault(e),i.event.stopPropagation(e),t.off("mousemove touchmove","",a),t.off("mouseup mouseleave touchend touchcancel","",r)};t.on("mouseup mouseleave touchend touchcancel","",r)}},_progressMouseup:function(e){var t=this._$progress,i=this._mediaModel.getMedia(),n=this;n._seekTo(n._coordinate(e).pageX,t,i,!0)},_updateVolumeEntryView:function(e,t){var i=this,n=this._mediaModel.getMuted();i._$volumeBarR.css("bottom",parseInt(n?0:100*e)+"%"),i._$volumeBarS.css("height",(0===parseInt(n?0:100*e)?.5:parseInt(n?0:100*e))+"%"),0===e||n?i._$volumeIcon.addClass("qp-btn-volume-no"):i._$volumeIcon.removeClass("qp-btn-volume-no")},_volumeToggle:function(e){var t=this;if(this._volumeClick=!0,setTimeout(function(){t._volumeClick=!1},100),e.srcElement){var n=i(e.srcElement).closest(".qp_video-progress-box");if(n&&n.get(0)===this._$volumeControl.get(0))return}this._$volumeControl.toggle();var o=this._$volumeControl.isShow();this.trigger("volumeToggle",o),this._eventModel.volumeChangeEvent(o)},_volumeMutedToggle:function(e){this._mediaModel.setMuted(!this._mediaModel.getMuted()),this._updateVolumeEntryView(this._mediaModel.getVolume())},_volumeShow:function(e){if(i.event.checkHover(e,this._$volumeIconContainer.get(0))){if(e&&"mouseover"===e.type&&e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents)return;this._$volumeControl.show(),this.trigger("volumeToggle",!0),this._eventModel.volumeChangeEvent(!0)}},_volumeHide:function(e){i.event.checkHover(e,this._$volumeIconContainer.get(0))&&(this._$volumeControl.hide(),this.trigger("volumeToggle",!1),this._eventModel.volumeChangeEvent(!1))},_volumeProgress:function(e){if(!this._volumeClick){var t=this._$volumeControl,n=this._mediaModel.getMedia();if(t.length>0){var o=this;o.volumeUp=!1,this._mediaModel.setMuted(!1),o._coordinate(e)&&o._volumeSeekTo(o._coordinate(e).pageY,n,!0);var a=function(e){i.event.preventDefault(e),o._coordinate(e)&&o._volumeSeekTo(o._coordinate(e).pageY,n)};t.on("mousemove  touchmove","",a);var r=function(e){i.event.preventDefault(e),o.volumeUp=!0,t.off("mousemove touchmove","",a),t.off("mouseup mouseleave touchend touchcancel","",r)};t.on("mouseup mouseleave touchend touchcancel","",r)}}},_volumeProgressMouseup:function(e){if(!this._volumeClick){var t=this._mediaModel.getMedia();this.volumeUp=!0,this._eventModel.volumeChangeEvent(!0,!0);var i=this;i._coordinate(e)&&i._volumeSeekTo(i._coordinate(e).pageY,t)}},_updateCurrentTime:function(){var e=this._mediaModel.getCurrentTime();this._$currentTime.html(this._formatTime(e))},_updateVideoData:function(){var e=this._mediaModel.getCurrentTime(),t=this._mediaModel.getDuration(),i=this._$playedBar;if(.01===e)i.css("width","0%");else{var n=100*e/t;i.css("width",n+"%")}},_seekTo:function(e,t,i,n){var o=this._mediaModel.getDuration();if(o>0){var a=this._$playedBar,r=Math.max(0,Math.min(1,(e-t.offset().left/this.getScale())/t.width())),s=r*o;this.mouseMoveCount++,(this.mouseMoveCount%10===0||n)&&s>=0&&this._mediaModel.setCurrentTime(s);var d=Math.round(r*t.width());a.css("width",d+"px"),this._updateCurrentTime()}},_volumeSeekTo:function(e){var t=this._$volumeBarContainer,i=Math.max(0,Math.min(1,(e-t.offset().top/this.getScale())/t.height()));this._mediaModel.setVolume(1-i)},_coordinate:function(e){var t={},i=this.getScale();switch(e.type){case"touchstart":case"touchmove":case"touchend":case"touchcancel":return t.pageX=(e.changedTouches[0].pageX||e.touches[0].pageX)/i,t.pageY=(e.changedTouches[0].pageY||e.touches[0].pageY)/i,t;default:return t.pageX=e.pageX/i,t.pageY=e.pageY/i,t}},_formatTime:function(e){var t=Math.floor(e/3600),i=Math.floor(e/60)%60,n=Math.floor(e-60*i-60*t*60);60===n&&(n=0,i+=1),10>n&&(n="0"+n);var o=this._mediaModel.getDuration();return o>0&&1>o?i+":"+n+"."+e.toFixed(2).split(".")[1]:t>0?t+":"+i+":"+n:i+":"+n},getScale:function(){return this.scaleX=this.$container.get(0).getBoundingClientRect().width/this.$container.get(0).offsetWidth||1,this.scaleX},mediaPlay:function(e){this.play()},mediaPause:function(e){this.pause()},mediaSkip:function(e){this._mediaModel.setCurrentTime(0===e?.01:e)},mediaVolumeChange:function(e,t){this.changeVolume(e,t)}}),o}(e,i),function(e,t){function i(e){return e=e||{},this.each(function(){var i=t(this),n=i.data("my.mediaplayer"),a=t.extend({},i.data()||{},"object"==typeof e&&e);n||(n=o.create(i,a),i.data("my.mediaplayer",n))})}var n={onEnd:!1,onPause:!1,lang:"zh",onPlay:!1,onSeek:!1,onVolumeChange:!1,onTimeUpdate:!1,onlyRender:!1,renderUI:!0,audio:{width:0,height:0}},o=t.Controller.MediaPlayer.extend({create:function(e,i){var o=t.Controller.MediaPlayer.create.apply(this,[e,t.extend({},n,i),"audio"]);if(o.options=t.extend({},n,i),o.options.renderUI){var a=["_playTriggerHandler","_endedHandler"];o.proxyAll(a),o._init(),o.options.onlyRender===!1&&o.start(),o.bind("playTrigger",o._playTriggerHandler),o.bind("ended",o._endedHandler)}return o},_resizeMap:{"qp-media-box-mini":function(e,t){return 200>=e||60>=t},"qp-media-box-min-height":function(e,t){return 180>=t&&t>125},"qp-media-box-min-height-audio-s":function(e,t){return 125>=t&&t>60},"qp-media-box-max-hd":function(e,t){return e>360&&t>270}},_playTriggerHandler:function(){},_endedHandler:function(){},start:function(){var e=this;e.started||(e.started=!0,this.baseInit(),this._controlEvent(!0))},_init:function(){var e=this.getMediaModel().getQMedia();try{if(e.before(t.View.audioHtml),this.__Q('[data-oper="loading"] ').before(e.get(0)),this._$qpVideoWrap=this.__Q(".qp-video-videowrap"),this._$qpMediaIcon=this.__Q(".qp-media-icons-right"),this.options.autoAdaptSize){var i=this.options.audio.width,n=this.options.audio.height;i&&n&&this.resizeMedia(i,n)}}catch(o){throw new Error("createHtml unknow error:"+o.message)}},resizeMedia:function(e,t){this._$mediaBox||(this._$mediaBox=this.__Q(".qp-media-box"));var i=e,n=t,o=!1;for(var a in this._resizeMap)this._resizeMap[a](e,t)?(o?this._$mediaBox.removeClass(a):this._$mediaBox.addClass(a),o||"qp-media-box-mini"===a&&(this._$mediaBox.addClass(a),o=!0,i=0,n=0),"qp-media-box-min-height-audio-s"===a&&(n=40)):this._$mediaBox.removeClass(a);this._$mediaBox.css("width",i+"px"),this._$mediaBox.css("height",n+"px")},_controlEvent:function(e){var t=this;e=e?"on":"off",t._$playInBody[e]("click",t.playPause)}});t.fn("audioplayer",i)}(e,i),function(e,t){function i(e){return e=e||{},this.each(function(){var i=t(this),n=i.data("my.mediaplayer"),a=t.extend({},i.data()||{},"object"==typeof e&&e);n||(n=o.create(i,a),i.data("my.mediaplayer",n))})}var n={renderUI:!0,lang:"zh",img:{renderImmediately:!1,src:"",width:0,height:0},onlyRender:!1},o=t.Class.Create();o.include({create:function(e,i){var o=Object.create(this);o.$container=e;var a={src:i.img.src?i.img.src:e.find("img").attr("src"),width:0,height:0};o.imgData=a,o.options=t.extend({},n,i),o.options.autoAdaptSize&&o.options.img.width&&o.options.img.height&&(o.options.img.width<o._minRenderWidth&&(o.options.img.width=o._minRenderWidth),o.options.img.height<o._minRenderHeight&&(o.options.img.height=o._minRenderHeight)),o.viewer=null;var r=["_createViewer"];return o.proxyAll(r),o._init(),o},__Q:function(e){return this.$container.find(e)},_defaultRenderHeight:180,_defaultRenderWidth:260,_minRenderHeight:100,_minRenderWidth:130,_loadImg:function(e){var t=this,i=new Image;i.src=t.imgData.src,i.complete?(t.imgData.width=i.width,t.imgData.height=i.height,e&&e()):i.onload=function(){t.imgData.width=i.width,t.imgData.height=i.height,e&&e(),i.onload=null}},_init:function(){var e=this;if(e.options.renderUI)e.options.img.renderImmediately?(e._createHtml(),e._loadImg(),e._controlEvent()):e._loadImg(function(){var t=!1;e.options.autoAdaptSize&&e.options.img.width&&e.options.img.height&&(e.imgData.width>e.options.img.width||e.imgData.height>e.options.img.height)?t=!0:(e.imgData.width>e._defaultRenderWidth||e.imgData.height>e._defaultRenderHeight)&&(t=!0),t&&(e._createHtml(),e._controlEvent())});else{e._loadImg();var t=this.__Q("img");t.on("qpTap",function(t){e.imgData.width&&e._createViewer()})}},start:function(){this.options.onlyRender=!1},_createHtml:function(){var e=this.__Q("img");e.removeAttr(["width","height","style"]);try{e.before(t.View.imageHtml),this.__Q(".qp-media-pics-bg").get(0).appendChild(e.get(0)),this.__Q(".qp-media-toolbar").text(t.lang.getLangText(this.options.lang,"media_img_tip")),this.__Q(".qp-meida-tip-message").text(t.lang.getLangText(this.options.lang,"media_img_still_loading")),this.options.autoAdaptSize&&this.options.img.width&&this.options.img.height&&this.resizeMedia(this.options.img.width,this.options.img.height)}catch(i){throw new Error("createHtml unknow error:"+i.message)}},_controlEvent:function(){var e=this;this._$tipMessage=this.__Q(".qp-meida-tip-message"),e.__Q(".qp-media-box").on("click",function(i){return i&&t.event.stopPropagation(i),e.options.onlyRender||e.options.lock?void 0:e.imgData.width?void e._createViewer():(clearTimeout(e._msgTimeoutId),e._$tipMessage.show(),void(e._msgTimeoutId=setTimeout(function(){e._$tipMessage.hide()},3e3)))})},resizeMedia:function(e,t){e<this._minRenderWidth&&(e=this._minRenderWidth),t<this._minRenderHeight&&(t=this._minRenderHeight),this._$mediaBox||(this._$mediaBox=this.__Q(".qp-media-box")),this._$picsBg||(this._$picsBg=this.__Q(".qp-media-pics-bg")),this._$image||(this._$image=this.__Q(".qp-media-pics-bg img")),this._$mediaBox.css("width",e+"px"),this._$mediaBox.css("height",t+"px"),this._$picsBg.css("width",e+"px"),this._$picsBg.css("height",t+"px"),this._$image.css("maxWidth",e+"px"),this._$image.css("maxHeight",t+"px")},_createViewer:function(){var e=this;if(!e.viewer){var i=e.options.onFullScreenChange||e.options.eventHandler.fullScreenChange;e.viewer=t.Controller.ImageViewer.create(e.$container,e.imgData.width,e.imgData.height,e.imgData.src,i)}e.viewer.show()},destroy:function(){this.viewer&&this.viewer.hide()},reset:function(){this.viewer&&this.viewer.hide()},setLock:function(e){this.options.lock=e}}),t.fn("imgplayer",i)}(e,i),function(e,i){function n(e){return e=e||{},this.each(function(){var t=i(this),n=t.data("my.mediaplayer"),o=i.extend({},t.data()||{},"object"==typeof e&&e);n||(n=a.create(t,o),t.data("my.mediaplayer",n))})}var o={onEnd:!1,onPause:!1,onPlay:!1,onSeek:!1,onVolumeChange:!1,onTimeUpdate:!1,onlyRender:!1,autoAdaptSize:!1,renderUI:!0,lang:"zh",video:{render:!0,width:0,height:0,supportFullscreen:!0,showPlayBtnInVideo:!1,showFullscreenBtn:!1}},a=i.Controller.MediaPlayer.extend({create:function(e,t){var n=i.Controller.MediaPlayer.create.apply(this,[e,i.extend({},o,t),"video"]);if(n.options=i.extend({},o,t),n.options.renderUI){var a=["_mediaBoxToggle","_volumeToggleEventHandler","_pauseEventHandler","_unBind","_toFullScreen","_touchControlToggle","_playTriggerHandler","_endedHandler","_fullScreenChangeHandler","_playInVideoHanlder","_fullScreenClickHandler","_pcControlToggle"];n.proxyAll(a),n._init(),n.options.onlyRender===!1&&n.start(),n.bind("playTrigger",n._playTriggerHandler),n.bind("ended",n._endedHandler),n.bind("unBind",n._unBind),n.bind("pause",n._pauseEventHandler),n.bind("volumeToggle",n._volumeToggleEventHandler)}return n},_pauseEventHandler:function(){clearTimeout(this._timeOutId),this._$mediaBox.removeClass("qp-media-playing"),this._supportFullScreen()||(this._$playInBody.hide(),this._$qpIconsVideo.hide()),this.$container.removeClass("qp-media-auto-hide")},_autoHide:function(e){var t=this;clearTimeout(t._timeOutId),t._timeOutId=setTimeout(function(){(t.isPlaying()||e)&&t.$container.addClass("qp-media-auto-hide")},i.support.touch?5500:2e3)},_volumeToggleEventHandler:function(e){e?this._$goFullscreen.addClass("qp-bar-cover-index"):this._$goFullscreen.removeClass("qp-bar-cover-index")},_unBind:function(){this._exitFull(),this.pause(),this._fullScreenCallBack(!1)},_resizeMap:{"qp-media-box-min-width":function(e,t,i){return i?160>=e&&e>120:!1},"qp-media-box-min-width-s":function(e,t,i){return i?120>=e:!1},"qp-media-box-min-height":function(e,t,i){
return i?180>=t&&t>125:!1},"qp-media-box-min-height-s":function(e,t,i){return i?125>=t:!1},"qp-media-box-max-hd":function(e,t,i){return e>360&&t>270},"qp-media-box-not-surpot-full-min":function(e,t,i){return!i&&240>e&&e>=200?!0:void 0},"qp-media-box-not-surpot-full-min-s":function(e,t,i){return!i&&200>e?!0:void 0},"qp-media-box-max-fullscreen":function(){return!1}},_playTriggerHandler:function(){this._autoHide(),this._$mediaBox.addClass("qp-media-playing"),this._supportFullScreen()||(this._$playInBody.hide(),this._$qpIconsVideo.hide())},_endedHandler:function(){clearTimeout(this._timeOutId),this._$mediaBox.removeClass("qp-media-playing"),this.$container.removeClass("qp-media-auto-hide"),this._supportFullScreen()||(this._$playInBody.hide(),this._$qpIconsVideo.hide(),this.options.video.showPlayBtnInVideo&&this._$playInBody.show(),this.options.video.showFullscreenBtn||this._$qpIconsVideo.show())},_init:function(){this._fullScreen=!1,this._createVideo(),this._$goFullscreen=this.__Q('[data-oper="go-fullscreen"]'),this._$exitFullscreen=this.__Q('[data-oper="exit-fullscreen"]'),this._$fullScreenMessage=this.__Q(".qp-meida-tip-message"),this._$qpIconsVideo=this.__Q(".qp-icons-video"),this._$qpVideoWrap=this.__Q(".qp-video-videowrap"),this._$toolbarCover=this.__Q(".qp-media-toolbar-cover"),this._supportFullScreen()||this.options.video.showPlayBtnInVideo||this.__Q('.qp-media-box>[data-oper="play"]').hide(),i.browser.crosswalk&&this._$qpVideoWrap.css("zIndex","-1")},start:function(){var e=this;e.started||(e.started=!0,this.baseInit(),this._controlEvent(!0),this._fullScreenCallBack(!0))},_createVideo:function(){var e=this.getMediaModel().getQMedia();try{if(e.before(i.View.videoHtml),this.__Q(".qp-btn-exit-fullscreen").text(i.lang.getLangText(this.options.lang,"media_video_exit_fullscreen")),this.__Q(".qp-btn-to-fullscreen").text(i.lang.getLangText(this.options.lang,"media_video_fullscreen")),this.__Q(".qp-meida-tip-message").text(i.lang.getLangText(this.options.lang,"media_video_not_support_fullscreen")),this.__Q('[data-oper="loading"] ').before(e.get(0)),e.css("width","100%"),e.css("height","100%"),this._supportFullScreen()||this.__Q(".qp-media-box").addClass("qp-media-not-support-full"),this.options.video.showFullscreenBtn&&this._fullScreenEnabled()&&this.__Q(".qp-media-box").addClass("qp-media-show-fullscreen-btn"),this.options.autoAdaptSize){var t=this.options.video.width,n=this.options.video.height;t||n||(t=this.getMediaModel().getWidth(),n=this.getMediaModel().getHeight()),this.resizeMedia(t,n)}}catch(o){throw new Error("createVideo unknow error:"+o.message)}},resizeMedia:function(e,t){this._$mediaBox||(this._$mediaBox=this.__Q(".qp-media-box")),this._$mediaBox.css("width",e+"px"),this._$mediaBox.css("height",t+"px");for(var i in this._resizeMap)this._resizeMap[i](e,t,this._supportFullScreen())?this._$mediaBox.addClass(i):this._$mediaBox.removeClass(i)},_pcControlToggle:function(e){var t=this;if(t._lastX!==e.pageX||t._lastY!==e.pageY){if(t._lastX=e.pageX,t._lastY=e.pageY,clearTimeout(t._timeOutId),t._supportFullScreen()&&!t._isFullScreen())return!1;var n="show";switch(e.type){case"mousemove":n="show";break;case"mouseout":case"mouseleave":i.event.checkHover(e,t._$mediaBox.get(0))&&(n=t.isPlaying()?"hide":"show")}"show"===n?t.$container.removeClass("qp-media-auto-hide"):t.$container.addClass("qp-media-auto-hide");var o=!0;"mousemove"!==e.type&&"mouseover"!==e.type||((t._$toolbar.contains(e.srcElement)||e.srcElement===t._$toolbar.get(0))&&(o=!1),e.srcElement===t._$goFullscreen.get(0)&&(o=!1)),o&&t._autoHide()}},_touchControlToggle:function(e){if(!(e&&e.srcElement&&e.srcElement.className.indexOf("qp-media-toolbar-cover")<=-1)){clearTimeout(this._timeOutId);var t=this;if(t._supportFullScreen()&&!t._isFullScreen())return!1;var i=t.isPlaying();i?t.$container.toggleClass("qp-media-auto-hide"):this.play(),this._autoHide()}},_mediaBoxToggle:function(e){var t=this;e&&i.event.stopPropagation(e);var n=!0;(t._$toolbar.contains(e.srcElement)||e.srcElement===t._$toolbar.get(0))&&(n=!1),n?t._autoHide():clearTimeout(t._timeOutId)},_controlEvent:function(e){var t=this;e=e?"on":"off",t._$exitFullscreen[e]("click",t._toFullScreen),t._$goFullscreen[e]("click",t._toFullScreen),t._$playInBody[e]("click",t._playInVideoHanlder),i.support.touch?(t._$toolbarCover[e]("click",t._touchControlToggle),t._$mediaBox[e]("click",t._mediaBoxToggle)):(t._$mediaBox[e]("mousemove mouseover mouseout",t._pcControlToggle),t._$toolbarCover[e]("click",t._fullScreenClickHandler))},_fullScreenClickHandler:function(e){e&&e.srcElement&&e.srcElement.className.indexOf("qp-media-toolbar-cover")<=-1||(this._supportFullScreen()&&this._isFullScreen()||!this._supportFullScreen())&&this.playPause(e)},_playInVideoHanlder:function(e){this._supportFullScreen()&&!this._isFullScreen()?this._toFullScreen():this.playPause(e)},_exitFull:function(){t.exitFullscreen?t.exitFullscreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen&&t.mozCancelFullScreen()},_toFullScreen:function(e){e&&i.event.preventDefault(e);var t=this;if(!t._fullScreenEnabled())return clearTimeout(t._fullMsgTimeoutId),t._$fullScreenMessage.show(),void(t._fullMsgTimeoutId=setTimeout(function(){t._$fullScreenMessage.hide()},3e3));var n=t._$mediaBox.get(0);if(this._isFullScreen())this.pause(),this._exitFull();else{var o=n.requestFullscreen||n.webkitRequestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen;"undefined"!=typeof o&&o?o.call(n):i.logger.error("Fullscreen API is not supported"),this.play(),this.$container.addClass("qp-media-auto-hide"),this._$mediaBox.addClass("qp-media-playing"),clearTimeout(t._fullTimeOutId),t._fullTimeOutId=setTimeout(function(){t._fullScreen||t._fullScreenChangeEnable||(t._fullScreenChangeEnable=!1,t._unSurportFullApi())},i.support.isMobile?1e3:250)}},_fullScreenCallBack:function(e){var n=this._$mediaBox.get(0);e=e?"on":"off",i.browser.webkit?i(t)[e]("webkitfullscreenchange",this._fullScreenChangeHandler):i.browser.mozilla?i(t)[e]("mozfullscreenchange",this._fullScreenChangeHandler):i.browser.msie&&(n.requestFullscreen?i(t)[e]("fullscreenchange",this._fullScreenChangeHandler):n.msRequestFullscreen&&i(t)[e]("MSFullscreenChange",this._fullScreenChangeHandler))},_unSurportFullApi:function(){this.__Q(".qp-media-box").addClass("qp-media-not-support-full")},_fullScreenChangeHandler:function(e){if(i.browser.msie){if(e.target.activeElement!==this._$mediaBox.get(0))return}else if(e.srcElement!==this._$mediaBox.get(0))return;this._isFullScreen()?(this._fullScreen=!0,this._fullScreenChangeEnable=!0,this._$mediaBox.attr("original-style",this._$mediaBox.attr("style")),this._$mediaBox.attr("style",""),this._$mediaBox.attr("original-class",this._$mediaBox.attr("class")),this._$mediaBox.attr("class",""),this._$mediaBox.addClass("qp-media-box"),this._$mediaBox.addClass("qp-media-box-max-fullscreen"),this.$container.addClass("qp-media-fullscreen"),this.$container.addClass("qp-media-fullscreen-bar-show"),i.Native.InteractAppApi.setNativeModuleVisibility(!1),this.options.onFullScreenChange?this.options.onFullScreenChange(!0):this.options.eventHandler.fullScreenChange&&this.options.eventHandler.fullScreenChange(!0)):(this._fullScreen=!1,this.pause(),this.$container.removeClass("qp-media-fullscreen"),this._$mediaBox.attr("original-style")&&this._$mediaBox.attr("style",this._$mediaBox.attr("original-style")),this._$mediaBox.attr("original-class")&&this._$mediaBox.attr("class",this._$mediaBox.attr("original-class")),this.$container.removeClass("qp-media-fullscreen-bar-show"),this.$container.removeClass("qp-media-auto-hide"),this._$mediaBox.removeClass("qp-media-playing"),i.Native.InteractAppApi.setNativeModuleVisibility(!0),this.hideVolumeControl(),this._$loading.hide(),this.options.onFullScreenChange?this.options.onFullScreenChange(!1):this.options.eventHandler.fullScreenChange&&this.options.eventHandler.fullScreenChange(!1))},_isFullScreen:function(){return t.webkitIsFullScreen},_fullScreenEnabled:function(){return location.search.toLowerCase().indexOf("sys=pptshell")>=0&&!i.support.isMobile?!1:this._fullScreenChangeEnable===!1?!1:t.webkitFullscreenEnabled||t.msFullscreenEnabled||t.mozFullScreenEnabled},_supportFullScreen:function(){return this.options.video.supportFullscreen&&this._fullScreenEnabled()},reset:function(){this._exitFull(),this.pause()}});i.fn("videoplayer",n)}(e,i),i.Controller.ImageViewer=function(){var n=i.Class.Create();return n.include({create:function(e,t,i,n,o){var a=Object.create(this);return a._imgData={width:t,height:i,src:n},a.$container=e,a.proxyAll(["hide","stopImgPropagation"]),a.fullScreenChange=o,a},stopImgPropagation:function(e){i.event.preventDefault(e),i.event.stopPropagation(e)},show:function(){var n=this,o=i(".qp-media-viewer-temp");o.length>0&&o.remove(),i(t.body).addClass("qp-media-viewer-over-hidden");var a=i(t.body),r=t.createElement("div");i(r).attr("class","qp-media-viewer-temp"),a.appendChild(r);var o=i(".qp-media-viewer-temp");o.html(i.View.viewerHtml);var s=i(".qp_media_window_mask"),d=i(".qp-media-viewer-img"),l=i(".qp-media-viewer-close"),u=i(".qp-media-viewer-img img"),p=i(".qp-media-viewer-center");n._maxHeight=.8*e.innerHeight,n._maxWidth=.8*e.innerWidth;var h=i.utils.resize(n._imgData.width,n._imgData.height,n._maxWidth,n._maxHeight);d.css("marginLeft","-"+h.w/2+"px"),d.css("marginTop","-"+h.h/2+"px"),d.css("width",h.w+"px"),d.css("height",h.h+"px"),u.attr("src",n._imgData.src),u.attr("width",h.w),u.attr("height",h.h),s.show(),p.show(),l.on("click",n.hide),s.on("click",n.hide),u.on("click",n.hide),i.Native.InteractAppApi.setViewerModuleVisibility(!1),n.fullScreenChange&&n.fullScreenChange(!0)},hide:function(e){e&&(i.event.preventDefault(e),i.event.stopPropagation(e));var n=i(".qp-media-viewer-temp");n.length>0&&n.remove(),i(t.body).removeClass("qp-media-viewer-over-hidden"),i.Native.InteractAppApi.setViewerModuleVisibility(!0),this.fullScreenChange&&this.fullScreenChange(!1)}}),n}(),i.Model.MediaEvent=function(e,t){var i=t.Class.Create();return i.include(n),i.include({eventMethod:["playing","pause","ended","timeupdate","seeked","volumechange","progress","waiting","error","loadstart","loadeddata","loadedmetadata","stalled","suspend","play","durationchange"],create:function(e,t){var i=Object.create(this);return i._mediaModel=e,i.options=t,i.proxyAll(i.eventMethod),i.canBindKey(["playing","pause","ended","timeupdate","volumechange","progress","waiting","error","loadedmetadata","play","durationchange"]),i.mediaEventListener(!0),i},mediaEventListener:function(e){var t=this,i=t._mediaModel.getQMedia(),n=t.eventMethod;t.emptied=!0;for(var o=0;o<n.length;o++)i[e?"on":"off"](n[o],"",t[n[o]])},playing:function(){var e=this;e.trigger("playing"),e.emptied=!1;var t={mediaId:e._mediaModel.getId(),index:e.options.index,mediaType:e._mediaModel.getMediaType()};e.options._onPlay&&e.options._onPlay(t),e.options.onPlay?e.options.onPlay(t):e.options.eventHandler&&e.options.eventHandler.play(t)},pause:function(){var e=this;e.trigger("pause");var t={mediaId:e._mediaModel.getId(),index:e.options.index,mediaType:e._mediaModel.getMediaType(),ended:!!e._ended};e.options.onPause?e.options.onPause(t):e.options.eventHandler&&e.options.eventHandler.pause(t),e._ended=!1},emptied:function(){this.emptied=!0},ended:function(){var e=this;e._mediaModel.load(),e._mediaModel.resetPoster(),e.trigger("ended");var t={mediaId:e._mediaModel.getId(),index:e.options.index,mediaType:e._mediaModel.getMediaType()};e.options._onEnd&&e.options._onEnd(t),e.options.onEnd?e.options.onEnd(t):e.options.eventHandler&&e.options.eventHandler.ended(t),e.playing=!1},timeupdate:function(){var e=this;e.trigger("timeupdate");var t={mediaId:e._mediaModel.getId(),index:e.options.index,mediaType:e._mediaModel.getMediaType()};e.options.onTimeUpdate?e.options.onTimeUpdate(t):e.options.eventHandler&&e.options.eventHandler.timeupdate(t);var i=e._mediaModel.getDuration(),n=e._mediaModel.getCurrentTime();i>0&&n>=i&&n>0&&(e._ended=!0)},seeked:function(){var e=this,t={mediaId:e._mediaModel.getId(),index:e.options.index,mediaType:e._mediaModel.getMediaType(),seeked:e._mediaModel.getCurrentTime(),ended:!1};e.options.onSeek?e.options.onSeek(t):e.options.eventHandler&&e.options.eventHandler.seeked(t)},volumechange:function(){var e=this;e.trigger("volumechange"),e.volumeChangeEvent(!0)},progress:function(){this.trigger("progress")},waiting:function(){this.trigger("waiting")},error:function(){var e=this._mediaModel.getError()?this._mediaModel.getError().code:"";t.logger.debug("media error code ："+e),this.trigger("error",e)},loadstart:function(){t.logger.debug("loadstart")},loadeddata:function(){t.logger.debug("loadeddata")},loadedmetadata:function(){t.logger.debug("loadedmetadata"),this.trigger("loadedmetadata")},stalled:function(){t.logger.debug("stalled")},suspend:function(){t.logger.debug("suspend")},play:function(){t.logger.debug("play");var e=this;e.trigger("play"),e.options.mutuallyExclusive&&e.options.eventHandler.mutuallyExclusivePlay({mediaId:e._mediaModel.getId(),dataId:e.options.dataId,index:e.options.index,mediaType:e._mediaModel.getMediaType()})},durationchange:function(){this.trigger("durationchange")},volumeChangeEvent:function(e,t){var i=this._mediaModel.getMuted(),n=i?0:this._mediaModel.getVolume();if("undefined"!=typeof this.lastVolumeDisplay&&e===this.lastVolumeDisplay&&"undefined"!=typeof this.lastVolume&&!t){if(n===this.lastVolume||0!==n&&Math.abs(this.lastVolume-n)<.01)return;if("undefined"!=typeof this.volumeUp&&!this.volumeUp&&Math.abs(this.lastVolume-n)<.25)return}this.volumeUp=!1,this.lastVolumeDisplay=e,this.lastVolume=i?0:this._mediaModel.getVolume();var o={mediaId:this._mediaModel.getId(),index:this.options.index,mediaType:this._mediaModel.getMediaType(),volume:i?0:this._mediaModel.getVolume(),display:e};this.options.onVolumeChange?this.options.onVolumeChange(o):this.options.eventHandler&&this.options.eventHandler.volumeChange(o)}}),i}(e,i),i.Model.MediaModel=function(e,t){var i=t.Class.Create();return i.include({create:function(e){var t=Object.create(this);return t.media=e.get(0),t.$media=e,t.poster=e.attr("poster"),t.id=e.attr("id"),t.mediaType=t.media.tagName.toLowerCase(),t},load:function(){this.media.load()},setPreLoad:function(e){this.$media.attr("preload",e)},getWidth:function(){var e=this.$media.attr("width"),t=this.$media.css("width");return parseInt(t.indexOf("%")>0?e:e||e)||0},getHeight:function(){var e=this.$media.attr("height"),t=this.$media.css("height");return parseInt(t.indexOf("%")>0?e:e||e)||0},getMediaType:function(){return this.mediaType},getMedia:function(){return this.media},getQMedia:function(){return this.$media},getId:function(){return this.id},getPoster:function(){return this.poster},isPlaying:function(){return!this.media.paused},resetPoster:function(){this.poster&&this.$media.attr("poster",this.poster)},getDuration:function(){return isNaN(this.media.duration)?0:this.media.duration<0?0:this.media.duration},getCurrentTime:function(){return this.media.currentTime},setCurrentTime:function(e){this.media.currentTime=e},getVolume:function(){return this.media.volume},setVolume:function(e){this.media.volume=e},getBuffered:function(){return this.media.buffered},getMuted:function(){return this.media.muted},setMuted:function(e){this.media.muted=e},getReadyState:function(){return this.media.readyState},getError:function(){return this.media.error}}),i}(e,i),i.View.audioHtml=function(e,t){var i=[];return i.push('<div data-oper="media-box" class="qp-media-box qp-media-box-audio">'),i.push("    <!-- 播放中下面的qp-btn-icon-play添加类名qp-btn-stop -->"),i.push('    <span data-oper="play" class="qp-btn-icon-play"></span>'),i.push('    <span class="qp-media-icons-right qp-icons-sound"></span>'),i.push('    <!--<div class="qp-media-audio-bg">音频背景</div>-->'),i.push("    <!--放置loading地方-->"),i.push('    <div class="qp-video-videowrap qp-media-audio-bg">'),i.push('        <div data-oper="loading" class="qp-video-loading">loading..</div>'),i.push("    </div>"),i.push("    <!--/放置loading地方-->"),i.push(""),i.push("    <!--媒体时常超过一小时的qp-media-toolbar添加类名qp-progress-long-->"),i.push('    <div data-oper="toolbar" class="qp-media-toolbar">'),i.push("        <!--全屏的视频才显示的播放按钮 暂停添加类名qp-btn-stop-->"),i.push('        <span data-oper="play" class="qp-btn-icon-play"></span>'),i.push("        <!--进度条-->"),i.push('        <div data-oper="progress" class="qp-media-progress-outer">'),i.push('            <div class="qp-media-progress">'),i.push('                <div data-oper="downed-bar" class="qp-media-downed" style="width: 0%;"></div>'),i.push('                <div data-oper="played-bar" class="qp-media-played" style="width: 0%;"></div>'),i.push("            </div>"),i.push("        </div>"),i.push("        <!--/进度条-->"),i.push("        <!--媒体时间-->                                                                                                           "),i.push('        <span class="qp-time-base">'),i.push('             <em data-oper="curentTime" class="qp-curent-time">0:00</em>/<em data-oper="endTime" class="qp-end-time">0:00</em>'),i.push("        </span>"),i.push("        <!--/媒体时间-->"),i.push("        <!--音量-->"),i.push('        <div data-oper="volume-icon-container" class="qp-media-volume">'),i.push("            <!--静音添加类名qp-btn-volume-no-->"),i.push('            <span data-oper="volume-icon" class="qp-btn-volume"></span>'),i.push(""),i.push('            <div data-oper="volume-control" class="qp-media-progress-box" style="display:none">'),i.push('                <div data-oper="volume-bar-container" class="qp-media-progress">'),i.push('                    <div data-oper="volume-bar-s" class="qp-media-progress-s" style="height: 0%;"></div>'),i.push('                    <div data-oper="volume-bar-r" class="qp-media-progress-r" style="bottom: 0%;"></div>'),i.push("                </div>"),i.push("            </div>"),i.push("        </div>"),i.push(""),i.push("    </div>"),i.push('    <div class="qp-media-disable" data-oper="media-disable">'),i.push(""),i.push("    </div>"),i.push("</div>                                                                                                                            "),i.push(""),i.join("")}(e,i),i.View.imageHtml=function(e,t){var i=[];return i.push('<div class="qp-media-box qp-media-box-img ">'),i.push('    <span class="qp-media-icons-right qp-icons-pic"></span>'),i.push('    <div class="qp-meida-tip-message" style="display: none">'),i.push("        图片还在加载中"),i.push("    </div>"),i.push('    <div class="qp-media-pics-bg"></div>'),i.push('    <div class="qp-media-toolbar">'),i.push("        点击查看图片"),i.push("    </div>"),i.push(""),i.push("</div>"),i.join("")}(e,i),i.View.videoHtml=function(e,t){var i=[];return i.push('<div data-oper="media-box" class="qp-media-box qp-media-box-video">'),i.push("    <!-- 播放中下面的qp-btn-icon-play添加类名qp-btn-stop -->"),i.push('    <span data-oper="play" class="qp-btn-icon-play "></span>'),i.push('    <span data-oper="exit-fullscreen" class="qp-btn-exit-fullscreen">退出全屏</span>'),i.push('    <span data-oper="go-fullscreen" class="qp-btn-to-fullscreen">全屏</span>'),i.push('    <span class="qp-media-icons-right qp-icons-video"></span>'),i.push(""),i.push("    <!--放置视频的地方-->"),i.push('    <div class="qp-video-videowrap">'),i.push('        <div data-oper="loading" class="qp-video-loading">loading..</div>'),i.push("    </div>"),i.push("    <!--/放置视频的地方-->"),i.push('    <div class="qp-meida-tip-message" style="display: none">'),i.push("        不支持全屏播放"),i.push("    </div>"),i.push(""),i.push("    <!--媒体时常超过一小时的qp-media-toolbar添加类名qp-progress-long-->"),i.push('    <div data-oper="toolbar-cover" class="qp-media-toolbar-cover">'),i.push('        <div data-oper="toolbar" class="qp-media-toolbar">'),i.push("            <!--全屏的视频才显示的播放按钮 暂停添加类名qp-btn-stop-->"),i.push('            <span data-oper="play" class="qp-btn-icon-play"></span>'),i.push("            <!--进度条-->"),i.push('            <div data-oper="progress" class="qp-media-progress-outer">'),i.push('                <div class="qp-media-progress">'),i.push('                    <div data-oper="downed-bar" class="qp-media-downed" style="width: 0%;"></div>'),i.push('                    <div data-oper="played-bar" class="qp-media-played" style="width: 0%;"></div>'),i.push("                </div>"),i.push("            </div>"),i.push("            <!--/进度条-->"),i.push("            <!--媒体时间-->"),i.push('        <span class="qp-time-base">'),i.push('             <em data-oper="curentTime" class="qp-curent-time">0:00</em>/<em data-oper="endTime" class="qp-end-time">0:00</em>'),i.push("        </span>"),i.push("            <!--/媒体时间-->"),i.push("            <!--音量-->"),i.push('            <div data-oper="volume-icon-container" class="qp-media-volume">'),i.push("                <!--静音添加类名qp-btn-volume-no-->"),i.push('                <span data-oper="volume-icon" class="qp-btn-volume "></span>'),i.push(""),i.push('                <div data-oper="volume-control" class="qp-media-progress-box" style="display:none">'),i.push('                    <div data-oper="volume-bar-container" class="qp-media-progress">'),i.push('                        <div data-oper="volume-bar-s" class="qp-media-progress-s" style="height: 0%;"></div>'),i.push('                        <div data-oper="volume-bar-r" class="qp-media-progress-r" style="bottom: 0%;"></div>'),i.push("                    </div>"),i.push("                </div>"),i.push("            </div>"),i.push(""),i.push("        </div>"),i.push("    </div>"),i.push('    <div class="qp-media-disable" data-oper="media-disable">'),i.push(""),i.push("    </div>"),i.push("</div>"),i.push(""),i.join("")}(e,i),i.View.viewerHtml=function(e,t){var i=[];return i.push('<div class="qp_media_window_mask" style="display: none"></div>'),i.push('<div class="qp-media-viewer-center" style="display: none">'),i.push('    <div class="qp-media-viewer-img">'),i.push('        <div class="qp-media-viewer-close"></div>'),i.push("        <img />"),i.push("    </div>"),i.push("</div>"),i.join("")}(e,i),function(e,i){var n=function(){},o=function(t){var i=e.NDMediaPlayer,n=t.mediaType+"-"+t.index+"|"+t.dataId;for(var o in i._$medias)n!==o&&i._$medias[o]&&i._$medias[o].data("my.mediaplayer").pause&&i._$medias[o].data("my.mediaplayer").pause()},a={onlyRender:!1,lock:!1,autoAdaptSize:!1,lang:"zh",mutuallyExclusive:!0,containerId:"",returnInstances:!1,mediaPreload:!0,index:null,style:"",_onEnd:null,_onPlay:null,img:{render:!1,renderUI:!0,renderImmediately:!1,width:0,height:0,src:""},video:{render:!0,width:0,height:0,renderUI:!0,supportFullscreen:!0,showPlayBtnInVideo:!1,showFullscreenBtn:!1},audio:{render:!0,width:0,height:0,renderUI:!0},onPlay:null,onPause:null,onEnd:null,onSeek:null,onVolumeChange:null,onTimeUpdate:null,onFullScreenChange:null},r=["audio","video","img"],s=function(e,t){e=e||{};var n=i.extend({},a.img,e.img||{}),o=i.extend({},a.video,e.video||{}),r=i.extend({},a.audio,e.audio||{}),e=i.extend({},a,e||{},t);return e.img=n,e.video=o,e.audio=r,e.mediaMargin&&(e.style+=";margin:"+e.mediaMargin),e};e.NDMediaPlayer={_$medias:{},_eventHandler:{play:n,mutuallyExclusivePlay:o,pause:n,ended:n,timeupdate:n,seeked:n,volumeChange:n,fullScreenChange:n},_getMedia:function(e,t){var i=this,n=e+"-"+t;for(var o in this._$medias)if(i._getKeyMedia(o)===n){var a=this._$medias[o];return a}return null},_getKey:function(e){return e.attr("data-media")+"|"+e.attr("data-id")},_getKeyId:function(e){return e.split("|")[1]},_getKeyMedia:function(e){return e.split("|")[0]},_getKeyType:function(e){return e.split("-")[0]},renderToTarget:function(e,i,n){var o=t.createElement("div");o.appendChild(e),NDMediaPlayer.render(o,n),i.appendChild(o.childNodes[0])},renderMediaEle:function(e,n){var o=t.createElement("div"),a=i(o);i(e).before(o),a.appendChild(e),NDMediaPlayer.render(o,n),a.before(o.childNodes[0]),a.remove()},_clear:function(e){var t=this;if(t._$medias[e]){var i=t._$medias[e].data("my.mediaplayer");i&&i.destroy(),t._$medias[e].data("my.mediaplayer",null),delete t._$medias[e]}},setLoggerLevel:function(e){i.logger.setLevel(e)},destroy:function(e){var o=this;for(var a in o._eventHandler)"mutuallyExclusivePlay"!==a&&(o._eventHandler[a]=n);if(arguments.length>0){var r=typeof e,s=null;if("string"===r?s=i("#"+e):"object"===r&&(s=i("undefined"!=typeof jQuery&&e instanceof jQuery?e[0]:e)),0===s.length)return;for(var d=s.find(".qp_media"),l=0;l<d.length;l++){var u=o._getKey(i(d.get(l)));o._clear(u)}}else for(var p in o._$medias)t.querySelector('[data-id="'+o._getKeyId(p)+'"]')||o._clear(p)},reset:function(){for(var e in this._$medias)if(this._$medias[e]){var t=this._$medias[e].data("my.mediaplayer");t&&t.reset&&t.reset()}},setLock:function(e,t){if(t){var n=typeof t,o=null;if("string"===n?o=i("#"+t):"object"===n&&(o=i("undefined"!=typeof jQuery&&t instanceof jQuery?t[0]:t)),0===o.length)return;for(var a=o.find(".qp_media"),r=0;r<a.length;r++){var s=this._getKey(i(a.get(r)));if(this._$medias[s]){var d=this._$medias[s].data("my.mediaplayer");d&&d.setLock&&d.setLock(e)}}}else for(var l in this._$medias)if(this._$medias[l]){var d=this._$medias[l].data("my.mediaplayer");d&&d.setLock&&d.setLock(e)}},render:function(e,n){var o=this;for(var a in o._$medias)t.querySelector('[data-id="'+o._getKeyId(a)+'"]')||o._clear(a);for(var n=s(n,{eventHandler:o._eventHandler}),d={},l=0,u=r.length;u>l;l++)!function(a){i(e.length>0?e[0]:e).find(r[a]).each(function(e){if(n[r[a]].render){var s=i(this),l=s.closest(".qp-media-box");if(!(l&&l.length>0&&l.get(0))){var u=i(t.createElement("div"));u.attr("style",n.style),u.addClass("qp_media"),u.attr("id","qp-media"),s.before(u.get(0)),u.appendChild(s.get(0));var p={};"undefined"==typeof n.index||null==n.index?p=i.extend({},n,{index:n.containerId+"-"+e}):(p=i.extend({},n),p.index=p.containerId+"-"+p.index),p.renderUI=n[r[a]].renderUI;var h=i.utils.getRandomId("media");u.attr("data-id",h),p.dataId=h,u[r[a]+"player"](p);var c=r[a]+"-"+p.index;u.attr("data-media",c);var m=o._getKey(u);n.returnInstances&&(d[m]=u.data("my.mediaplayer")),o._$medias[m]=u,u.data("my.mediaplayer")&&u.data("my.mediaplayer").setLock(n.lock)}}})}(l);return n.returnInstances?d:void 0},mediaOnStart:function(e){"function"==typeof e&&(this._eventHandler.play=e)},mediaOnPause:function(e){"function"==typeof e&&(this._eventHandler.pause=e)},mediaOnEnded:function(e){"function"==typeof e&&(this._eventHandler.ended=e)},mediaOnTimeupdate:function(e){"function"==typeof e&&(this._eventHandler.timeupdate=e)},mediaOnSeeked:function(e){"function"==typeof e&&(this._eventHandler.seeked=e)},mediaOnVolumeChange:function(e){"function"==typeof e&&(this._eventHandler.volumeChange=e)},getMedia:function(e){if(e){var t=this._$medias[e];return t}return this._$medias},mediaPlay:function(e,t){var i=this._getMedia(e,t);i&&i.get(0)&&i.data("my.mediaplayer").play()},mediaPause:function(e,t){var i=this._getMedia(e,t);i&&i.get(0)&&i.data("my.mediaplayer").pause()},mediaSkip:function(e,t,i){var n=this._getMedia(e,t).find(e);n&&n.get(0)&&(n.get(0).currentTime=0==i?.01:i)},mediaVolumeChange:function(e,t,i,n){var o=this._getMedia(e,t);o&&o.get(0)&&o.data("my.mediaplayer").changeVolume(i,n)},mediaPauseAll:function(e){var t=this;if("undefined"!=typeof e){var n=typeof e,o=null;if("string"===n?o=i("#"+e):"object"===n&&(o=i("undefined"!=typeof jQuery&&e instanceof jQuery?e[0]:e)),0===o.length)return;for(var a=o.find(".qp_media"),r=0;r<a.length;r++){var s=t._getKey(i(a.get(r)));if(t._$medias[s]){var d=t._$medias[s].data("my.mediaplayer");d&&d.pause&&d.pause()}}}else for(var l in t._$medias){var u=t._$medias[l];u&&u.get(0)&&u.data("my.mediaplayer")&&u.data("my.mediaplayer").pause&&u.data("my.mediaplayer").pause()}},mediaOnFullScreenChange:function(e){"function"==typeof e&&(this._eventHandler.fullScreenChange=e)}}}(e,i),function(e,i){e.NDMediaPlayer.PPTMediaRender={videoZIndex:2,mutuallyExclusive:!1,renderVideoImg:function(e){var t="",i=e.previousElementSibling;return i&&(i.style.display="none",t=i.getAttribute("src")),e.parentNode&&e.parentNode.parentNode&&(e.parentNode.parentNode.setAttribute("onclick",""),e.parentNode.parentNode.setAttribute("onmouseout",""),e.parentNode.parentNode.setAttribute("onmouseover","")),t},mediaRenderComplete:function(){i(t).bind("click",function(t){var n=i(t.target).closest(".qp-media-box");if(!n||0===n.length){var o=e.NDMediaPlayer.getMedia();for(var a in o)o[a].data("my.mediaplayer")&&o[a].data("my.mediaplayer").hideVolumeControl()}}),e.parent&&e.parent.PPTMediaPlayer&&e.parent.PPTMediaPlayer.renderMediaComplete&&e.parent.PPTMediaPlayer.renderMediaComplete(e.NDMediaPlayer)},renderVideo:function(t,i,n,o){t.setAttribute("poster",o),e.NDMediaPlayer.renderToTarget(t,i,{onlyRender:!1,autoAdaptSize:!0,mutuallyExclusive:NDMediaPlayer.PPTMediaRender.mutuallyExclusive,mediaMargin:"0px",audio:{render:!1},video:{showPlayBtnInVideo:!1,supportFullscreen:!1},index:n,_onPlay:function(){if(NDMediaPlayer.PPTMediaRender.mutuallyExclusive){var t=e.NDMediaPlayer.getMedia();for(var i in t)"audio"===e.NDMediaPlayer._getKeyType(i)&&t[i].hide()}}})},renderAudio:function(n,o,a){e.NDMediaPlayer.renderToTarget(n,o,{onlyRender:!1,autoAdaptSize:!0,mutuallyExclusive:NDMediaPlayer.PPTMediaRender.mutuallyExclusive,index:a,style:"display:none;z-index:"+NDMediaPlayer.PPTMediaRender.videoZIndex,mediaMargin:"0px",video:{render:!1},audio:{width:220,height:80},_onEnd:function(t){var n=e.NDMediaPlayer._getMedia(t.mediaType,t.index);n&&(n.hide(),n.get(0).parentNode&&i(n.get(0).parentNode).css("zIndex",""))},_onPlay:function(e){if(NDMediaPlayer.PPTMediaRender.mutuallyExclusive){var t=NDMediaPlayer.getMedia();for(var n in t)NDMediaPlayer._getKeyMedia(n)!==e.mediaType+"-"+e.index&&"audio"===NDMediaPlayer._getKeyType(n)&&(t[n].hide(),t[n].parentNode&&i(t[n].parentNode).css("zIndex",""))}}});var r=i(o).find("img");r&&r.length>0&&r.get(0).parentNode&&!function(n){var o=i(n.get(0).parentNode);o.attr("onclick",""),o.attr("onmouseout",""),o.attr("onmouseover",""),o.addClass(o.attr("id"));var a="on",r="";if(n.get(0).nextElementSibling&&(r=NDMediaPlayer._getKey(i(n.get(0).nextElementSibling))),r){var s=e.NDMediaPlayer.getMedia(r),d=s.data("my.mediaplayer"),l=i("#contentHolder"),u=s.find(".qp-media-box"),p=!1,h=function(){if(!p){p=!0;var e=o.offset(),t=l.offset(),n=d.getScale(),a=u.width(),r=u.height(),h=o.width(),c=o.height(),m=e.left-(n*a/2-n*h/2)-t.left,g=e.left+n*a/2+n*h/2-(t.left+l.width()),v=e.top+c*n+d.getScale()*r-(t.top+l.height());0>m?s.css("left",-parseInt(a/2-h/2+m/n)+"px"):g>0?s.css("left",-parseInt(a/2-h/2+g/n)+"px"):s.css("left",-parseInt(a/2-h/2)+"px"),v>0?s.css("bottom",c/(i.support.touch?1:1.5)+"px"):s.css("top",c/(i.support.touch?1:1.5)+"px")}};n[a]("click","",function(){if(d.isPlaying())d.pause(),s.hide(),o.css("zIndex","");else if(d.play(),s.show(),o.css("zIndex",NDMediaPlayer.PPTMediaRender.videoZIndex++),h(),NDMediaPlayer.PPTMediaRender.mutuallyExclusive){var t=e.NDMediaPlayer.getMedia();for(var i in t)i!==r&&"audio"===NDMediaPlayer._getKeyType(i)&&(t[i].hide(),o.css("zIndex",""),t[i].data("my.mediaplayer").pause())}}),i.support.touch||n[a]("mouseover","",function(e){i.event.checkHover(e,this)&&(s.show(),o.css("zIndex",NDMediaPlayer.PPTMediaRender.videoZIndex++),s.css("zIndex",NDMediaPlayer.PPTMediaRender.videoZIndex++),h())}),o[a]("mouseout","",function(e){i.event.checkHover(e,this)&&(d.isPlaying()||(s.hide(),o.css("zIndex","")))}),i(t).bind("click",function(e){var t=i(e.target).closest("."+o.attr("id"));t&&0!==t.length||d.isPlaying()||(s.hide(),o.css("zIndex",""))})}}(r)}}}(e,i)}(window,document);
//# sourceMappingURL=media.min.js.map
